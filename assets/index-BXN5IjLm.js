(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function yv(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var _v={exports:{}},Lc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fb=Symbol.for("react.transitional.element"),db=Symbol.for("react.fragment");function vv(e,t,n){var i=null;if(n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),"key"in t){n={};for(var r in t)r!=="key"&&(n[r]=t[r])}else n=t;return t=n.ref,{$$typeof:fb,type:e,key:i,ref:t!==void 0?t:null,props:n}}Lc.Fragment=db;Lc.jsx=vv;Lc.jsxs=vv;_v.exports=Lc;var T=_v.exports,Tv={exports:{}},st={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yd=Symbol.for("react.transitional.element"),mb=Symbol.for("react.portal"),gb=Symbol.for("react.fragment"),pb=Symbol.for("react.strict_mode"),yb=Symbol.for("react.profiler"),_b=Symbol.for("react.consumer"),vb=Symbol.for("react.context"),Tb=Symbol.for("react.forward_ref"),Eb=Symbol.for("react.suspense"),Ab=Symbol.for("react.memo"),Ev=Symbol.for("react.lazy"),pp=Symbol.iterator;function bb(e){return e===null||typeof e!="object"?null:(e=pp&&e[pp]||e["@@iterator"],typeof e=="function"?e:null)}var Av={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},bv=Object.assign,Sv={};function ga(e,t,n){this.props=e,this.context=t,this.refs=Sv,this.updater=n||Av}ga.prototype.isReactComponent={};ga.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ga.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function wv(){}wv.prototype=ga.prototype;function Kd(e,t,n){this.props=e,this.context=t,this.refs=Sv,this.updater=n||Av}var Xd=Kd.prototype=new wv;Xd.constructor=Kd;bv(Xd,ga.prototype);Xd.isPureReactComponent=!0;var yp=Array.isArray,zt={H:null,A:null,T:null,S:null,V:null},Rv=Object.prototype.hasOwnProperty;function $d(e,t,n,i,r,s){return n=s.ref,{$$typeof:Yd,type:e,key:t,ref:n!==void 0?n:null,props:s}}function Sb(e,t){return $d(e.type,t,void 0,void 0,void 0,e.props)}function Zd(e){return typeof e=="object"&&e!==null&&e.$$typeof===Yd}function wb(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var _p=/\/+/g;function xh(e,t){return typeof e=="object"&&e!==null&&e.key!=null?wb(""+e.key):t.toString(36)}function vp(){}function Rb(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch(typeof e.status=="string"?e.then(vp,vp):(e.status="pending",e.then(function(t){e.status==="pending"&&(e.status="fulfilled",e.value=t)},function(t){e.status==="pending"&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}function ps(e,t,n,i,r){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(s){case"bigint":case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Yd:case mb:a=!0;break;case Ev:return a=e._init,ps(a(e._payload),t,n,i,r)}}if(a)return r=r(e),a=i===""?"."+xh(e,0):i,yp(r)?(n="",a!=null&&(n=a.replace(_p,"$&/")+"/"),ps(r,t,n,"",function(h){return h})):r!=null&&(Zd(r)&&(r=Sb(r,n+(r.key==null||e&&e.key===r.key?"":(""+r.key).replace(_p,"$&/")+"/")+a)),t.push(r)),1;a=0;var l=i===""?".":i+":";if(yp(e))for(var u=0;u<e.length;u++)i=e[u],s=l+xh(i,u),a+=ps(i,t,n,s,r);else if(u=bb(e),typeof u=="function")for(e=u.call(e),u=0;!(i=e.next()).done;)i=i.value,s=l+xh(i,u++),a+=ps(i,t,n,s,r);else if(s==="object"){if(typeof e.then=="function")return ps(Rb(e),t,n,i,r);throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return a}function Xl(e,t,n){if(e==null)return e;var i=[],r=0;return ps(e,i,"","",function(s){return t.call(n,s,r++)}),i}function Ib(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Tp=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function Cb(){}st.Children={map:Xl,forEach:function(e,t,n){Xl(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Xl(e,function(){t++}),t},toArray:function(e){return Xl(e,function(t){return t})||[]},only:function(e){if(!Zd(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};st.Component=ga;st.Fragment=gb;st.Profiler=yb;st.PureComponent=Kd;st.StrictMode=pb;st.Suspense=Eb;st.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=zt;st.__COMPILER_RUNTIME={__proto__:null,c:function(e){return zt.H.useMemoCache(e)}};st.cache=function(e){return function(){return e.apply(null,arguments)}};st.cloneElement=function(e,t,n){if(e==null)throw Error("The argument must be a React element, but you passed "+e+".");var i=bv({},e.props),r=e.key,s=void 0;if(t!=null)for(a in t.ref!==void 0&&(s=void 0),t.key!==void 0&&(r=""+t.key),t)!Rv.call(t,a)||a==="key"||a==="__self"||a==="__source"||a==="ref"&&t.ref===void 0||(i[a]=t[a]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}return $d(e.type,r,void 0,void 0,s,i)};st.createContext=function(e){return e={$$typeof:vb,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:_b,_context:e},e};st.createElement=function(e,t,n){var i,r={},s=null;if(t!=null)for(i in t.key!==void 0&&(s=""+t.key),t)Rv.call(t,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(r[i]=t[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}if(e&&e.defaultProps)for(i in a=e.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return $d(e,s,void 0,void 0,null,r)};st.createRef=function(){return{current:null}};st.forwardRef=function(e){return{$$typeof:Tb,render:e}};st.isValidElement=Zd;st.lazy=function(e){return{$$typeof:Ev,_payload:{_status:-1,_result:e},_init:Ib}};st.memo=function(e,t){return{$$typeof:Ab,type:e,compare:t===void 0?null:t}};st.startTransition=function(e){var t=zt.T,n={};zt.T=n;try{var i=e(),r=zt.S;r!==null&&r(n,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(Cb,Tp)}catch(s){Tp(s)}finally{zt.T=t}};st.unstable_useCacheRefresh=function(){return zt.H.useCacheRefresh()};st.use=function(e){return zt.H.use(e)};st.useActionState=function(e,t,n){return zt.H.useActionState(e,t,n)};st.useCallback=function(e,t){return zt.H.useCallback(e,t)};st.useContext=function(e){return zt.H.useContext(e)};st.useDebugValue=function(){};st.useDeferredValue=function(e,t){return zt.H.useDeferredValue(e,t)};st.useEffect=function(e,t,n){var i=zt.H;if(typeof n=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return i.useEffect(e,t)};st.useId=function(){return zt.H.useId()};st.useImperativeHandle=function(e,t,n){return zt.H.useImperativeHandle(e,t,n)};st.useInsertionEffect=function(e,t){return zt.H.useInsertionEffect(e,t)};st.useLayoutEffect=function(e,t){return zt.H.useLayoutEffect(e,t)};st.useMemo=function(e,t){return zt.H.useMemo(e,t)};st.useOptimistic=function(e,t){return zt.H.useOptimistic(e,t)};st.useReducer=function(e,t,n){return zt.H.useReducer(e,t,n)};st.useRef=function(e){return zt.H.useRef(e)};st.useState=function(e){return zt.H.useState(e)};st.useSyncExternalStore=function(e,t,n){return zt.H.useSyncExternalStore(e,t,n)};st.useTransition=function(){return zt.H.useTransition()};st.version="19.1.0";Tv.exports=st;var F=Tv.exports;const Iv=yv(F);var Cv={exports:{}},Uc={},Dv={exports:{}},xv={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(M,Y){var tt=M.length;M.push(Y);t:for(;0<tt;){var wt=tt-1>>>1,Dt=M[wt];if(0<r(Dt,Y))M[wt]=Y,M[tt]=Dt,tt=wt;else break t}}function n(M){return M.length===0?null:M[0]}function i(M){if(M.length===0)return null;var Y=M[0],tt=M.pop();if(tt!==Y){M[0]=tt;t:for(var wt=0,Dt=M.length,vi=Dt>>>1;wt<vi;){var _e=2*(wt+1)-1,qt=M[_e],Ge=_e+1,Qe=M[Ge];if(0>r(qt,tt))Ge<Dt&&0>r(Qe,qt)?(M[wt]=Qe,M[Ge]=tt,wt=Ge):(M[wt]=qt,M[_e]=tt,wt=_e);else if(Ge<Dt&&0>r(Qe,tt))M[wt]=Qe,M[Ge]=tt,wt=Ge;else break t}}return Y}function r(M,Y){var tt=M.sortIndex-Y.sortIndex;return tt!==0?tt:M.id-Y.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var u=[],h=[],d=1,g=null,m=3,_=!1,N=!1,k=!1,V=!1,w=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function x(M){for(var Y=n(h);Y!==null;){if(Y.callback===null)i(h);else if(Y.startTime<=M)i(h),Y.sortIndex=Y.expirationTime,t(u,Y);else break;Y=n(h)}}function j(M){if(k=!1,x(M),!N)if(n(u)!==null)N=!0,H||(H=!0,C());else{var Y=n(h);Y!==null&&Q(j,Y.startTime-M)}}var H=!1,E=-1,y=5,A=-1;function b(){return V?!0:!(e.unstable_now()-A<y)}function I(){if(V=!1,H){var M=e.unstable_now();A=M;var Y=!0;try{t:{N=!1,k&&(k=!1,v(E),E=-1),_=!0;var tt=m;try{e:{for(x(M),g=n(u);g!==null&&!(g.expirationTime>M&&b());){var wt=g.callback;if(typeof wt=="function"){g.callback=null,m=g.priorityLevel;var Dt=wt(g.expirationTime<=M);if(M=e.unstable_now(),typeof Dt=="function"){g.callback=Dt,x(M),Y=!0;break e}g===n(u)&&i(u),x(M)}else i(u);g=n(u)}if(g!==null)Y=!0;else{var vi=n(h);vi!==null&&Q(j,vi.startTime-M),Y=!1}}break t}finally{g=null,m=tt,_=!1}Y=void 0}}finally{Y?C():H=!1}}}var C;if(typeof R=="function")C=function(){R(I)};else if(typeof MessageChannel<"u"){var S=new MessageChannel,Gt=S.port2;S.port1.onmessage=I,C=function(){Gt.postMessage(null)}}else C=function(){w(I,0)};function Q(M,Y){E=w(function(){M(e.unstable_now())},Y)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(M){M.callback=null},e.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<M?Math.floor(1e3/M):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_next=function(M){switch(m){case 1:case 2:case 3:var Y=3;break;default:Y=m}var tt=m;m=Y;try{return M()}finally{m=tt}},e.unstable_requestPaint=function(){V=!0},e.unstable_runWithPriority=function(M,Y){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var tt=m;m=M;try{return Y()}finally{m=tt}},e.unstable_scheduleCallback=function(M,Y,tt){var wt=e.unstable_now();switch(typeof tt=="object"&&tt!==null?(tt=tt.delay,tt=typeof tt=="number"&&0<tt?wt+tt:wt):tt=wt,M){case 1:var Dt=-1;break;case 2:Dt=250;break;case 5:Dt=1073741823;break;case 4:Dt=1e4;break;default:Dt=5e3}return Dt=tt+Dt,M={id:d++,callback:Y,priorityLevel:M,startTime:tt,expirationTime:Dt,sortIndex:-1},tt>wt?(M.sortIndex=tt,t(h,M),n(u)===null&&M===n(h)&&(k?(v(E),E=-1):k=!0,Q(j,tt-wt))):(M.sortIndex=Dt,t(u,M),N||_||(N=!0,H||(H=!0,C()))),M},e.unstable_shouldYield=b,e.unstable_wrapCallback=function(M){var Y=m;return function(){var tt=m;m=Y;try{return M.apply(this,arguments)}finally{m=tt}}}})(xv);Dv.exports=xv;var Db=Dv.exports,Nv={exports:{}},Le={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xb=F;function Ov(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function xi(){}var Ve={d:{f:xi,r:function(){throw Error(Ov(522))},D:xi,C:xi,L:xi,m:xi,X:xi,S:xi,M:xi},p:0,findDOMNode:null},Nb=Symbol.for("react.portal");function Ob(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Nb,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}}var uo=xb.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function jc(e,t){if(e==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}Le.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Ve;Le.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(Ov(299));return Ob(e,t,null,n)};Le.flushSync=function(e){var t=uo.T,n=Ve.p;try{if(uo.T=null,Ve.p=2,e)return e()}finally{uo.T=t,Ve.p=n,Ve.d.f()}};Le.preconnect=function(e,t){typeof e=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,Ve.d.C(e,t))};Le.prefetchDNS=function(e){typeof e=="string"&&Ve.d.D(e)};Le.preinit=function(e,t){if(typeof e=="string"&&t&&typeof t.as=="string"){var n=t.as,i=jc(n,t.crossOrigin),r=typeof t.integrity=="string"?t.integrity:void 0,s=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;n==="style"?Ve.d.S(e,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:i,integrity:r,fetchPriority:s}):n==="script"&&Ve.d.X(e,{crossOrigin:i,integrity:r,fetchPriority:s,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};Le.preinitModule=function(e,t){if(typeof e=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var n=jc(t.as,t.crossOrigin);Ve.d.M(e,{crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&Ve.d.M(e)};Le.preload=function(e,t){if(typeof e=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var n=t.as,i=jc(n,t.crossOrigin);Ve.d.L(e,n,{crossOrigin:i,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};Le.preloadModule=function(e,t){if(typeof e=="string")if(t){var n=jc(t.as,t.crossOrigin);Ve.d.m(e,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else Ve.d.m(e)};Le.requestFormReset=function(e){Ve.d.r(e)};Le.unstable_batchedUpdates=function(e,t){return e(t)};Le.useFormState=function(e,t,n){return uo.H.useFormState(e,t,n)};Le.useFormStatus=function(){return uo.H.useHostTransitionStatus()};Le.version="19.1.0";function kv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(kv)}catch(e){console.error(e)}}kv(),Nv.exports=Le;var kb=Nv.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var he=Db,Mv=F,Mb=kb;function L(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Vv(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Jo(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Pv(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Ep(e){if(Jo(e)!==e)throw Error(L(188))}function Vb(e){var t=e.alternate;if(!t){if(t=Jo(e),t===null)throw Error(L(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return Ep(r),e;if(s===i)return Ep(r),t;s=s.sibling}throw Error(L(188))}if(n.return!==i.return)n=r,i=s;else{for(var a=!1,l=r.child;l;){if(l===n){a=!0,n=r,i=s;break}if(l===i){a=!0,i=r,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,i=r;break}if(l===i){a=!0,i=s,n=r;break}l=l.sibling}if(!a)throw Error(L(189))}}if(n.alternate!==i)throw Error(L(190))}if(n.tag!==3)throw Error(L(188));return n.stateNode.current===n?e:t}function Lv(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=Lv(e),t!==null)return t;e=e.sibling}return null}var Ut=Object.assign,Pb=Symbol.for("react.element"),$l=Symbol.for("react.transitional.element"),eo=Symbol.for("react.portal"),Ss=Symbol.for("react.fragment"),Uv=Symbol.for("react.strict_mode"),Sf=Symbol.for("react.profiler"),Lb=Symbol.for("react.provider"),jv=Symbol.for("react.consumer"),$n=Symbol.for("react.context"),Wd=Symbol.for("react.forward_ref"),wf=Symbol.for("react.suspense"),Rf=Symbol.for("react.suspense_list"),Jd=Symbol.for("react.memo"),Mi=Symbol.for("react.lazy"),If=Symbol.for("react.activity"),Ub=Symbol.for("react.memo_cache_sentinel"),Ap=Symbol.iterator;function Ya(e){return e===null||typeof e!="object"?null:(e=Ap&&e[Ap]||e["@@iterator"],typeof e=="function"?e:null)}var jb=Symbol.for("react.client.reference");function Cf(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===jb?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ss:return"Fragment";case Sf:return"Profiler";case Uv:return"StrictMode";case wf:return"Suspense";case Rf:return"SuspenseList";case If:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case eo:return"Portal";case $n:return(e.displayName||"Context")+".Provider";case jv:return(e._context.displayName||"Context")+".Consumer";case Wd:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Jd:return t=e.displayName||null,t!==null?t:Cf(e.type)||"Memo";case Mi:t=e._payload,e=e._init;try{return Cf(e(t))}catch{}}return null}var no=Array.isArray,et=Mv.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,vt=Mb.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Pr={pending:!1,data:null,method:null,action:null},Df=[],ws=-1;function jn(e){return{current:e}}function ye(e){0>ws||(e.current=Df[ws],Df[ws]=null,ws--)}function Bt(e,t){ws++,Df[ws]=e.current,e.current=t}var xn=jn(null),No=jn(null),Xi=jn(null),Bu=jn(null);function qu(e,t){switch(Bt(Xi,t),Bt(No,e),Bt(xn,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Iy(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Iy(t),e=nE(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}ye(xn),Bt(xn,e)}function Xs(){ye(xn),ye(No),ye(Xi)}function xf(e){e.memoizedState!==null&&Bt(Bu,e);var t=xn.current,n=nE(t,e.type);t!==n&&(Bt(No,e),Bt(xn,n))}function Hu(e){No.current===e&&(ye(xn),ye(No)),Bu.current===e&&(ye(Bu),Bo._currentValue=Pr)}var Nf=Object.prototype.hasOwnProperty,tm=he.unstable_scheduleCallback,Nh=he.unstable_cancelCallback,zb=he.unstable_shouldYield,Bb=he.unstable_requestPaint,Nn=he.unstable_now,qb=he.unstable_getCurrentPriorityLevel,zv=he.unstable_ImmediatePriority,Bv=he.unstable_UserBlockingPriority,Fu=he.unstable_NormalPriority,Hb=he.unstable_LowPriority,qv=he.unstable_IdlePriority,Fb=he.log,Gb=he.unstable_setDisableYieldValue,tl=null,Je=null;function Fi(e){if(typeof Fb=="function"&&Gb(e),Je&&typeof Je.setStrictMode=="function")try{Je.setStrictMode(tl,e)}catch{}}var tn=Math.clz32?Math.clz32:Kb,Qb=Math.log,Yb=Math.LN2;function Kb(e){return e>>>=0,e===0?32:31-(Qb(e)/Yb|0)|0}var Zl=256,Wl=4194304;function Nr(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function zc(e,t,n){var i=e.pendingLanes;if(i===0)return 0;var r=0,s=e.suspendedLanes,a=e.pingedLanes;e=e.warmLanes;var l=i&134217727;return l!==0?(i=l&~s,i!==0?r=Nr(i):(a&=l,a!==0?r=Nr(a):n||(n=l&~e,n!==0&&(r=Nr(n))))):(l=i&~s,l!==0?r=Nr(l):a!==0?r=Nr(a):n||(n=i&~e,n!==0&&(r=Nr(n)))),r===0?0:t!==0&&t!==r&&!(t&s)&&(s=r&-r,n=t&-t,s>=n||s===32&&(n&4194048)!==0)?t:r}function el(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Xb(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Hv(){var e=Zl;return Zl<<=1,!(Zl&4194048)&&(Zl=256),e}function Fv(){var e=Wl;return Wl<<=1,!(Wl&62914560)&&(Wl=4194304),e}function Oh(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function nl(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function $b(e,t,n,i,r,s){var a=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var l=e.entanglements,u=e.expirationTimes,h=e.hiddenUpdates;for(n=a&~n;0<n;){var d=31-tn(n),g=1<<d;l[d]=0,u[d]=-1;var m=h[d];if(m!==null)for(h[d]=null,d=0;d<m.length;d++){var _=m[d];_!==null&&(_.lane&=-536870913)}n&=~g}i!==0&&Gv(e,i,0),s!==0&&r===0&&e.tag!==0&&(e.suspendedLanes|=s&~(a&~t))}function Gv(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-tn(t);e.entangledLanes|=t,e.entanglements[i]=e.entanglements[i]|1073741824|n&4194090}function Qv(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-tn(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}function em(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function nm(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function Yv(){var e=vt.p;return e!==0?e:(e=window.event,e===void 0?32:fE(e.type))}function Zb(e,t){var n=vt.p;try{return vt.p=e,t()}finally{vt.p=n}}var _r=Math.random().toString(36).slice(2),Ne="__reactFiber$"+_r,qe="__reactProps$"+_r,pa="__reactContainer$"+_r,Of="__reactEvents$"+_r,Wb="__reactListeners$"+_r,Jb="__reactHandles$"+_r,bp="__reactResources$"+_r,il="__reactMarker$"+_r;function im(e){delete e[Ne],delete e[qe],delete e[Of],delete e[Wb],delete e[Jb]}function Rs(e){var t=e[Ne];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pa]||n[Ne]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=xy(e);e!==null;){if(n=e[Ne])return n;e=xy(e)}return t}e=n,n=e.parentNode}return null}function ya(e){if(e=e[Ne]||e[pa]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function io(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(L(33))}function Ls(e){var t=e[bp];return t||(t=e[bp]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function ge(e){e[il]=!0}var Kv=new Set,Xv={};function Wr(e,t){$s(e,t),$s(e+"Capture",t)}function $s(e,t){for(Xv[e]=t,e=0;e<t.length;e++)Kv.add(t[e])}var tS=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Sp={},wp={};function eS(e){return Nf.call(wp,e)?!0:Nf.call(Sp,e)?!1:tS.test(e)?wp[e]=!0:(Sp[e]=!0,!1)}function _u(e,t,n){if(eS(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var i=t.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function Jl(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function Fn(e,t,n,i){if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+i)}}var kh,Rp;function ys(e){if(kh===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);kh=t&&t[1]||"",Rp=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+kh+e+Rp}var Mh=!1;function Vh(e,t){if(!e||Mh)return"";Mh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var g=function(){throw Error()};if(Object.defineProperty(g.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(g,[])}catch(_){var m=_}Reflect.construct(e,[],g)}else{try{g.call()}catch(_){m=_}e.call(g.prototype)}}else{try{throw Error()}catch(_){m=_}(g=e())&&typeof g.catch=="function"&&g.catch(function(){})}}catch(_){if(_&&m&&typeof _.stack=="string")return[_.stack,m.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=i.DetermineComponentFrameRoot(),a=s[0],l=s[1];if(a&&l){var u=a.split(`
`),h=l.split(`
`);for(r=i=0;i<u.length&&!u[i].includes("DetermineComponentFrameRoot");)i++;for(;r<h.length&&!h[r].includes("DetermineComponentFrameRoot");)r++;if(i===u.length||r===h.length)for(i=u.length-1,r=h.length-1;1<=i&&0<=r&&u[i]!==h[r];)r--;for(;1<=i&&0<=r;i--,r--)if(u[i]!==h[r]){if(i!==1||r!==1)do if(i--,r--,0>r||u[i]!==h[r]){var d=`
`+u[i].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=i&&0<=r);break}}}finally{Mh=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?ys(n):""}function nS(e){switch(e.tag){case 26:case 27:case 5:return ys(e.type);case 16:return ys("Lazy");case 13:return ys("Suspense");case 19:return ys("SuspenseList");case 0:case 15:return Vh(e.type,!1);case 11:return Vh(e.type.render,!1);case 1:return Vh(e.type,!0);case 31:return ys("Activity");default:return""}}function Ip(e){try{var t="";do t+=nS(e),e=e.return;while(e);return t}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function on(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function $v(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function iS(e){var t=$v(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(a){i=""+a,s.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Gu(e){e._valueTracker||(e._valueTracker=iS(e))}function Zv(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=$v(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function Qu(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var rS=/[\n"\\]/g;function cn(e){return e.replace(rS,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function kf(e,t,n,i,r,s,a,l){e.name="",a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"?e.type=a:e.removeAttribute("type"),t!=null?a==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+on(t)):e.value!==""+on(t)&&(e.value=""+on(t)):a!=="submit"&&a!=="reset"||e.removeAttribute("value"),t!=null?Mf(e,a,on(t)):n!=null?Mf(e,a,on(n)):i!=null&&e.removeAttribute("value"),r==null&&s!=null&&(e.defaultChecked=!!s),r!=null&&(e.checked=r&&typeof r!="function"&&typeof r!="symbol"),l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"?e.name=""+on(l):e.removeAttribute("name")}function Wv(e,t,n,i,r,s,a,l){if(s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(e.type=s),t!=null||n!=null){if(!(s!=="submit"&&s!=="reset"||t!=null))return;n=n!=null?""+on(n):"",t=t!=null?""+on(t):n,l||t===e.value||(e.value=t),e.defaultValue=t}i=i??r,i=typeof i!="function"&&typeof i!="symbol"&&!!i,e.checked=l?e.checked:!!i,e.defaultChecked=!!i,a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(e.name=a)}function Mf(e,t,n){t==="number"&&Qu(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function Us(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+on(n),t=null,r=0;r<e.length;r++){if(e[r].value===n){e[r].selected=!0,i&&(e[r].defaultSelected=!0);return}t!==null||e[r].disabled||(t=e[r])}t!==null&&(t.selected=!0)}}function Jv(e,t,n){if(t!=null&&(t=""+on(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+on(n):""}function t0(e,t,n,i){if(t==null){if(i!=null){if(n!=null)throw Error(L(92));if(no(i)){if(1<i.length)throw Error(L(93));i=i[0]}n=i}n==null&&(n=""),t=n}n=on(t),e.defaultValue=n,i=e.textContent,i===n&&i!==""&&i!==null&&(e.value=i)}function Zs(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var sS=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Cp(e,t,n){var i=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":i?e.setProperty(t,n):typeof n!="number"||n===0||sS.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function e0(e,t,n){if(t!=null&&typeof t!="object")throw Error(L(62));if(e=e.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||t!=null&&t.hasOwnProperty(i)||(i.indexOf("--")===0?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="");for(var r in t)i=t[r],t.hasOwnProperty(r)&&n[r]!==i&&Cp(e,r,i)}else for(var s in t)t.hasOwnProperty(s)&&Cp(e,s,t[s])}function rm(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var aS=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),oS=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function vu(e){return oS.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Vf=null;function sm(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Is=null,js=null;function Dp(e){var t=ya(e);if(t&&(e=t.stateNode)){var n=e[qe]||null;t:switch(e=t.stateNode,t.type){case"input":if(kf(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+cn(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=i[qe]||null;if(!r)throw Error(L(90));kf(i,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(t=0;t<n.length;t++)i=n[t],i.form===e.form&&Zv(i)}break t;case"textarea":Jv(e,n.value,n.defaultValue);break t;case"select":t=n.value,t!=null&&Us(e,!!n.multiple,t,!1)}}}var Ph=!1;function n0(e,t,n){if(Ph)return e(t,n);Ph=!0;try{var i=e(t);return i}finally{if(Ph=!1,(Is!==null||js!==null)&&($c(),Is&&(t=Is,e=js,js=Is=null,Dp(t),e)))for(t=0;t<e.length;t++)Dp(e[t])}}function Oo(e,t){var n=e.stateNode;if(n===null)return null;var i=n[qe]||null;if(i===null)return null;n=i[t];t:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break t;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(L(231,t,typeof n));return n}var oi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pf=!1;if(oi)try{var Ka={};Object.defineProperty(Ka,"passive",{get:function(){Pf=!0}}),window.addEventListener("test",Ka,Ka),window.removeEventListener("test",Ka,Ka)}catch{Pf=!1}var Gi=null,am=null,Tu=null;function i0(){if(Tu)return Tu;var e,t=am,n=t.length,i,r="value"in Gi?Gi.value:Gi.textContent,s=r.length;for(e=0;e<n&&t[e]===r[e];e++);var a=n-e;for(i=1;i<=a&&t[n-i]===r[s-i];i++);return Tu=r.slice(e,1<i?1-i:void 0)}function Eu(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function tu(){return!0}function xp(){return!1}function Fe(e){function t(n,i,r,s,a){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?tu:xp,this.isPropagationStopped=xp,this}return Ut(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=tu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=tu)},persist:function(){},isPersistent:tu}),t}var Jr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bc=Fe(Jr),rl=Ut({},Jr,{view:0,detail:0}),lS=Fe(rl),Lh,Uh,Xa,qc=Ut({},rl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:om,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Xa&&(Xa&&e.type==="mousemove"?(Lh=e.screenX-Xa.screenX,Uh=e.screenY-Xa.screenY):Uh=Lh=0,Xa=e),Lh)},movementY:function(e){return"movementY"in e?e.movementY:Uh}}),Np=Fe(qc),uS=Ut({},qc,{dataTransfer:0}),cS=Fe(uS),hS=Ut({},rl,{relatedTarget:0}),jh=Fe(hS),fS=Ut({},Jr,{animationName:0,elapsedTime:0,pseudoElement:0}),dS=Fe(fS),mS=Ut({},Jr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),gS=Fe(mS),pS=Ut({},Jr,{data:0}),Op=Fe(pS),yS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_S={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function TS(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=vS[e])?!!t[e]:!1}function om(){return TS}var ES=Ut({},rl,{key:function(e){if(e.key){var t=yS[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Eu(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?_S[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:om,charCode:function(e){return e.type==="keypress"?Eu(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Eu(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),AS=Fe(ES),bS=Ut({},qc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),kp=Fe(bS),SS=Ut({},rl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:om}),wS=Fe(SS),RS=Ut({},Jr,{propertyName:0,elapsedTime:0,pseudoElement:0}),IS=Fe(RS),CS=Ut({},qc,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),DS=Fe(CS),xS=Ut({},Jr,{newState:0,oldState:0}),NS=Fe(xS),OS=[9,13,27,32],lm=oi&&"CompositionEvent"in window,co=null;oi&&"documentMode"in document&&(co=document.documentMode);var kS=oi&&"TextEvent"in window&&!co,r0=oi&&(!lm||co&&8<co&&11>=co),Mp=" ",Vp=!1;function s0(e,t){switch(e){case"keyup":return OS.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function a0(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Cs=!1;function MS(e,t){switch(e){case"compositionend":return a0(t);case"keypress":return t.which!==32?null:(Vp=!0,Mp);case"textInput":return e=t.data,e===Mp&&Vp?null:e;default:return null}}function VS(e,t){if(Cs)return e==="compositionend"||!lm&&s0(e,t)?(e=i0(),Tu=am=Gi=null,Cs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return r0&&t.locale!=="ko"?null:t.data;default:return null}}var PS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pp(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!PS[e.type]:t==="textarea"}function o0(e,t,n,i){Is?js?js.push(i):js=[i]:Is=i,t=cc(t,"onChange"),0<t.length&&(n=new Bc("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var ho=null,ko=null;function LS(e){JT(e,0)}function Hc(e){var t=io(e);if(Zv(t))return e}function Lp(e,t){if(e==="change")return t}var l0=!1;if(oi){var zh;if(oi){var Bh="oninput"in document;if(!Bh){var Up=document.createElement("div");Up.setAttribute("oninput","return;"),Bh=typeof Up.oninput=="function"}zh=Bh}else zh=!1;l0=zh&&(!document.documentMode||9<document.documentMode)}function jp(){ho&&(ho.detachEvent("onpropertychange",u0),ko=ho=null)}function u0(e){if(e.propertyName==="value"&&Hc(ko)){var t=[];o0(t,ko,e,sm(e)),n0(LS,t)}}function US(e,t,n){e==="focusin"?(jp(),ho=t,ko=n,ho.attachEvent("onpropertychange",u0)):e==="focusout"&&jp()}function jS(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Hc(ko)}function zS(e,t){if(e==="click")return Hc(t)}function BS(e,t){if(e==="input"||e==="change")return Hc(t)}function qS(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var rn=typeof Object.is=="function"?Object.is:qS;function Mo(e,t){if(rn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!Nf.call(t,r)||!rn(e[r],t[r]))return!1}return!0}function zp(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Bp(e,t){var n=zp(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}t:{for(;n;){if(n.nextSibling){n=n.nextSibling;break t}n=n.parentNode}n=void 0}n=zp(n)}}function c0(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?c0(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function h0(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Qu(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Qu(e.document)}return t}function um(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var HS=oi&&"documentMode"in document&&11>=document.documentMode,Ds=null,Lf=null,fo=null,Uf=!1;function qp(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Uf||Ds==null||Ds!==Qu(i)||(i=Ds,"selectionStart"in i&&um(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),fo&&Mo(fo,i)||(fo=i,i=cc(Lf,"onSelect"),0<i.length&&(t=new Bc("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=Ds)))}function xr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xs={animationend:xr("Animation","AnimationEnd"),animationiteration:xr("Animation","AnimationIteration"),animationstart:xr("Animation","AnimationStart"),transitionrun:xr("Transition","TransitionRun"),transitionstart:xr("Transition","TransitionStart"),transitioncancel:xr("Transition","TransitionCancel"),transitionend:xr("Transition","TransitionEnd")},qh={},f0={};oi&&(f0=document.createElement("div").style,"AnimationEvent"in window||(delete xs.animationend.animation,delete xs.animationiteration.animation,delete xs.animationstart.animation),"TransitionEvent"in window||delete xs.transitionend.transition);function ts(e){if(qh[e])return qh[e];if(!xs[e])return e;var t=xs[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in f0)return qh[e]=t[n];return e}var d0=ts("animationend"),m0=ts("animationiteration"),g0=ts("animationstart"),FS=ts("transitionrun"),GS=ts("transitionstart"),QS=ts("transitioncancel"),p0=ts("transitionend"),y0=new Map,jf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");jf.push("scrollEnd");function bn(e,t){y0.set(e,t),Wr(t,[e])}var Hp=new WeakMap;function hn(e,t){if(typeof e=="object"&&e!==null){var n=Hp.get(e);return n!==void 0?n:(t={value:e,source:t,stack:Ip(t)},Hp.set(e,t),t)}return{value:e,source:t,stack:Ip(t)}}var an=[],Ns=0,cm=0;function Fc(){for(var e=Ns,t=cm=Ns=0;t<e;){var n=an[t];an[t++]=null;var i=an[t];an[t++]=null;var r=an[t];an[t++]=null;var s=an[t];if(an[t++]=null,i!==null&&r!==null){var a=i.pending;a===null?r.next=r:(r.next=a.next,a.next=r),i.pending=r}s!==0&&_0(n,r,s)}}function Gc(e,t,n,i){an[Ns++]=e,an[Ns++]=t,an[Ns++]=n,an[Ns++]=i,cm|=i,e.lanes|=i,e=e.alternate,e!==null&&(e.lanes|=i)}function hm(e,t,n,i){return Gc(e,t,n,i),Yu(e)}function _a(e,t){return Gc(e,null,null,t),Yu(e)}function _0(e,t,n){e.lanes|=n;var i=e.alternate;i!==null&&(i.lanes|=n);for(var r=!1,s=e.return;s!==null;)s.childLanes|=n,i=s.alternate,i!==null&&(i.childLanes|=n),s.tag===22&&(e=s.stateNode,e===null||e._visibility&1||(r=!0)),e=s,s=s.return;return e.tag===3?(s=e.stateNode,r&&t!==null&&(r=31-tn(n),e=s.hiddenUpdates,i=e[r],i===null?e[r]=[t]:i.push(t),t.lane=n|536870912),s):null}function Yu(e){if(50<bo)throw bo=0,ad=null,Error(L(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Os={};function YS(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function We(e,t,n,i){return new YS(e,t,n,i)}function fm(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ii(e,t){var n=e.alternate;return n===null?(n=We(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function v0(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Au(e,t,n,i,r,s){var a=0;if(i=e,typeof e=="function")fm(e)&&(a=1);else if(typeof e=="string")a=X2(e,n,xn.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case If:return e=We(31,n,t,r),e.elementType=If,e.lanes=s,e;case Ss:return Lr(n.children,r,s,t);case Uv:a=8,r|=24;break;case Sf:return e=We(12,n,t,r|2),e.elementType=Sf,e.lanes=s,e;case wf:return e=We(13,n,t,r),e.elementType=wf,e.lanes=s,e;case Rf:return e=We(19,n,t,r),e.elementType=Rf,e.lanes=s,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Lb:case $n:a=10;break t;case jv:a=9;break t;case Wd:a=11;break t;case Jd:a=14;break t;case Mi:a=16,i=null;break t}a=29,n=Error(L(130,e===null?"null":typeof e,"")),i=null}return t=We(a,n,t,r),t.elementType=e,t.type=i,t.lanes=s,t}function Lr(e,t,n,i){return e=We(7,e,i,t),e.lanes=n,e}function Hh(e,t,n){return e=We(6,e,null,t),e.lanes=n,e}function Fh(e,t,n){return t=We(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var ks=[],Ms=0,Ku=null,Xu=0,ln=[],un=0,Ur=null,Zn=1,Wn="";function Or(e,t){ks[Ms++]=Xu,ks[Ms++]=Ku,Ku=e,Xu=t}function T0(e,t,n){ln[un++]=Zn,ln[un++]=Wn,ln[un++]=Ur,Ur=e;var i=Zn;e=Wn;var r=32-tn(i)-1;i&=~(1<<r),n+=1;var s=32-tn(t)+r;if(30<s){var a=r-r%5;s=(i&(1<<a)-1).toString(32),i>>=a,r-=a,Zn=1<<32-tn(t)+r|n<<r|i,Wn=s+e}else Zn=1<<s|n<<r|i,Wn=e}function dm(e){e.return!==null&&(Or(e,1),T0(e,1,0))}function mm(e){for(;e===Ku;)Ku=ks[--Ms],ks[Ms]=null,Xu=ks[--Ms],ks[Ms]=null;for(;e===Ur;)Ur=ln[--un],ln[un]=null,Wn=ln[--un],ln[un]=null,Zn=ln[--un],ln[un]=null}var Me=null,Xt=null,_t=!1,jr=null,Cn=!1,zf=Error(L(519));function Hr(e){var t=Error(L(418,""));throw Vo(hn(t,e)),zf}function Fp(e){var t=e.stateNode,n=e.type,i=e.memoizedProps;switch(t[Ne]=e,t[qe]=i,n){case"dialog":ut("cancel",t),ut("close",t);break;case"iframe":case"object":case"embed":ut("load",t);break;case"video":case"audio":for(n=0;n<Uo.length;n++)ut(Uo[n],t);break;case"source":ut("error",t);break;case"img":case"image":case"link":ut("error",t),ut("load",t);break;case"details":ut("toggle",t);break;case"input":ut("invalid",t),Wv(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0),Gu(t);break;case"select":ut("invalid",t);break;case"textarea":ut("invalid",t),t0(t,i.value,i.defaultValue,i.children),Gu(t)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||i.suppressHydrationWarning===!0||eE(t.textContent,n)?(i.popover!=null&&(ut("beforetoggle",t),ut("toggle",t)),i.onScroll!=null&&ut("scroll",t),i.onScrollEnd!=null&&ut("scrollend",t),i.onClick!=null&&(t.onclick=Jc),t=!0):t=!1,t||Hr(e)}function Gp(e){for(Me=e.return;Me;)switch(Me.tag){case 5:case 13:Cn=!1;return;case 27:case 3:Cn=!0;return;default:Me=Me.return}}function $a(e){if(e!==Me)return!1;if(!_t)return Gp(e),_t=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||fd(e.type,e.memoizedProps)),n=!n),n&&Xt&&Hr(e),Gp(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(L(317));t:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(n=e.data,n==="/$"){if(t===0){Xt=En(e.nextSibling);break t}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++;e=e.nextSibling}Xt=null}}else t===27?(t=Xt,vr(e.type)?(e=gd,gd=null,Xt=e):Xt=t):Xt=Me?En(e.stateNode.nextSibling):null;return!0}function sl(){Xt=Me=null,_t=!1}function Qp(){var e=jr;return e!==null&&(ze===null?ze=e:ze.push.apply(ze,e),jr=null),e}function Vo(e){jr===null?jr=[e]:jr.push(e)}var Bf=jn(null),es=null,Jn=null;function Pi(e,t,n){Bt(Bf,t._currentValue),t._currentValue=n}function ri(e){e._currentValue=Bf.current,ye(Bf)}function qf(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function Hf(e,t,n,i){var r=e.child;for(r!==null&&(r.return=e);r!==null;){var s=r.dependencies;if(s!==null){var a=r.child;s=s.firstContext;t:for(;s!==null;){var l=s;s=r;for(var u=0;u<t.length;u++)if(l.context===t[u]){s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),qf(s.return,n,e),i||(a=null);break t}s=l.next}}else if(r.tag===18){if(a=r.return,a===null)throw Error(L(341));a.lanes|=n,s=a.alternate,s!==null&&(s.lanes|=n),qf(a,n,e),a=null}else a=r.child;if(a!==null)a.return=r;else for(a=r;a!==null;){if(a===e){a=null;break}if(r=a.sibling,r!==null){r.return=a.return,a=r;break}a=a.return}r=a}}function al(e,t,n,i){e=null;for(var r=t,s=!1;r!==null;){if(!s){if(r.flags&524288)s=!0;else if(r.flags&262144)break}if(r.tag===10){var a=r.alternate;if(a===null)throw Error(L(387));if(a=a.memoizedProps,a!==null){var l=r.type;rn(r.pendingProps.value,a.value)||(e!==null?e.push(l):e=[l])}}else if(r===Bu.current){if(a=r.alternate,a===null)throw Error(L(387));a.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(e!==null?e.push(Bo):e=[Bo])}r=r.return}e!==null&&Hf(t,e,n,i),t.flags|=262144}function $u(e){for(e=e.firstContext;e!==null;){if(!rn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Fr(e){es=e,Jn=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Oe(e){return E0(es,e)}function eu(e,t){return es===null&&Fr(e),E0(e,t)}function E0(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},Jn===null){if(e===null)throw Error(L(308));Jn=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Jn=Jn.next=t;return n}var KS=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,i){e.push(i)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},XS=he.unstable_scheduleCallback,$S=he.unstable_NormalPriority,oe={$$typeof:$n,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function gm(){return{controller:new KS,data:new Map,refCount:0}}function ol(e){e.refCount--,e.refCount===0&&XS($S,function(){e.controller.abort()})}var mo=null,Ff=0,Ws=0,zs=null;function ZS(e,t){if(mo===null){var n=mo=[];Ff=0,Ws=Um(),zs={status:"pending",value:void 0,then:function(i){n.push(i)}}}return Ff++,t.then(Yp,Yp),t}function Yp(){if(--Ff===0&&mo!==null){zs!==null&&(zs.status="fulfilled");var e=mo;mo=null,Ws=0,zs=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function WS(e,t){var n=[],i={status:"pending",value:null,reason:null,then:function(r){n.push(r)}};return e.then(function(){i.status="fulfilled",i.value=t;for(var r=0;r<n.length;r++)(0,n[r])(t)},function(r){for(i.status="rejected",i.reason=r,r=0;r<n.length;r++)(0,n[r])(void 0)}),i}var Kp=et.S;et.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&ZS(e,t),Kp!==null&&Kp(e,t)};var zr=jn(null);function pm(){var e=zr.current;return e!==null?e:Vt.pooledCache}function bu(e,t){t===null?Bt(zr,zr.current):Bt(zr,t.pool)}function A0(){var e=pm();return e===null?null:{parent:oe._currentValue,pool:e}}var ll=Error(L(460)),b0=Error(L(474)),Qc=Error(L(542)),Gf={then:function(){}};function Xp(e){return e=e.status,e==="fulfilled"||e==="rejected"}function nu(){}function S0(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(nu,nu),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Zp(e),e;default:if(typeof t.status=="string")t.then(nu,nu);else{if(e=Vt,e!==null&&100<e.shellSuspendCounter)throw Error(L(482));e=t,e.status="pending",e.then(function(i){if(t.status==="pending"){var r=t;r.status="fulfilled",r.value=i}},function(i){if(t.status==="pending"){var r=t;r.status="rejected",r.reason=i}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Zp(e),e}throw go=t,ll}}var go=null;function $p(){if(go===null)throw Error(L(459));var e=go;return go=null,e}function Zp(e){if(e===ll||e===Qc)throw Error(L(483))}var Vi=!1;function ym(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Qf(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function $i(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Zi(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,St&2){var r=i.pending;return r===null?t.next=t:(t.next=r.next,r.next=t),i.pending=t,t=Yu(e),_0(e,null,n),t}return Gc(e,i,t,n),Yu(e)}function po(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,Qv(e,n)}}function Gh(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};s===null?r=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?r=s=t:s=s.next=t}else r=s=t;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,callbacks:i.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Yf=!1;function yo(){if(Yf){var e=zs;if(e!==null)throw e}}function _o(e,t,n,i){Yf=!1;var r=e.updateQueue;Vi=!1;var s=r.firstBaseUpdate,a=r.lastBaseUpdate,l=r.shared.pending;if(l!==null){r.shared.pending=null;var u=l,h=u.next;u.next=null,a===null?s=h:a.next=h,a=u;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==a&&(l===null?d.firstBaseUpdate=h:l.next=h,d.lastBaseUpdate=u))}if(s!==null){var g=r.baseState;a=0,d=h=u=null,l=s;do{var m=l.lane&-536870913,_=m!==l.lane;if(_?(gt&m)===m:(i&m)===m){m!==0&&m===Ws&&(Yf=!0),d!==null&&(d=d.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});t:{var N=e,k=l;m=t;var V=n;switch(k.tag){case 1:if(N=k.payload,typeof N=="function"){g=N.call(V,g,m);break t}g=N;break t;case 3:N.flags=N.flags&-65537|128;case 0:if(N=k.payload,m=typeof N=="function"?N.call(V,g,m):N,m==null)break t;g=Ut({},g,m);break t;case 2:Vi=!0}}m=l.callback,m!==null&&(e.flags|=64,_&&(e.flags|=8192),_=r.callbacks,_===null?r.callbacks=[m]:_.push(m))}else _={lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(h=d=_,u=g):d=d.next=_,a|=m;if(l=l.next,l===null){if(l=r.shared.pending,l===null)break;_=l,l=_.next,_.next=null,r.lastBaseUpdate=_,r.shared.pending=null}}while(!0);d===null&&(u=g),r.baseState=u,r.firstBaseUpdate=h,r.lastBaseUpdate=d,s===null&&(r.shared.lanes=0),hr|=a,e.lanes=a,e.memoizedState=g}}function w0(e,t){if(typeof e!="function")throw Error(L(191,e));e.call(t)}function R0(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)w0(n[e],t)}var Js=jn(null),Zu=jn(0);function Wp(e,t){e=ci,Bt(Zu,e),Bt(Js,t),ci=e|t.baseLanes}function Kf(){Bt(Zu,ci),Bt(Js,Js.current)}function _m(){ci=Zu.current,ye(Js),ye(Zu)}var ur=0,ot=null,Ct=null,ie=null,Wu=!1,Bs=!1,Gr=!1,Ju=0,Po=0,qs=null,JS=0;function Jt(){throw Error(L(321))}function vm(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!rn(e[n],t[n]))return!1;return!0}function Tm(e,t,n,i,r,s){return ur=s,ot=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,et.H=e===null||e.memoizedState===null?iT:rT,Gr=!1,s=n(i,r),Gr=!1,Bs&&(s=C0(t,n,i,r)),I0(e),s}function I0(e){et.H=tc;var t=Ct!==null&&Ct.next!==null;if(ur=0,ie=Ct=ot=null,Wu=!1,Po=0,qs=null,t)throw Error(L(300));e===null||pe||(e=e.dependencies,e!==null&&$u(e)&&(pe=!0))}function C0(e,t,n,i){ot=e;var r=0;do{if(Bs&&(qs=null),Po=0,Bs=!1,25<=r)throw Error(L(301));if(r+=1,ie=Ct=null,e.updateQueue!=null){var s=e.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,s.memoCache!=null&&(s.memoCache.index=0)}et.H=a2,s=t(n,i)}while(Bs);return s}function t2(){var e=et.H,t=e.useState()[0];return t=typeof t.then=="function"?ul(t):t,e=e.useState()[0],(Ct!==null?Ct.memoizedState:null)!==e&&(ot.flags|=1024),t}function Em(){var e=Ju!==0;return Ju=0,e}function Am(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function bm(e){if(Wu){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Wu=!1}ur=0,ie=Ct=ot=null,Bs=!1,Po=Ju=0,qs=null}function Ue(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ie===null?ot.memoizedState=ie=e:ie=ie.next=e,ie}function se(){if(Ct===null){var e=ot.alternate;e=e!==null?e.memoizedState:null}else e=Ct.next;var t=ie===null?ot.memoizedState:ie.next;if(t!==null)ie=t,Ct=e;else{if(e===null)throw ot.alternate===null?Error(L(467)):Error(L(310));Ct=e,e={memoizedState:Ct.memoizedState,baseState:Ct.baseState,baseQueue:Ct.baseQueue,queue:Ct.queue,next:null},ie===null?ot.memoizedState=ie=e:ie=ie.next=e}return ie}function Sm(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ul(e){var t=Po;return Po+=1,qs===null&&(qs=[]),e=S0(qs,e,t),t=ot,(ie===null?t.memoizedState:ie.next)===null&&(t=t.alternate,et.H=t===null||t.memoizedState===null?iT:rT),e}function Yc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return ul(e);if(e.$$typeof===$n)return Oe(e)}throw Error(L(438,String(e)))}function wm(e){var t=null,n=ot.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var i=ot.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(t={data:i.data.map(function(r){return r.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=Sm(),ot.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),i=0;i<e;i++)n[i]=Ub;return t.index++,n}function li(e,t){return typeof t=="function"?t(e):t}function Su(e){var t=se();return Rm(t,Ct,e)}function Rm(e,t,n){var i=e.queue;if(i===null)throw Error(L(311));i.lastRenderedReducer=n;var r=e.baseQueue,s=i.pending;if(s!==null){if(r!==null){var a=r.next;r.next=s.next,s.next=a}t.baseQueue=r=s,i.pending=null}if(s=e.baseState,r===null)e.memoizedState=s;else{t=r.next;var l=a=null,u=null,h=t,d=!1;do{var g=h.lane&-536870913;if(g!==h.lane?(gt&g)===g:(ur&g)===g){var m=h.revertLane;if(m===0)u!==null&&(u=u.next={lane:0,revertLane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),g===Ws&&(d=!0);else if((ur&m)===m){h=h.next,m===Ws&&(d=!0);continue}else g={lane:0,revertLane:h.revertLane,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null},u===null?(l=u=g,a=s):u=u.next=g,ot.lanes|=m,hr|=m;g=h.action,Gr&&n(s,g),s=h.hasEagerState?h.eagerState:n(s,g)}else m={lane:g,revertLane:h.revertLane,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null},u===null?(l=u=m,a=s):u=u.next=m,ot.lanes|=g,hr|=g;h=h.next}while(h!==null&&h!==t);if(u===null?a=s:u.next=l,!rn(s,e.memoizedState)&&(pe=!0,d&&(n=zs,n!==null)))throw n;e.memoizedState=s,e.baseState=a,e.baseQueue=u,i.lastRenderedState=s}return r===null&&(i.lanes=0),[e.memoizedState,i.dispatch]}function Qh(e){var t=se(),n=t.queue;if(n===null)throw Error(L(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,s=t.memoizedState;if(r!==null){n.pending=null;var a=r=r.next;do s=e(s,a.action),a=a.next;while(a!==r);rn(s,t.memoizedState)||(pe=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,i]}function D0(e,t,n){var i=ot,r=se(),s=_t;if(s){if(n===void 0)throw Error(L(407));n=n()}else n=t();var a=!rn((Ct||r).memoizedState,n);a&&(r.memoizedState=n,pe=!0),r=r.queue;var l=O0.bind(null,i,r,e);if(cl(2048,8,l,[e]),r.getSnapshot!==t||a||ie!==null&&ie.memoizedState.tag&1){if(i.flags|=2048,ta(9,Kc(),N0.bind(null,i,r,n,t),null),Vt===null)throw Error(L(349));s||ur&124||x0(i,t,n)}return n}function x0(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=ot.updateQueue,t===null?(t=Sm(),ot.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function N0(e,t,n,i){t.value=n,t.getSnapshot=i,k0(t)&&M0(e)}function O0(e,t,n){return n(function(){k0(t)&&M0(e)})}function k0(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!rn(e,n)}catch{return!0}}function M0(e){var t=_a(e,2);t!==null&&nn(t,e,2)}function Xf(e){var t=Ue();if(typeof e=="function"){var n=e;if(e=n(),Gr){Fi(!0);try{n()}finally{Fi(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:li,lastRenderedState:e},t}function V0(e,t,n,i){return e.baseState=n,Rm(e,Ct,typeof i=="function"?i:li)}function e2(e,t,n,i,r){if(Xc(e))throw Error(L(485));if(e=t.action,e!==null){var s={payload:r,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(a){s.listeners.push(a)}};et.T!==null?n(!0):s.isTransition=!1,i(s),n=t.pending,n===null?(s.next=t.pending=s,P0(t,s)):(s.next=n.next,t.pending=n.next=s)}}function P0(e,t){var n=t.action,i=t.payload,r=e.state;if(t.isTransition){var s=et.T,a={};et.T=a;try{var l=n(r,i),u=et.S;u!==null&&u(a,l),Jp(e,t,l)}catch(h){$f(e,t,h)}finally{et.T=s}}else try{s=n(r,i),Jp(e,t,s)}catch(h){$f(e,t,h)}}function Jp(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){ty(e,t,i)},function(i){return $f(e,t,i)}):ty(e,t,n)}function ty(e,t,n){t.status="fulfilled",t.value=n,L0(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,P0(e,n)))}function $f(e,t,n){var i=e.pending;if(e.pending=null,i!==null){i=i.next;do t.status="rejected",t.reason=n,L0(t),t=t.next;while(t!==i)}e.action=null}function L0(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function U0(e,t){return t}function ey(e,t){if(_t){var n=Vt.formState;if(n!==null){t:{var i=ot;if(_t){if(Xt){e:{for(var r=Xt,s=Cn;r.nodeType!==8;){if(!s){r=null;break e}if(r=En(r.nextSibling),r===null){r=null;break e}}s=r.data,r=s==="F!"||s==="F"?r:null}if(r){Xt=En(r.nextSibling),i=r.data==="F!";break t}}Hr(i)}i=!1}i&&(t=n[0])}}return n=Ue(),n.memoizedState=n.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:U0,lastRenderedState:t},n.queue=i,n=tT.bind(null,ot,i),i.dispatch=n,i=Xf(!1),s=xm.bind(null,ot,!1,i.queue),i=Ue(),r={state:t,dispatch:null,action:e,pending:null},i.queue=r,n=e2.bind(null,ot,r,s,n),r.dispatch=n,i.memoizedState=e,[t,n,!1]}function ny(e){var t=se();return j0(t,Ct,e)}function j0(e,t,n){if(t=Rm(e,t,U0)[0],e=Su(li)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var i=ul(t)}catch(a){throw a===ll?Qc:a}else i=t;t=se();var r=t.queue,s=r.dispatch;return n!==t.memoizedState&&(ot.flags|=2048,ta(9,Kc(),n2.bind(null,r,n),null)),[i,s,e]}function n2(e,t){e.action=t}function iy(e){var t=se(),n=Ct;if(n!==null)return j0(t,n,e);se(),t=t.memoizedState,n=se();var i=n.queue.dispatch;return n.memoizedState=e,[t,i,!1]}function ta(e,t,n,i){return e={tag:e,create:n,deps:i,inst:t,next:null},t=ot.updateQueue,t===null&&(t=Sm(),ot.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function Kc(){return{destroy:void 0,resource:void 0}}function z0(){return se().memoizedState}function wu(e,t,n,i){var r=Ue();i=i===void 0?null:i,ot.flags|=e,r.memoizedState=ta(1|t,Kc(),n,i)}function cl(e,t,n,i){var r=se();i=i===void 0?null:i;var s=r.memoizedState.inst;Ct!==null&&i!==null&&vm(i,Ct.memoizedState.deps)?r.memoizedState=ta(t,s,n,i):(ot.flags|=e,r.memoizedState=ta(1|t,s,n,i))}function ry(e,t){wu(8390656,8,e,t)}function B0(e,t){cl(2048,8,e,t)}function q0(e,t){return cl(4,2,e,t)}function H0(e,t){return cl(4,4,e,t)}function F0(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function G0(e,t,n){n=n!=null?n.concat([e]):null,cl(4,4,F0.bind(null,t,e),n)}function Im(){}function Q0(e,t){var n=se();t=t===void 0?null:t;var i=n.memoizedState;return t!==null&&vm(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function Y0(e,t){var n=se();t=t===void 0?null:t;var i=n.memoizedState;if(t!==null&&vm(t,i[1]))return i[0];if(i=e(),Gr){Fi(!0);try{e()}finally{Fi(!1)}}return n.memoizedState=[i,t],i}function Cm(e,t,n){return n===void 0||ur&1073741824?e.memoizedState=t:(e.memoizedState=n,e=LT(),ot.lanes|=e,hr|=e,n)}function K0(e,t,n,i){return rn(n,t)?n:Js.current!==null?(e=Cm(e,n,i),rn(e,t)||(pe=!0),e):ur&42?(e=LT(),ot.lanes|=e,hr|=e,t):(pe=!0,e.memoizedState=n)}function X0(e,t,n,i,r){var s=vt.p;vt.p=s!==0&&8>s?s:8;var a=et.T,l={};et.T=l,xm(e,!1,t,n);try{var u=r(),h=et.S;if(h!==null&&h(l,u),u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=WS(u,i);vo(e,t,d,en(e))}else vo(e,t,i,en(e))}catch(g){vo(e,t,{then:function(){},status:"rejected",reason:g},en())}finally{vt.p=s,et.T=a}}function i2(){}function Zf(e,t,n,i){if(e.tag!==5)throw Error(L(476));var r=$0(e).queue;X0(e,r,t,Pr,n===null?i2:function(){return Z0(e),n(i)})}function $0(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:Pr,baseState:Pr,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:li,lastRenderedState:Pr},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:li,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Z0(e){var t=$0(e).next.queue;vo(e,t,{},en())}function Dm(){return Oe(Bo)}function W0(){return se().memoizedState}function J0(){return se().memoizedState}function r2(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=en();e=$i(n);var i=Zi(t,e,n);i!==null&&(nn(i,t,n),po(i,t,n)),t={cache:gm()},e.payload=t;return}t=t.return}}function s2(e,t,n){var i=en();n={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Xc(e)?eT(t,n):(n=hm(e,t,n,i),n!==null&&(nn(n,e,i),nT(n,t,i)))}function tT(e,t,n){var i=en();vo(e,t,n,i)}function vo(e,t,n,i){var r={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Xc(e))eT(t,r);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var a=t.lastRenderedState,l=s(a,n);if(r.hasEagerState=!0,r.eagerState=l,rn(l,a))return Gc(e,t,r,0),Vt===null&&Fc(),!1}catch{}finally{}if(n=hm(e,t,r,i),n!==null)return nn(n,e,i),nT(n,t,i),!0}return!1}function xm(e,t,n,i){if(i={lane:2,revertLane:Um(),action:i,hasEagerState:!1,eagerState:null,next:null},Xc(e)){if(t)throw Error(L(479))}else t=hm(e,n,i,2),t!==null&&nn(t,e,2)}function Xc(e){var t=e.alternate;return e===ot||t!==null&&t===ot}function eT(e,t){Bs=Wu=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function nT(e,t,n){if(n&4194048){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,Qv(e,n)}}var tc={readContext:Oe,use:Yc,useCallback:Jt,useContext:Jt,useEffect:Jt,useImperativeHandle:Jt,useLayoutEffect:Jt,useInsertionEffect:Jt,useMemo:Jt,useReducer:Jt,useRef:Jt,useState:Jt,useDebugValue:Jt,useDeferredValue:Jt,useTransition:Jt,useSyncExternalStore:Jt,useId:Jt,useHostTransitionStatus:Jt,useFormState:Jt,useActionState:Jt,useOptimistic:Jt,useMemoCache:Jt,useCacheRefresh:Jt},iT={readContext:Oe,use:Yc,useCallback:function(e,t){return Ue().memoizedState=[e,t===void 0?null:t],e},useContext:Oe,useEffect:ry,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,wu(4194308,4,F0.bind(null,t,e),n)},useLayoutEffect:function(e,t){return wu(4194308,4,e,t)},useInsertionEffect:function(e,t){wu(4,2,e,t)},useMemo:function(e,t){var n=Ue();t=t===void 0?null:t;var i=e();if(Gr){Fi(!0);try{e()}finally{Fi(!1)}}return n.memoizedState=[i,t],i},useReducer:function(e,t,n){var i=Ue();if(n!==void 0){var r=n(t);if(Gr){Fi(!0);try{n(t)}finally{Fi(!1)}}}else r=t;return i.memoizedState=i.baseState=r,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},i.queue=e,e=e.dispatch=s2.bind(null,ot,e),[i.memoizedState,e]},useRef:function(e){var t=Ue();return e={current:e},t.memoizedState=e},useState:function(e){e=Xf(e);var t=e.queue,n=tT.bind(null,ot,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Im,useDeferredValue:function(e,t){var n=Ue();return Cm(n,e,t)},useTransition:function(){var e=Xf(!1);return e=X0.bind(null,ot,e.queue,!0,!1),Ue().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var i=ot,r=Ue();if(_t){if(n===void 0)throw Error(L(407));n=n()}else{if(n=t(),Vt===null)throw Error(L(349));gt&124||x0(i,t,n)}r.memoizedState=n;var s={value:n,getSnapshot:t};return r.queue=s,ry(O0.bind(null,i,s,e),[e]),i.flags|=2048,ta(9,Kc(),N0.bind(null,i,s,n,t),null),n},useId:function(){var e=Ue(),t=Vt.identifierPrefix;if(_t){var n=Wn,i=Zn;n=(i&~(1<<32-tn(i)-1)).toString(32)+n,t="«"+t+"R"+n,n=Ju++,0<n&&(t+="H"+n.toString(32)),t+="»"}else n=JS++,t="«"+t+"r"+n.toString(32)+"»";return e.memoizedState=t},useHostTransitionStatus:Dm,useFormState:ey,useActionState:ey,useOptimistic:function(e){var t=Ue();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=xm.bind(null,ot,!0,n),n.dispatch=t,[e,t]},useMemoCache:wm,useCacheRefresh:function(){return Ue().memoizedState=r2.bind(null,ot)}},rT={readContext:Oe,use:Yc,useCallback:Q0,useContext:Oe,useEffect:B0,useImperativeHandle:G0,useInsertionEffect:q0,useLayoutEffect:H0,useMemo:Y0,useReducer:Su,useRef:z0,useState:function(){return Su(li)},useDebugValue:Im,useDeferredValue:function(e,t){var n=se();return K0(n,Ct.memoizedState,e,t)},useTransition:function(){var e=Su(li)[0],t=se().memoizedState;return[typeof e=="boolean"?e:ul(e),t]},useSyncExternalStore:D0,useId:W0,useHostTransitionStatus:Dm,useFormState:ny,useActionState:ny,useOptimistic:function(e,t){var n=se();return V0(n,Ct,e,t)},useMemoCache:wm,useCacheRefresh:J0},a2={readContext:Oe,use:Yc,useCallback:Q0,useContext:Oe,useEffect:B0,useImperativeHandle:G0,useInsertionEffect:q0,useLayoutEffect:H0,useMemo:Y0,useReducer:Qh,useRef:z0,useState:function(){return Qh(li)},useDebugValue:Im,useDeferredValue:function(e,t){var n=se();return Ct===null?Cm(n,e,t):K0(n,Ct.memoizedState,e,t)},useTransition:function(){var e=Qh(li)[0],t=se().memoizedState;return[typeof e=="boolean"?e:ul(e),t]},useSyncExternalStore:D0,useId:W0,useHostTransitionStatus:Dm,useFormState:iy,useActionState:iy,useOptimistic:function(e,t){var n=se();return Ct!==null?V0(n,Ct,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:wm,useCacheRefresh:J0},Hs=null,Lo=0;function iu(e){var t=Lo;return Lo+=1,Hs===null&&(Hs=[]),S0(Hs,e,t)}function Za(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function ru(e,t){throw t.$$typeof===Pb?Error(L(525)):(e=Object.prototype.toString.call(t),Error(L(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function sy(e){var t=e._init;return t(e._payload)}function sT(e){function t(w,v){if(e){var R=w.deletions;R===null?(w.deletions=[v],w.flags|=16):R.push(v)}}function n(w,v){if(!e)return null;for(;v!==null;)t(w,v),v=v.sibling;return null}function i(w){for(var v=new Map;w!==null;)w.key!==null?v.set(w.key,w):v.set(w.index,w),w=w.sibling;return v}function r(w,v){return w=ii(w,v),w.index=0,w.sibling=null,w}function s(w,v,R){return w.index=R,e?(R=w.alternate,R!==null?(R=R.index,R<v?(w.flags|=67108866,v):R):(w.flags|=67108866,v)):(w.flags|=1048576,v)}function a(w){return e&&w.alternate===null&&(w.flags|=67108866),w}function l(w,v,R,x){return v===null||v.tag!==6?(v=Hh(R,w.mode,x),v.return=w,v):(v=r(v,R),v.return=w,v)}function u(w,v,R,x){var j=R.type;return j===Ss?d(w,v,R.props.children,x,R.key):v!==null&&(v.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Mi&&sy(j)===v.type)?(v=r(v,R.props),Za(v,R),v.return=w,v):(v=Au(R.type,R.key,R.props,null,w.mode,x),Za(v,R),v.return=w,v)}function h(w,v,R,x){return v===null||v.tag!==4||v.stateNode.containerInfo!==R.containerInfo||v.stateNode.implementation!==R.implementation?(v=Fh(R,w.mode,x),v.return=w,v):(v=r(v,R.children||[]),v.return=w,v)}function d(w,v,R,x,j){return v===null||v.tag!==7?(v=Lr(R,w.mode,x,j),v.return=w,v):(v=r(v,R),v.return=w,v)}function g(w,v,R){if(typeof v=="string"&&v!==""||typeof v=="number"||typeof v=="bigint")return v=Hh(""+v,w.mode,R),v.return=w,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case $l:return R=Au(v.type,v.key,v.props,null,w.mode,R),Za(R,v),R.return=w,R;case eo:return v=Fh(v,w.mode,R),v.return=w,v;case Mi:var x=v._init;return v=x(v._payload),g(w,v,R)}if(no(v)||Ya(v))return v=Lr(v,w.mode,R,null),v.return=w,v;if(typeof v.then=="function")return g(w,iu(v),R);if(v.$$typeof===$n)return g(w,eu(w,v),R);ru(w,v)}return null}function m(w,v,R,x){var j=v!==null?v.key:null;if(typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint")return j!==null?null:l(w,v,""+R,x);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case $l:return R.key===j?u(w,v,R,x):null;case eo:return R.key===j?h(w,v,R,x):null;case Mi:return j=R._init,R=j(R._payload),m(w,v,R,x)}if(no(R)||Ya(R))return j!==null?null:d(w,v,R,x,null);if(typeof R.then=="function")return m(w,v,iu(R),x);if(R.$$typeof===$n)return m(w,v,eu(w,R),x);ru(w,R)}return null}function _(w,v,R,x,j){if(typeof x=="string"&&x!==""||typeof x=="number"||typeof x=="bigint")return w=w.get(R)||null,l(v,w,""+x,j);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case $l:return w=w.get(x.key===null?R:x.key)||null,u(v,w,x,j);case eo:return w=w.get(x.key===null?R:x.key)||null,h(v,w,x,j);case Mi:var H=x._init;return x=H(x._payload),_(w,v,R,x,j)}if(no(x)||Ya(x))return w=w.get(R)||null,d(v,w,x,j,null);if(typeof x.then=="function")return _(w,v,R,iu(x),j);if(x.$$typeof===$n)return _(w,v,R,eu(v,x),j);ru(v,x)}return null}function N(w,v,R,x){for(var j=null,H=null,E=v,y=v=0,A=null;E!==null&&y<R.length;y++){E.index>y?(A=E,E=null):A=E.sibling;var b=m(w,E,R[y],x);if(b===null){E===null&&(E=A);break}e&&E&&b.alternate===null&&t(w,E),v=s(b,v,y),H===null?j=b:H.sibling=b,H=b,E=A}if(y===R.length)return n(w,E),_t&&Or(w,y),j;if(E===null){for(;y<R.length;y++)E=g(w,R[y],x),E!==null&&(v=s(E,v,y),H===null?j=E:H.sibling=E,H=E);return _t&&Or(w,y),j}for(E=i(E);y<R.length;y++)A=_(E,w,y,R[y],x),A!==null&&(e&&A.alternate!==null&&E.delete(A.key===null?y:A.key),v=s(A,v,y),H===null?j=A:H.sibling=A,H=A);return e&&E.forEach(function(I){return t(w,I)}),_t&&Or(w,y),j}function k(w,v,R,x){if(R==null)throw Error(L(151));for(var j=null,H=null,E=v,y=v=0,A=null,b=R.next();E!==null&&!b.done;y++,b=R.next()){E.index>y?(A=E,E=null):A=E.sibling;var I=m(w,E,b.value,x);if(I===null){E===null&&(E=A);break}e&&E&&I.alternate===null&&t(w,E),v=s(I,v,y),H===null?j=I:H.sibling=I,H=I,E=A}if(b.done)return n(w,E),_t&&Or(w,y),j;if(E===null){for(;!b.done;y++,b=R.next())b=g(w,b.value,x),b!==null&&(v=s(b,v,y),H===null?j=b:H.sibling=b,H=b);return _t&&Or(w,y),j}for(E=i(E);!b.done;y++,b=R.next())b=_(E,w,y,b.value,x),b!==null&&(e&&b.alternate!==null&&E.delete(b.key===null?y:b.key),v=s(b,v,y),H===null?j=b:H.sibling=b,H=b);return e&&E.forEach(function(C){return t(w,C)}),_t&&Or(w,y),j}function V(w,v,R,x){if(typeof R=="object"&&R!==null&&R.type===Ss&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case $l:t:{for(var j=R.key;v!==null;){if(v.key===j){if(j=R.type,j===Ss){if(v.tag===7){n(w,v.sibling),x=r(v,R.props.children),x.return=w,w=x;break t}}else if(v.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Mi&&sy(j)===v.type){n(w,v.sibling),x=r(v,R.props),Za(x,R),x.return=w,w=x;break t}n(w,v);break}else t(w,v);v=v.sibling}R.type===Ss?(x=Lr(R.props.children,w.mode,x,R.key),x.return=w,w=x):(x=Au(R.type,R.key,R.props,null,w.mode,x),Za(x,R),x.return=w,w=x)}return a(w);case eo:t:{for(j=R.key;v!==null;){if(v.key===j)if(v.tag===4&&v.stateNode.containerInfo===R.containerInfo&&v.stateNode.implementation===R.implementation){n(w,v.sibling),x=r(v,R.children||[]),x.return=w,w=x;break t}else{n(w,v);break}else t(w,v);v=v.sibling}x=Fh(R,w.mode,x),x.return=w,w=x}return a(w);case Mi:return j=R._init,R=j(R._payload),V(w,v,R,x)}if(no(R))return N(w,v,R,x);if(Ya(R)){if(j=Ya(R),typeof j!="function")throw Error(L(150));return R=j.call(R),k(w,v,R,x)}if(typeof R.then=="function")return V(w,v,iu(R),x);if(R.$$typeof===$n)return V(w,v,eu(w,R),x);ru(w,R)}return typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint"?(R=""+R,v!==null&&v.tag===6?(n(w,v.sibling),x=r(v,R),x.return=w,w=x):(n(w,v),x=Hh(R,w.mode,x),x.return=w,w=x),a(w)):n(w,v)}return function(w,v,R,x){try{Lo=0;var j=V(w,v,R,x);return Hs=null,j}catch(E){if(E===ll||E===Qc)throw E;var H=We(29,E,null,w.mode);return H.lanes=x,H.return=w,H}finally{}}}var ea=sT(!0),aT=sT(!1),gn=jn(null),On=null;function Li(e){var t=e.alternate;Bt(le,le.current&1),Bt(gn,e),On===null&&(t===null||Js.current!==null||t.memoizedState!==null)&&(On=e)}function oT(e){if(e.tag===22){if(Bt(le,le.current),Bt(gn,e),On===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(On=e)}}else Ui()}function Ui(){Bt(le,le.current),Bt(gn,gn.current)}function ti(e){ye(gn),On===e&&(On=null),ye(le)}var le=jn(0);function ec(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||md(n)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function Yh(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:Ut({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Wf={enqueueSetState:function(e,t,n){e=e._reactInternals;var i=en(),r=$i(i);r.payload=t,n!=null&&(r.callback=n),t=Zi(e,r,i),t!==null&&(nn(t,e,i),po(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=en(),r=$i(i);r.tag=1,r.payload=t,n!=null&&(r.callback=n),t=Zi(e,r,i),t!==null&&(nn(t,e,i),po(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=en(),i=$i(n);i.tag=2,t!=null&&(i.callback=t),t=Zi(e,i,n),t!==null&&(nn(t,e,n),po(t,e,n))}};function ay(e,t,n,i,r,s,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,s,a):t.prototype&&t.prototype.isPureReactComponent?!Mo(n,i)||!Mo(r,s):!0}function oy(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&Wf.enqueueReplaceState(t,t.state,null)}function Qr(e,t){var n=t;if("ref"in t){n={};for(var i in t)i!=="ref"&&(n[i]=t[i])}if(e=e.defaultProps){n===t&&(n=Ut({},n));for(var r in e)n[r]===void 0&&(n[r]=e[r])}return n}var nc=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function lT(e){nc(e)}function uT(e){console.error(e)}function cT(e){nc(e)}function ic(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(i){setTimeout(function(){throw i})}}function ly(e,t,n){try{var i=e.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function Jf(e,t,n){return n=$i(n),n.tag=3,n.payload={element:null},n.callback=function(){ic(e,t)},n}function hT(e){return e=$i(e),e.tag=3,e}function fT(e,t,n,i){var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var s=i.value;e.payload=function(){return r(s)},e.callback=function(){ly(t,n,i)}}var a=n.stateNode;a!==null&&typeof a.componentDidCatch=="function"&&(e.callback=function(){ly(t,n,i),typeof r!="function"&&(Wi===null?Wi=new Set([this]):Wi.add(this));var l=i.stack;this.componentDidCatch(i.value,{componentStack:l!==null?l:""})})}function o2(e,t,n,i,r){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(t=n.alternate,t!==null&&al(t,n,r,!0),n=gn.current,n!==null){switch(n.tag){case 13:return On===null?od():n.alternate===null&&$t===0&&($t=3),n.flags&=-257,n.flags|=65536,n.lanes=r,i===Gf?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([i]):t.add(i),sf(e,i,r)),!1;case 22:return n.flags|=65536,i===Gf?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([i]):n.add(i)),sf(e,i,r)),!1}throw Error(L(435,n.tag))}return sf(e,i,r),od(),!1}if(_t)return t=gn.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=r,i!==zf&&(e=Error(L(422),{cause:i}),Vo(hn(e,n)))):(i!==zf&&(t=Error(L(423),{cause:i}),Vo(hn(t,n))),e=e.current.alternate,e.flags|=65536,r&=-r,e.lanes|=r,i=hn(i,n),r=Jf(e.stateNode,i,r),Gh(e,r),$t!==4&&($t=2)),!1;var s=Error(L(520),{cause:i});if(s=hn(s,n),Ao===null?Ao=[s]:Ao.push(s),$t!==4&&($t=2),t===null)return!0;i=hn(i,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=r&-r,n.lanes|=e,e=Jf(n.stateNode,i,e),Gh(n,e),!1;case 1:if(t=n.type,s=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||s!==null&&typeof s.componentDidCatch=="function"&&(Wi===null||!Wi.has(s))))return n.flags|=65536,r&=-r,n.lanes|=r,r=hT(r),fT(r,e,n,i),Gh(n,r),!1}n=n.return}while(n!==null);return!1}var dT=Error(L(461)),pe=!1;function Te(e,t,n,i){t.child=e===null?aT(t,null,n,i):ea(t,e.child,n,i)}function uy(e,t,n,i,r){n=n.render;var s=t.ref;if("ref"in i){var a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}else a=i;return Fr(t),i=Tm(e,t,n,a,s,r),l=Em(),e!==null&&!pe?(Am(e,t,r),ui(e,t,r)):(_t&&l&&dm(t),t.flags|=1,Te(e,t,i,r),t.child)}function cy(e,t,n,i,r){if(e===null){var s=n.type;return typeof s=="function"&&!fm(s)&&s.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=s,mT(e,t,s,i,r)):(e=Au(n.type,null,i,t,t.mode,r),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!Nm(e,r)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:Mo,n(a,i)&&e.ref===t.ref)return ui(e,t,r)}return t.flags|=1,e=ii(s,i),e.ref=t.ref,e.return=t,t.child=e}function mT(e,t,n,i,r){if(e!==null){var s=e.memoizedProps;if(Mo(s,i)&&e.ref===t.ref)if(pe=!1,t.pendingProps=i=s,Nm(e,r))e.flags&131072&&(pe=!0);else return t.lanes=e.lanes,ui(e,t,r)}return td(e,t,n,i,r)}function gT(e,t,n){var i=t.pendingProps,r=i.children,s=e!==null?e.memoizedState:null;if(i.mode==="hidden"){if(t.flags&128){if(i=s!==null?s.baseLanes|n:n,e!==null){for(r=t.child=e.child,s=0;r!==null;)s=s|r.lanes|r.childLanes,r=r.sibling;t.childLanes=s&~i}else t.childLanes=0,t.child=null;return hy(e,t,i,n)}if(n&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&bu(t,s!==null?s.cachePool:null),s!==null?Wp(t,s):Kf(),oT(t);else return t.lanes=t.childLanes=536870912,hy(e,t,s!==null?s.baseLanes|n:n,n)}else s!==null?(bu(t,s.cachePool),Wp(t,s),Ui(),t.memoizedState=null):(e!==null&&bu(t,null),Kf(),Ui());return Te(e,t,r,n),t.child}function hy(e,t,n,i){var r=pm();return r=r===null?null:{parent:oe._currentValue,pool:r},t.memoizedState={baseLanes:n,cachePool:r},e!==null&&bu(t,null),Kf(),oT(t),e!==null&&al(e,t,i,!0),null}function Ru(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(L(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function td(e,t,n,i,r){return Fr(t),n=Tm(e,t,n,i,void 0,r),i=Em(),e!==null&&!pe?(Am(e,t,r),ui(e,t,r)):(_t&&i&&dm(t),t.flags|=1,Te(e,t,n,r),t.child)}function fy(e,t,n,i,r,s){return Fr(t),t.updateQueue=null,n=C0(t,i,n,r),I0(e),i=Em(),e!==null&&!pe?(Am(e,t,s),ui(e,t,s)):(_t&&i&&dm(t),t.flags|=1,Te(e,t,n,s),t.child)}function dy(e,t,n,i,r){if(Fr(t),t.stateNode===null){var s=Os,a=n.contextType;typeof a=="object"&&a!==null&&(s=Oe(a)),s=new n(i,s),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Wf,t.stateNode=s,s._reactInternals=t,s=t.stateNode,s.props=i,s.state=t.memoizedState,s.refs={},ym(t),a=n.contextType,s.context=typeof a=="object"&&a!==null?Oe(a):Os,s.state=t.memoizedState,a=n.getDerivedStateFromProps,typeof a=="function"&&(Yh(t,n,a,i),s.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(a=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),a!==s.state&&Wf.enqueueReplaceState(s,s.state,null),_o(t,i,s,r),yo(),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308),i=!0}else if(e===null){s=t.stateNode;var l=t.memoizedProps,u=Qr(n,l);s.props=u;var h=s.context,d=n.contextType;a=Os,typeof d=="object"&&d!==null&&(a=Oe(d));var g=n.getDerivedStateFromProps;d=typeof g=="function"||typeof s.getSnapshotBeforeUpdate=="function",l=t.pendingProps!==l,d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l||h!==a)&&oy(t,s,i,a),Vi=!1;var m=t.memoizedState;s.state=m,_o(t,i,s,r),yo(),h=t.memoizedState,l||m!==h||Vi?(typeof g=="function"&&(Yh(t,n,g,i),h=t.memoizedState),(u=Vi||ay(t,n,u,i,m,h,a))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=h),s.props=i,s.state=h,s.context=a,i=u):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{s=t.stateNode,Qf(e,t),a=t.memoizedProps,d=Qr(n,a),s.props=d,g=t.pendingProps,m=s.context,h=n.contextType,u=Os,typeof h=="object"&&h!==null&&(u=Oe(h)),l=n.getDerivedStateFromProps,(h=typeof l=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==g||m!==u)&&oy(t,s,i,u),Vi=!1,m=t.memoizedState,s.state=m,_o(t,i,s,r),yo();var _=t.memoizedState;a!==g||m!==_||Vi||e!==null&&e.dependencies!==null&&$u(e.dependencies)?(typeof l=="function"&&(Yh(t,n,l,i),_=t.memoizedState),(d=Vi||ay(t,n,d,i,m,_,u)||e!==null&&e.dependencies!==null&&$u(e.dependencies))?(h||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(i,_,u),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(i,_,u)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=_),s.props=i,s.state=_,s.context=u,i=d):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),i=!1)}return s=i,Ru(e,t),i=(t.flags&128)!==0,s||i?(s=t.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:s.render(),t.flags|=1,e!==null&&i?(t.child=ea(t,e.child,null,r),t.child=ea(t,null,n,r)):Te(e,t,n,r),t.memoizedState=s.state,e=t.child):e=ui(e,t,r),e}function my(e,t,n,i){return sl(),t.flags|=256,Te(e,t,n,i),t.child}var Kh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Xh(e){return{baseLanes:e,cachePool:A0()}}function $h(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=mn),e}function pT(e,t,n){var i=t.pendingProps,r=!1,s=(t.flags&128)!==0,a;if((a=s)||(a=e!==null&&e.memoizedState===null?!1:(le.current&2)!==0),a&&(r=!0,t.flags&=-129),a=(t.flags&32)!==0,t.flags&=-33,e===null){if(_t){if(r?Li(t):Ui(),_t){var l=Xt,u;if(u=l){t:{for(u=l,l=Cn;u.nodeType!==8;){if(!l){l=null;break t}if(u=En(u.nextSibling),u===null){l=null;break t}}l=u}l!==null?(t.memoizedState={dehydrated:l,treeContext:Ur!==null?{id:Zn,overflow:Wn}:null,retryLane:536870912,hydrationErrors:null},u=We(18,null,null,0),u.stateNode=l,u.return=t,t.child=u,Me=t,Xt=null,u=!0):u=!1}u||Hr(t)}if(l=t.memoizedState,l!==null&&(l=l.dehydrated,l!==null))return md(l)?t.lanes=32:t.lanes=536870912,null;ti(t)}return l=i.children,i=i.fallback,r?(Ui(),r=t.mode,l=rc({mode:"hidden",children:l},r),i=Lr(i,r,n,null),l.return=t,i.return=t,l.sibling=i,t.child=l,r=t.child,r.memoizedState=Xh(n),r.childLanes=$h(e,a,n),t.memoizedState=Kh,i):(Li(t),ed(t,l))}if(u=e.memoizedState,u!==null&&(l=u.dehydrated,l!==null)){if(s)t.flags&256?(Li(t),t.flags&=-257,t=Zh(e,t,n)):t.memoizedState!==null?(Ui(),t.child=e.child,t.flags|=128,t=null):(Ui(),r=i.fallback,l=t.mode,i=rc({mode:"visible",children:i.children},l),r=Lr(r,l,n,null),r.flags|=2,i.return=t,r.return=t,i.sibling=r,t.child=i,ea(t,e.child,null,n),i=t.child,i.memoizedState=Xh(n),i.childLanes=$h(e,a,n),t.memoizedState=Kh,t=r);else if(Li(t),md(l)){if(a=l.nextSibling&&l.nextSibling.dataset,a)var h=a.dgst;a=h,i=Error(L(419)),i.stack="",i.digest=a,Vo({value:i,source:null,stack:null}),t=Zh(e,t,n)}else if(pe||al(e,t,n,!1),a=(n&e.childLanes)!==0,pe||a){if(a=Vt,a!==null&&(i=n&-n,i=i&42?1:em(i),i=i&(a.suspendedLanes|n)?0:i,i!==0&&i!==u.retryLane))throw u.retryLane=i,_a(e,i),nn(a,e,i),dT;l.data==="$?"||od(),t=Zh(e,t,n)}else l.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=u.treeContext,Xt=En(l.nextSibling),Me=t,_t=!0,jr=null,Cn=!1,e!==null&&(ln[un++]=Zn,ln[un++]=Wn,ln[un++]=Ur,Zn=e.id,Wn=e.overflow,Ur=t),t=ed(t,i.children),t.flags|=4096);return t}return r?(Ui(),r=i.fallback,l=t.mode,u=e.child,h=u.sibling,i=ii(u,{mode:"hidden",children:i.children}),i.subtreeFlags=u.subtreeFlags&65011712,h!==null?r=ii(h,r):(r=Lr(r,l,n,null),r.flags|=2),r.return=t,i.return=t,i.sibling=r,t.child=i,i=r,r=t.child,l=e.child.memoizedState,l===null?l=Xh(n):(u=l.cachePool,u!==null?(h=oe._currentValue,u=u.parent!==h?{parent:h,pool:h}:u):u=A0(),l={baseLanes:l.baseLanes|n,cachePool:u}),r.memoizedState=l,r.childLanes=$h(e,a,n),t.memoizedState=Kh,i):(Li(t),n=e.child,e=n.sibling,n=ii(n,{mode:"visible",children:i.children}),n.return=t,n.sibling=null,e!==null&&(a=t.deletions,a===null?(t.deletions=[e],t.flags|=16):a.push(e)),t.child=n,t.memoizedState=null,n)}function ed(e,t){return t=rc({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function rc(e,t){return e=We(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Zh(e,t,n){return ea(t,e.child,null,n),e=ed(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function gy(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),qf(e.return,t,n)}function Wh(e,t,n,i,r){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function yT(e,t,n){var i=t.pendingProps,r=i.revealOrder,s=i.tail;if(Te(e,t,i.children,n),i=le.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)t:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&gy(e,n,t);else if(e.tag===19)gy(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break t;for(;e.sibling===null;){if(e.return===null||e.return===t)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}switch(Bt(le,i),r){case"forwards":for(n=t.child,r=null;n!==null;)e=n.alternate,e!==null&&ec(e)===null&&(r=n),n=n.sibling;n=r,n===null?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),Wh(t,!1,r,n,s);break;case"backwards":for(n=null,r=t.child,t.child=null;r!==null;){if(e=r.alternate,e!==null&&ec(e)===null){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}Wh(t,!0,n,null,s);break;case"together":Wh(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ui(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),hr|=t.lanes,!(n&t.childLanes))if(e!==null){if(al(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(L(153));if(t.child!==null){for(e=t.child,n=ii(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=ii(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Nm(e,t){return e.lanes&t?!0:(e=e.dependencies,!!(e!==null&&$u(e)))}function l2(e,t,n){switch(t.tag){case 3:qu(t,t.stateNode.containerInfo),Pi(t,oe,e.memoizedState.cache),sl();break;case 27:case 5:xf(t);break;case 4:qu(t,t.stateNode.containerInfo);break;case 10:Pi(t,t.type,t.memoizedProps.value);break;case 13:var i=t.memoizedState;if(i!==null)return i.dehydrated!==null?(Li(t),t.flags|=128,null):n&t.child.childLanes?pT(e,t,n):(Li(t),e=ui(e,t,n),e!==null?e.sibling:null);Li(t);break;case 19:var r=(e.flags&128)!==0;if(i=(n&t.childLanes)!==0,i||(al(e,t,n,!1),i=(n&t.childLanes)!==0),r){if(i)return yT(e,t,n);t.flags|=128}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Bt(le,le.current),i)break;return null;case 22:case 23:return t.lanes=0,gT(e,t,n);case 24:Pi(t,oe,e.memoizedState.cache)}return ui(e,t,n)}function _T(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)pe=!0;else{if(!Nm(e,n)&&!(t.flags&128))return pe=!1,l2(e,t,n);pe=!!(e.flags&131072)}else pe=!1,_t&&t.flags&1048576&&T0(t,Xu,t.index);switch(t.lanes=0,t.tag){case 16:t:{e=t.pendingProps;var i=t.elementType,r=i._init;if(i=r(i._payload),t.type=i,typeof i=="function")fm(i)?(e=Qr(i,e),t.tag=1,t=dy(null,t,i,e,n)):(t.tag=0,t=td(null,t,i,e,n));else{if(i!=null){if(r=i.$$typeof,r===Wd){t.tag=11,t=uy(null,t,i,e,n);break t}else if(r===Jd){t.tag=14,t=cy(null,t,i,e,n);break t}}throw t=Cf(i)||i,Error(L(306,t,""))}}return t;case 0:return td(e,t,t.type,t.pendingProps,n);case 1:return i=t.type,r=Qr(i,t.pendingProps),dy(e,t,i,r,n);case 3:t:{if(qu(t,t.stateNode.containerInfo),e===null)throw Error(L(387));i=t.pendingProps;var s=t.memoizedState;r=s.element,Qf(e,t),_o(t,i,null,n);var a=t.memoizedState;if(i=a.cache,Pi(t,oe,i),i!==s.cache&&Hf(t,[oe],n,!0),yo(),i=a.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:a.cache},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){t=my(e,t,i,n);break t}else if(i!==r){r=hn(Error(L(424)),t),Vo(r),t=my(e,t,i,n);break t}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Xt=En(e.firstChild),Me=t,_t=!0,jr=null,Cn=!0,n=aT(t,null,i,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(sl(),i===r){t=ui(e,t,n);break t}Te(e,t,i,n)}t=t.child}return t;case 26:return Ru(e,t),e===null?(n=Oy(t.type,null,t.pendingProps,null))?t.memoizedState=n:_t||(n=t.type,e=t.pendingProps,i=hc(Xi.current).createElement(n),i[Ne]=t,i[qe]=e,Se(i,n,e),ge(i),t.stateNode=i):t.memoizedState=Oy(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return xf(t),e===null&&_t&&(i=t.stateNode=rE(t.type,t.pendingProps,Xi.current),Me=t,Cn=!0,r=Xt,vr(t.type)?(gd=r,Xt=En(i.firstChild)):Xt=r),Te(e,t,t.pendingProps.children,n),Ru(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&_t&&((r=i=Xt)&&(i=P2(i,t.type,t.pendingProps,Cn),i!==null?(t.stateNode=i,Me=t,Xt=En(i.firstChild),Cn=!1,r=!0):r=!1),r||Hr(t)),xf(t),r=t.type,s=t.pendingProps,a=e!==null?e.memoizedProps:null,i=s.children,fd(r,s)?i=null:a!==null&&fd(r,a)&&(t.flags|=32),t.memoizedState!==null&&(r=Tm(e,t,t2,null,null,n),Bo._currentValue=r),Ru(e,t),Te(e,t,i,n),t.child;case 6:return e===null&&_t&&((e=n=Xt)&&(n=L2(n,t.pendingProps,Cn),n!==null?(t.stateNode=n,Me=t,Xt=null,e=!0):e=!1),e||Hr(t)),null;case 13:return pT(e,t,n);case 4:return qu(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=ea(t,null,i,n):Te(e,t,i,n),t.child;case 11:return uy(e,t,t.type,t.pendingProps,n);case 7:return Te(e,t,t.pendingProps,n),t.child;case 8:return Te(e,t,t.pendingProps.children,n),t.child;case 12:return Te(e,t,t.pendingProps.children,n),t.child;case 10:return i=t.pendingProps,Pi(t,t.type,i.value),Te(e,t,i.children,n),t.child;case 9:return r=t.type._context,i=t.pendingProps.children,Fr(t),r=Oe(r),i=i(r),t.flags|=1,Te(e,t,i,n),t.child;case 14:return cy(e,t,t.type,t.pendingProps,n);case 15:return mT(e,t,t.type,t.pendingProps,n);case 19:return yT(e,t,n);case 31:return i=t.pendingProps,n=t.mode,i={mode:i.mode,children:i.children},e===null?(n=rc(i,n),n.ref=t.ref,t.child=n,n.return=t,t=n):(n=ii(e.child,i),n.ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return gT(e,t,n);case 24:return Fr(t),i=Oe(oe),e===null?(r=pm(),r===null&&(r=Vt,s=gm(),r.pooledCache=s,s.refCount++,s!==null&&(r.pooledCacheLanes|=n),r=s),t.memoizedState={parent:i,cache:r},ym(t),Pi(t,oe,r)):(e.lanes&n&&(Qf(e,t),_o(t,null,null,n),yo()),r=e.memoizedState,s=t.memoizedState,r.parent!==i?(r={parent:i,cache:i},t.memoizedState=r,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=r),Pi(t,oe,i)):(i=s.cache,Pi(t,oe,i),i!==r.cache&&Hf(t,[oe],n,!0))),Te(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(L(156,t.tag))}function Gn(e){e.flags|=4}function py(e,t){if(t.type!=="stylesheet"||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!oE(t)){if(t=gn.current,t!==null&&((gt&4194048)===gt?On!==null:(gt&62914560)!==gt&&!(gt&536870912)||t!==On))throw go=Gf,b0;e.flags|=8192}}function su(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Fv():536870912,e.lanes|=t,na|=t)}function Wa(e,t){if(!_t)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Ht(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&65011712,i|=r.flags&65011712,r.return=e,r=r.sibling;else for(r=e.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function u2(e,t,n){var i=t.pendingProps;switch(mm(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ht(t),null;case 1:return Ht(t),null;case 3:return n=t.stateNode,i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),ri(oe),Xs(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&($a(t)?Gn(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Qp())),Ht(t),null;case 26:return n=t.memoizedState,e===null?(Gn(t),n!==null?(Ht(t),py(t,n)):(Ht(t),t.flags&=-16777217)):n?n!==e.memoizedState?(Gn(t),Ht(t),py(t,n)):(Ht(t),t.flags&=-16777217):(e.memoizedProps!==i&&Gn(t),Ht(t),t.flags&=-16777217),null;case 27:Hu(t),n=Xi.current;var r=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==i&&Gn(t);else{if(!i){if(t.stateNode===null)throw Error(L(166));return Ht(t),null}e=xn.current,$a(t)?Fp(t):(e=rE(r,i,n),t.stateNode=e,Gn(t))}return Ht(t),null;case 5:if(Hu(t),n=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&Gn(t);else{if(!i){if(t.stateNode===null)throw Error(L(166));return Ht(t),null}if(e=xn.current,$a(t))Fp(t);else{switch(r=hc(Xi.current),e){case 1:e=r.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=r.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=r.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=r.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":e=r.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof i.is=="string"?r.createElement("select",{is:i.is}):r.createElement("select"),i.multiple?e.multiple=!0:i.size&&(e.size=i.size);break;default:e=typeof i.is=="string"?r.createElement(n,{is:i.is}):r.createElement(n)}}e[Ne]=t,e[qe]=i;t:for(r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.tag!==27&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break t;for(;r.sibling===null;){if(r.return===null||r.return===t)break t;r=r.return}r.sibling.return=r.return,r=r.sibling}t.stateNode=e;t:switch(Se(e,n,i),n){case"button":case"input":case"select":case"textarea":e=!!i.autoFocus;break t;case"img":e=!0;break t;default:e=!1}e&&Gn(t)}}return Ht(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==i&&Gn(t);else{if(typeof i!="string"&&t.stateNode===null)throw Error(L(166));if(e=Xi.current,$a(t)){if(e=t.stateNode,n=t.memoizedProps,i=null,r=Me,r!==null)switch(r.tag){case 27:case 5:i=r.memoizedProps}e[Ne]=t,e=!!(e.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||eE(e.nodeValue,n)),e||Hr(t)}else e=hc(e).createTextNode(i),e[Ne]=t,t.stateNode=e}return Ht(t),null;case 13:if(i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(r=$a(t),i!==null&&i.dehydrated!==null){if(e===null){if(!r)throw Error(L(318));if(r=t.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(L(317));r[Ne]=t}else sl(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ht(t),r=!1}else r=Qp(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=r),r=!0;if(!r)return t.flags&256?(ti(t),t):(ti(t),null)}if(ti(t),t.flags&128)return t.lanes=n,t;if(n=i!==null,e=e!==null&&e.memoizedState!==null,n){i=t.child,r=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(r=i.alternate.memoizedState.cachePool.pool);var s=null;i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(s=i.memoizedState.cachePool.pool),s!==r&&(i.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),su(t,t.updateQueue),Ht(t),null;case 4:return Xs(),e===null&&jm(t.stateNode.containerInfo),Ht(t),null;case 10:return ri(t.type),Ht(t),null;case 19:if(ye(le),r=t.memoizedState,r===null)return Ht(t),null;if(i=(t.flags&128)!==0,s=r.rendering,s===null)if(i)Wa(r,!1);else{if($t!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=ec(e),s!==null){for(t.flags|=128,Wa(r,!1),e=s.updateQueue,t.updateQueue=e,su(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)v0(n,e),n=n.sibling;return Bt(le,le.current&1|2),t.child}e=e.sibling}r.tail!==null&&Nn()>ac&&(t.flags|=128,i=!0,Wa(r,!1),t.lanes=4194304)}else{if(!i)if(e=ec(s),e!==null){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,su(t,e),Wa(r,!0),r.tail===null&&r.tailMode==="hidden"&&!s.alternate&&!_t)return Ht(t),null}else 2*Nn()-r.renderingStartTime>ac&&n!==536870912&&(t.flags|=128,i=!0,Wa(r,!1),t.lanes=4194304);r.isBackwards?(s.sibling=t.child,t.child=s):(e=r.last,e!==null?e.sibling=s:t.child=s,r.last=s)}return r.tail!==null?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=Nn(),t.sibling=null,e=le.current,Bt(le,i?e&1|2:e&1),t):(Ht(t),null);case 22:case 23:return ti(t),_m(),i=t.memoizedState!==null,e!==null?e.memoizedState!==null!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?n&536870912&&!(t.flags&128)&&(Ht(t),t.subtreeFlags&6&&(t.flags|=8192)):Ht(t),n=t.updateQueue,n!==null&&su(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),i=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),i!==n&&(t.flags|=2048),e!==null&&ye(zr),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),ri(oe),Ht(t),null;case 25:return null;case 30:return null}throw Error(L(156,t.tag))}function c2(e,t){switch(mm(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ri(oe),Xs(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Hu(t),null;case 13:if(ti(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(L(340));sl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ye(le),null;case 4:return Xs(),null;case 10:return ri(t.type),null;case 22:case 23:return ti(t),_m(),e!==null&&ye(zr),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return ri(oe),null;case 25:return null;default:return null}}function vT(e,t){switch(mm(t),t.tag){case 3:ri(oe),Xs();break;case 26:case 27:case 5:Hu(t);break;case 4:Xs();break;case 13:ti(t);break;case 19:ye(le);break;case 10:ri(t.type);break;case 22:case 23:ti(t),_m(),e!==null&&ye(zr);break;case 24:ri(oe)}}function hl(e,t){try{var n=t.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var r=i.next;n=r;do{if((n.tag&e)===e){i=void 0;var s=n.create,a=n.inst;i=s(),a.destroy=i}n=n.next}while(n!==r)}}catch(l){Mt(t,t.return,l)}}function cr(e,t,n){try{var i=t.updateQueue,r=i!==null?i.lastEffect:null;if(r!==null){var s=r.next;i=s;do{if((i.tag&e)===e){var a=i.inst,l=a.destroy;if(l!==void 0){a.destroy=void 0,r=t;var u=n,h=l;try{h()}catch(d){Mt(r,u,d)}}}i=i.next}while(i!==s)}}catch(d){Mt(t,t.return,d)}}function TT(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{R0(t,n)}catch(i){Mt(e,e.return,i)}}}function ET(e,t,n){n.props=Qr(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(i){Mt(e,t,i)}}function To(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var i=e.stateNode;break;case 30:i=e.stateNode;break;default:i=e.stateNode}typeof n=="function"?e.refCleanup=n(i):n.current=i}}catch(r){Mt(e,t,r)}}function Dn(e,t){var n=e.ref,i=e.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(r){Mt(e,t,r)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(r){Mt(e,t,r)}else n.current=null}function AT(e){var t=e.type,n=e.memoizedProps,i=e.stateNode;try{t:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break t;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(r){Mt(e,e.return,r)}}function Jh(e,t,n){try{var i=e.stateNode;N2(i,e.type,n,t),i[qe]=t}catch(r){Mt(e,e.return,r)}}function bT(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&vr(e.type)||e.tag===4}function tf(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||bT(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&vr(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function nd(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Jc));else if(i!==4&&(i===27&&vr(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(nd(e,t,n),e=e.sibling;e!==null;)nd(e,t,n),e=e.sibling}function sc(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&(i===27&&vr(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(sc(e,t,n),e=e.sibling;e!==null;)sc(e,t,n),e=e.sibling}function ST(e){var t=e.stateNode,n=e.memoizedProps;try{for(var i=e.type,r=t.attributes;r.length;)t.removeAttributeNode(r[0]);Se(t,i,n),t[Ne]=e,t[qe]=n}catch(s){Mt(e,e.return,s)}}var Kn=!1,te=!1,ef=!1,yy=typeof WeakSet=="function"?WeakSet:Set,me=null;function h2(e,t){if(e=e.containerInfo,cd=gc,e=h0(e),um(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else t:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break t}var a=0,l=-1,u=-1,h=0,d=0,g=e,m=null;e:for(;;){for(var _;g!==n||r!==0&&g.nodeType!==3||(l=a+r),g!==s||i!==0&&g.nodeType!==3||(u=a+i),g.nodeType===3&&(a+=g.nodeValue.length),(_=g.firstChild)!==null;)m=g,g=_;for(;;){if(g===e)break e;if(m===n&&++h===r&&(l=a),m===s&&++d===i&&(u=a),(_=g.nextSibling)!==null)break;g=m,m=g.parentNode}g=_}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(hd={focusedElem:e,selectionRange:n},gc=!1,me=t;me!==null;)if(t=me,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,me=e;else for(;me!==null;){switch(t=me,s=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if(e&1024&&s!==null){e=void 0,n=t,r=s.memoizedProps,s=s.memoizedState,i=n.stateNode;try{var N=Qr(n.type,r,n.elementType===n.type);e=i.getSnapshotBeforeUpdate(N,s),i.__reactInternalSnapshotBeforeUpdate=e}catch(k){Mt(n,n.return,k)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)dd(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":dd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(L(163))}if(e=t.sibling,e!==null){e.return=t.return,me=e;break}me=t.return}}function wT(e,t,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:Ni(e,n),i&4&&hl(5,n);break;case 1:if(Ni(e,n),i&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(a){Mt(n,n.return,a)}else{var r=Qr(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(r,t,e.__reactInternalSnapshotBeforeUpdate)}catch(a){Mt(n,n.return,a)}}i&64&&TT(n),i&512&&To(n,n.return);break;case 3:if(Ni(e,n),i&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{R0(e,t)}catch(a){Mt(n,n.return,a)}}break;case 27:t===null&&i&4&&ST(n);case 26:case 5:Ni(e,n),t===null&&i&4&&AT(n),i&512&&To(n,n.return);break;case 12:Ni(e,n);break;case 13:Ni(e,n),i&4&&CT(e,n),i&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=T2.bind(null,n),U2(e,n))));break;case 22:if(i=n.memoizedState!==null||Kn,!i){t=t!==null&&t.memoizedState!==null||te,r=Kn;var s=te;Kn=i,(te=t)&&!s?ki(e,n,(n.subtreeFlags&8772)!==0):Ni(e,n),Kn=r,te=s}break;case 30:break;default:Ni(e,n)}}function RT(e){var t=e.alternate;t!==null&&(e.alternate=null,RT(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&im(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var jt=null,je=!1;function Qn(e,t,n){for(n=n.child;n!==null;)IT(e,t,n),n=n.sibling}function IT(e,t,n){if(Je&&typeof Je.onCommitFiberUnmount=="function")try{Je.onCommitFiberUnmount(tl,n)}catch{}switch(n.tag){case 26:te||Dn(n,t),Qn(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:te||Dn(n,t);var i=jt,r=je;vr(n.type)&&(jt=n.stateNode,je=!1),Qn(e,t,n),So(n.stateNode),jt=i,je=r;break;case 5:te||Dn(n,t);case 6:if(i=jt,r=je,jt=null,Qn(e,t,n),jt=i,je=r,jt!==null)if(je)try{(jt.nodeType===9?jt.body:jt.nodeName==="HTML"?jt.ownerDocument.body:jt).removeChild(n.stateNode)}catch(s){Mt(n,t,s)}else try{jt.removeChild(n.stateNode)}catch(s){Mt(n,t,s)}break;case 18:jt!==null&&(je?(e=jt,Dy(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),Fo(e)):Dy(jt,n.stateNode));break;case 4:i=jt,r=je,jt=n.stateNode.containerInfo,je=!0,Qn(e,t,n),jt=i,je=r;break;case 0:case 11:case 14:case 15:te||cr(2,n,t),te||cr(4,n,t),Qn(e,t,n);break;case 1:te||(Dn(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"&&ET(n,t,i)),Qn(e,t,n);break;case 21:Qn(e,t,n);break;case 22:te=(i=te)||n.memoizedState!==null,Qn(e,t,n),te=i;break;default:Qn(e,t,n)}}function CT(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Fo(e)}catch(n){Mt(t,t.return,n)}}function f2(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new yy),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new yy),t;default:throw Error(L(435,e.tag))}}function nf(e,t){var n=f2(e);t.forEach(function(i){var r=E2.bind(null,e,i);n.has(i)||(n.add(i),i.then(r,r))})}function Xe(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i],s=e,a=t,l=a;t:for(;l!==null;){switch(l.tag){case 27:if(vr(l.type)){jt=l.stateNode,je=!1;break t}break;case 5:jt=l.stateNode,je=!1;break t;case 3:case 4:jt=l.stateNode.containerInfo,je=!0;break t}l=l.return}if(jt===null)throw Error(L(160));IT(s,a,r),jt=null,je=!1,s=r.alternate,s!==null&&(s.return=null),r.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)DT(t,e),t=t.sibling}var _n=null;function DT(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Xe(t,e),$e(e),i&4&&(cr(3,e,e.return),hl(3,e),cr(5,e,e.return));break;case 1:Xe(t,e),$e(e),i&512&&(te||n===null||Dn(n,n.return)),i&64&&Kn&&(e=e.updateQueue,e!==null&&(i=e.callbacks,i!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var r=_n;if(Xe(t,e),$e(e),i&512&&(te||n===null||Dn(n,n.return)),i&4){var s=n!==null?n.memoizedState:null;if(i=e.memoizedState,n===null)if(i===null)if(e.stateNode===null){t:{i=e.type,n=e.memoizedProps,r=r.ownerDocument||r;e:switch(i){case"title":s=r.getElementsByTagName("title")[0],(!s||s[il]||s[Ne]||s.namespaceURI==="http://www.w3.org/2000/svg"||s.hasAttribute("itemprop"))&&(s=r.createElement(i),r.head.insertBefore(s,r.querySelector("head > title"))),Se(s,i,n),s[Ne]=e,ge(s),i=s;break t;case"link":var a=My("link","href",r).get(i+(n.href||""));if(a){for(var l=0;l<a.length;l++)if(s=a[l],s.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&s.getAttribute("rel")===(n.rel==null?null:n.rel)&&s.getAttribute("title")===(n.title==null?null:n.title)&&s.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){a.splice(l,1);break e}}s=r.createElement(i),Se(s,i,n),r.head.appendChild(s);break;case"meta":if(a=My("meta","content",r).get(i+(n.content||""))){for(l=0;l<a.length;l++)if(s=a[l],s.getAttribute("content")===(n.content==null?null:""+n.content)&&s.getAttribute("name")===(n.name==null?null:n.name)&&s.getAttribute("property")===(n.property==null?null:n.property)&&s.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&s.getAttribute("charset")===(n.charSet==null?null:n.charSet)){a.splice(l,1);break e}}s=r.createElement(i),Se(s,i,n),r.head.appendChild(s);break;default:throw Error(L(468,i))}s[Ne]=e,ge(s),i=s}e.stateNode=i}else Vy(r,e.type,e.stateNode);else e.stateNode=ky(r,i,e.memoizedProps);else s!==i?(s===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):s.count--,i===null?Vy(r,e.type,e.stateNode):ky(r,i,e.memoizedProps)):i===null&&e.stateNode!==null&&Jh(e,e.memoizedProps,n.memoizedProps)}break;case 27:Xe(t,e),$e(e),i&512&&(te||n===null||Dn(n,n.return)),n!==null&&i&4&&Jh(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Xe(t,e),$e(e),i&512&&(te||n===null||Dn(n,n.return)),e.flags&32){r=e.stateNode;try{Zs(r,"")}catch(_){Mt(e,e.return,_)}}i&4&&e.stateNode!=null&&(r=e.memoizedProps,Jh(e,r,n!==null?n.memoizedProps:r)),i&1024&&(ef=!0);break;case 6:if(Xe(t,e),$e(e),i&4){if(e.stateNode===null)throw Error(L(162));i=e.memoizedProps,n=e.stateNode;try{n.nodeValue=i}catch(_){Mt(e,e.return,_)}}break;case 3:if(Du=null,r=_n,_n=fc(t.containerInfo),Xe(t,e),_n=r,$e(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Fo(t.containerInfo)}catch(_){Mt(e,e.return,_)}ef&&(ef=!1,xT(e));break;case 4:i=_n,_n=fc(e.stateNode.containerInfo),Xe(t,e),$e(e),_n=i;break;case 12:Xe(t,e),$e(e);break;case 13:Xe(t,e),$e(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Pm=Nn()),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,nf(e,i)));break;case 22:r=e.memoizedState!==null;var u=n!==null&&n.memoizedState!==null,h=Kn,d=te;if(Kn=h||r,te=d||u,Xe(t,e),te=d,Kn=h,$e(e),i&8192)t:for(t=e.stateNode,t._visibility=r?t._visibility&-2:t._visibility|1,r&&(n===null||u||Kn||te||kr(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){u=n=t;try{if(s=u.stateNode,r)a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none";else{l=u.stateNode;var g=u.memoizedProps.style,m=g!=null&&g.hasOwnProperty("display")?g.display:null;l.style.display=m==null||typeof m=="boolean"?"":(""+m).trim()}}catch(_){Mt(u,u.return,_)}}}else if(t.tag===6){if(n===null){u=t;try{u.stateNode.nodeValue=r?"":u.memoizedProps}catch(_){Mt(u,u.return,_)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;t.sibling===null;){if(t.return===null||t.return===e)break t;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}i&4&&(i=e.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,nf(e,n))));break;case 19:Xe(t,e),$e(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,nf(e,i)));break;case 30:break;case 21:break;default:Xe(t,e),$e(e)}}function $e(e){var t=e.flags;if(t&2){try{for(var n,i=e.return;i!==null;){if(bT(i)){n=i;break}i=i.return}if(n==null)throw Error(L(160));switch(n.tag){case 27:var r=n.stateNode,s=tf(e);sc(e,s,r);break;case 5:var a=n.stateNode;n.flags&32&&(Zs(a,""),n.flags&=-33);var l=tf(e);sc(e,l,a);break;case 3:case 4:var u=n.stateNode.containerInfo,h=tf(e);nd(e,h,u);break;default:throw Error(L(161))}}catch(d){Mt(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function xT(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;xT(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Ni(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)wT(e,t.alternate,t),t=t.sibling}function kr(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:cr(4,t,t.return),kr(t);break;case 1:Dn(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&ET(t,t.return,n),kr(t);break;case 27:So(t.stateNode);case 26:case 5:Dn(t,t.return),kr(t);break;case 22:t.memoizedState===null&&kr(t);break;case 30:kr(t);break;default:kr(t)}e=e.sibling}}function ki(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var i=t.alternate,r=e,s=t,a=s.flags;switch(s.tag){case 0:case 11:case 15:ki(r,s,n),hl(4,s);break;case 1:if(ki(r,s,n),i=s,r=i.stateNode,typeof r.componentDidMount=="function")try{r.componentDidMount()}catch(h){Mt(i,i.return,h)}if(i=s,r=i.updateQueue,r!==null){var l=i.stateNode;try{var u=r.shared.hiddenCallbacks;if(u!==null)for(r.shared.hiddenCallbacks=null,r=0;r<u.length;r++)w0(u[r],l)}catch(h){Mt(i,i.return,h)}}n&&a&64&&TT(s),To(s,s.return);break;case 27:ST(s);case 26:case 5:ki(r,s,n),n&&i===null&&a&4&&AT(s),To(s,s.return);break;case 12:ki(r,s,n);break;case 13:ki(r,s,n),n&&a&4&&CT(r,s);break;case 22:s.memoizedState===null&&ki(r,s,n),To(s,s.return);break;case 30:break;default:ki(r,s,n)}t=t.sibling}}function Om(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&ol(n))}function km(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&ol(e))}function wn(e,t,n,i){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)NT(e,t,n,i),t=t.sibling}function NT(e,t,n,i){var r=t.flags;switch(t.tag){case 0:case 11:case 15:wn(e,t,n,i),r&2048&&hl(9,t);break;case 1:wn(e,t,n,i);break;case 3:wn(e,t,n,i),r&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&ol(e)));break;case 12:if(r&2048){wn(e,t,n,i),e=t.stateNode;try{var s=t.memoizedProps,a=s.id,l=s.onPostCommit;typeof l=="function"&&l(a,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(u){Mt(t,t.return,u)}}else wn(e,t,n,i);break;case 13:wn(e,t,n,i);break;case 23:break;case 22:s=t.stateNode,a=t.alternate,t.memoizedState!==null?s._visibility&2?wn(e,t,n,i):Eo(e,t):s._visibility&2?wn(e,t,n,i):(s._visibility|=2,_s(e,t,n,i,(t.subtreeFlags&10256)!==0)),r&2048&&Om(a,t);break;case 24:wn(e,t,n,i),r&2048&&km(t.alternate,t);break;default:wn(e,t,n,i)}}function _s(e,t,n,i,r){for(r=r&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var s=e,a=t,l=n,u=i,h=a.flags;switch(a.tag){case 0:case 11:case 15:_s(s,a,l,u,r),hl(8,a);break;case 23:break;case 22:var d=a.stateNode;a.memoizedState!==null?d._visibility&2?_s(s,a,l,u,r):Eo(s,a):(d._visibility|=2,_s(s,a,l,u,r)),r&&h&2048&&Om(a.alternate,a);break;case 24:_s(s,a,l,u,r),r&&h&2048&&km(a.alternate,a);break;default:_s(s,a,l,u,r)}t=t.sibling}}function Eo(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,i=t,r=i.flags;switch(i.tag){case 22:Eo(n,i),r&2048&&Om(i.alternate,i);break;case 24:Eo(n,i),r&2048&&km(i.alternate,i);break;default:Eo(n,i)}t=t.sibling}}var ro=8192;function ms(e){if(e.subtreeFlags&ro)for(e=e.child;e!==null;)OT(e),e=e.sibling}function OT(e){switch(e.tag){case 26:ms(e),e.flags&ro&&e.memoizedState!==null&&Z2(_n,e.memoizedState,e.memoizedProps);break;case 5:ms(e);break;case 3:case 4:var t=_n;_n=fc(e.stateNode.containerInfo),ms(e),_n=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=ro,ro=16777216,ms(e),ro=t):ms(e));break;default:ms(e)}}function kT(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Ja(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];me=i,VT(i,e)}kT(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)MT(e),e=e.sibling}function MT(e){switch(e.tag){case 0:case 11:case 15:Ja(e),e.flags&2048&&cr(9,e,e.return);break;case 3:Ja(e);break;case 12:Ja(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Iu(e)):Ja(e);break;default:Ja(e)}}function Iu(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];me=i,VT(i,e)}kT(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:cr(8,t,t.return),Iu(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,Iu(t));break;default:Iu(t)}e=e.sibling}}function VT(e,t){for(;me!==null;){var n=me;switch(n.tag){case 0:case 11:case 15:cr(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:ol(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,me=i;else t:for(n=e;me!==null;){i=me;var r=i.sibling,s=i.return;if(RT(i),i===n){me=null;break t}if(r!==null){r.return=s,me=r;break t}me=s}}}var d2={getCacheForType:function(e){var t=Oe(oe),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n}},m2=typeof WeakMap=="function"?WeakMap:Map,St=0,Vt=null,ct=null,gt=0,bt=0,Ze=null,Qi=!1,va=!1,Mm=!1,ci=0,$t=0,hr=0,Br=0,Vm=0,mn=0,na=0,Ao=null,ze=null,id=!1,Pm=0,ac=1/0,oc=null,Wi=null,Ae=0,Ji=null,ia=null,Fs=0,rd=0,sd=null,PT=null,bo=0,ad=null;function en(){if(St&2&&gt!==0)return gt&-gt;if(et.T!==null){var e=Ws;return e!==0?e:Um()}return Yv()}function LT(){mn===0&&(mn=!(gt&536870912)||_t?Hv():536870912);var e=gn.current;return e!==null&&(e.flags|=32),mn}function nn(e,t,n){(e===Vt&&(bt===2||bt===9)||e.cancelPendingCommit!==null)&&(ra(e,0),Yi(e,gt,mn,!1)),nl(e,n),(!(St&2)||e!==Vt)&&(e===Vt&&(!(St&2)&&(Br|=n),$t===4&&Yi(e,gt,mn,!1)),zn(e))}function UT(e,t,n){if(St&6)throw Error(L(327));var i=!n&&(t&124)===0&&(t&e.expiredLanes)===0||el(e,t),r=i?y2(e,t):rf(e,t,!0),s=i;do{if(r===0){va&&!i&&Yi(e,t,0,!1);break}else{if(n=e.current.alternate,s&&!g2(n)){r=rf(e,t,!1),s=!1;continue}if(r===2){if(s=t,e.errorRecoveryDisabledLanes&s)var a=0;else a=e.pendingLanes&-536870913,a=a!==0?a:a&536870912?536870912:0;if(a!==0){t=a;t:{var l=e;r=Ao;var u=l.current.memoizedState.isDehydrated;if(u&&(ra(l,a).flags|=256),a=rf(l,a,!1),a!==2){if(Mm&&!u){l.errorRecoveryDisabledLanes|=s,Br|=s,r=4;break t}s=ze,ze=r,s!==null&&(ze===null?ze=s:ze.push.apply(ze,s))}r=a}if(s=!1,r!==2)continue}}if(r===1){ra(e,0),Yi(e,t,0,!0);break}t:{switch(i=e,s=r,s){case 0:case 1:throw Error(L(345));case 4:if((t&4194048)!==t)break;case 6:Yi(i,t,mn,!Qi);break t;case 2:ze=null;break;case 3:case 5:break;default:throw Error(L(329))}if((t&62914560)===t&&(r=Pm+300-Nn(),10<r)){if(Yi(i,t,mn,!Qi),zc(i,0,!0)!==0)break t;i.timeoutHandle=iE(_y.bind(null,i,n,ze,oc,id,t,mn,Br,na,Qi,s,2,-0,0),r);break t}_y(i,n,ze,oc,id,t,mn,Br,na,Qi,s,0,-0,0)}}break}while(!0);zn(e)}function _y(e,t,n,i,r,s,a,l,u,h,d,g,m,_){if(e.timeoutHandle=-1,g=t.subtreeFlags,(g&8192||(g&16785408)===16785408)&&(zo={stylesheets:null,count:0,unsuspend:$2},OT(t),g=W2(),g!==null)){e.cancelPendingCommit=g(Ty.bind(null,e,t,s,n,i,r,a,l,u,d,1,m,_)),Yi(e,s,a,!h);return}Ty(e,t,s,n,i,r,a,l,u)}function g2(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!rn(s(),r))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Yi(e,t,n,i){t&=~Vm,t&=~Br,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var r=t;0<r;){var s=31-tn(r),a=1<<s;i[s]=-1,r&=~a}n!==0&&Gv(e,n,t)}function $c(){return St&6?!0:(fl(0),!1)}function Lm(){if(ct!==null){if(bt===0)var e=ct.return;else e=ct,Jn=es=null,bm(e),Hs=null,Lo=0,e=ct;for(;e!==null;)vT(e.alternate,e),e=e.return;ct=null}}function ra(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,k2(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),Lm(),Vt=e,ct=n=ii(e.current,null),gt=t,bt=0,Ze=null,Qi=!1,va=el(e,t),Mm=!1,na=mn=Vm=Br=hr=$t=0,ze=Ao=null,id=!1,t&8&&(t|=t&32);var i=e.entangledLanes;if(i!==0)for(e=e.entanglements,i&=t;0<i;){var r=31-tn(i),s=1<<r;t|=e[r],i&=~s}return ci=t,Fc(),n}function jT(e,t){ot=null,et.H=tc,t===ll||t===Qc?(t=$p(),bt=3):t===b0?(t=$p(),bt=4):bt=t===dT?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Ze=t,ct===null&&($t=1,ic(e,hn(t,e.current)))}function zT(){var e=et.H;return et.H=tc,e===null?tc:e}function BT(){var e=et.A;return et.A=d2,e}function od(){$t=4,Qi||(gt&4194048)!==gt&&gn.current!==null||(va=!0),!(hr&134217727)&&!(Br&134217727)||Vt===null||Yi(Vt,gt,mn,!1)}function rf(e,t,n){var i=St;St|=2;var r=zT(),s=BT();(Vt!==e||gt!==t)&&(oc=null,ra(e,t)),t=!1;var a=$t;t:do try{if(bt!==0&&ct!==null){var l=ct,u=Ze;switch(bt){case 8:Lm(),a=6;break t;case 3:case 2:case 9:case 6:gn.current===null&&(t=!0);var h=bt;if(bt=0,Ze=null,Vs(e,l,u,h),n&&va){a=0;break t}break;default:h=bt,bt=0,Ze=null,Vs(e,l,u,h)}}p2(),a=$t;break}catch(d){jT(e,d)}while(!0);return t&&e.shellSuspendCounter++,Jn=es=null,St=i,et.H=r,et.A=s,ct===null&&(Vt=null,gt=0,Fc()),a}function p2(){for(;ct!==null;)qT(ct)}function y2(e,t){var n=St;St|=2;var i=zT(),r=BT();Vt!==e||gt!==t?(oc=null,ac=Nn()+500,ra(e,t)):va=el(e,t);t:do try{if(bt!==0&&ct!==null){t=ct;var s=Ze;e:switch(bt){case 1:bt=0,Ze=null,Vs(e,t,s,1);break;case 2:case 9:if(Xp(s)){bt=0,Ze=null,vy(t);break}t=function(){bt!==2&&bt!==9||Vt!==e||(bt=7),zn(e)},s.then(t,t);break t;case 3:bt=7;break t;case 4:bt=5;break t;case 7:Xp(s)?(bt=0,Ze=null,vy(t)):(bt=0,Ze=null,Vs(e,t,s,7));break;case 5:var a=null;switch(ct.tag){case 26:a=ct.memoizedState;case 5:case 27:var l=ct;if(!a||oE(a)){bt=0,Ze=null;var u=l.sibling;if(u!==null)ct=u;else{var h=l.return;h!==null?(ct=h,Zc(h)):ct=null}break e}}bt=0,Ze=null,Vs(e,t,s,5);break;case 6:bt=0,Ze=null,Vs(e,t,s,6);break;case 8:Lm(),$t=6;break t;default:throw Error(L(462))}}_2();break}catch(d){jT(e,d)}while(!0);return Jn=es=null,et.H=i,et.A=r,St=n,ct!==null?0:(Vt=null,gt=0,Fc(),$t)}function _2(){for(;ct!==null&&!zb();)qT(ct)}function qT(e){var t=_T(e.alternate,e,ci);e.memoizedProps=e.pendingProps,t===null?Zc(e):ct=t}function vy(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=fy(n,t,t.pendingProps,t.type,void 0,gt);break;case 11:t=fy(n,t,t.pendingProps,t.type.render,t.ref,gt);break;case 5:bm(t);default:vT(n,t),t=ct=v0(t,ci),t=_T(n,t,ci)}e.memoizedProps=e.pendingProps,t===null?Zc(e):ct=t}function Vs(e,t,n,i){Jn=es=null,bm(t),Hs=null,Lo=0;var r=t.return;try{if(o2(e,r,t,n,gt)){$t=1,ic(e,hn(n,e.current)),ct=null;return}}catch(s){if(r!==null)throw ct=r,s;$t=1,ic(e,hn(n,e.current)),ct=null;return}t.flags&32768?(_t||i===1?e=!0:va||gt&536870912?e=!1:(Qi=e=!0,(i===2||i===9||i===3||i===6)&&(i=gn.current,i!==null&&i.tag===13&&(i.flags|=16384))),HT(t,e)):Zc(t)}function Zc(e){var t=e;do{if(t.flags&32768){HT(t,Qi);return}e=t.return;var n=u2(t.alternate,t,ci);if(n!==null){ct=n;return}if(t=t.sibling,t!==null){ct=t;return}ct=t=e}while(t!==null);$t===0&&($t=5)}function HT(e,t){do{var n=c2(e.alternate,e);if(n!==null){n.flags&=32767,ct=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){ct=e;return}ct=e=n}while(e!==null);$t=6,ct=null}function Ty(e,t,n,i,r,s,a,l,u){e.cancelPendingCommit=null;do Wc();while(Ae!==0);if(St&6)throw Error(L(327));if(t!==null){if(t===e.current)throw Error(L(177));if(s=t.lanes|t.childLanes,s|=cm,$b(e,n,s,a,l,u),e===Vt&&(ct=Vt=null,gt=0),ia=t,Ji=e,Fs=n,rd=s,sd=r,PT=i,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,A2(Fu,function(){return KT(),null})):(e.callbackNode=null,e.callbackPriority=0),i=(t.flags&13878)!==0,t.subtreeFlags&13878||i){i=et.T,et.T=null,r=vt.p,vt.p=2,a=St,St|=4;try{h2(e,t,n)}finally{St=a,vt.p=r,et.T=i}}Ae=1,FT(),GT(),QT()}}function FT(){if(Ae===1){Ae=0;var e=Ji,t=ia,n=(t.flags&13878)!==0;if(t.subtreeFlags&13878||n){n=et.T,et.T=null;var i=vt.p;vt.p=2;var r=St;St|=4;try{DT(t,e);var s=hd,a=h0(e.containerInfo),l=s.focusedElem,u=s.selectionRange;if(a!==l&&l&&l.ownerDocument&&c0(l.ownerDocument.documentElement,l)){if(u!==null&&um(l)){var h=u.start,d=u.end;if(d===void 0&&(d=h),"selectionStart"in l)l.selectionStart=h,l.selectionEnd=Math.min(d,l.value.length);else{var g=l.ownerDocument||document,m=g&&g.defaultView||window;if(m.getSelection){var _=m.getSelection(),N=l.textContent.length,k=Math.min(u.start,N),V=u.end===void 0?k:Math.min(u.end,N);!_.extend&&k>V&&(a=V,V=k,k=a);var w=Bp(l,k),v=Bp(l,V);if(w&&v&&(_.rangeCount!==1||_.anchorNode!==w.node||_.anchorOffset!==w.offset||_.focusNode!==v.node||_.focusOffset!==v.offset)){var R=g.createRange();R.setStart(w.node,w.offset),_.removeAllRanges(),k>V?(_.addRange(R),_.extend(v.node,v.offset)):(R.setEnd(v.node,v.offset),_.addRange(R))}}}}for(g=[],_=l;_=_.parentNode;)_.nodeType===1&&g.push({element:_,left:_.scrollLeft,top:_.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<g.length;l++){var x=g[l];x.element.scrollLeft=x.left,x.element.scrollTop=x.top}}gc=!!cd,hd=cd=null}finally{St=r,vt.p=i,et.T=n}}e.current=t,Ae=2}}function GT(){if(Ae===2){Ae=0;var e=Ji,t=ia,n=(t.flags&8772)!==0;if(t.subtreeFlags&8772||n){n=et.T,et.T=null;var i=vt.p;vt.p=2;var r=St;St|=4;try{wT(e,t.alternate,t)}finally{St=r,vt.p=i,et.T=n}}Ae=3}}function QT(){if(Ae===4||Ae===3){Ae=0,Bb();var e=Ji,t=ia,n=Fs,i=PT;t.subtreeFlags&10256||t.flags&10256?Ae=5:(Ae=0,ia=Ji=null,YT(e,e.pendingLanes));var r=e.pendingLanes;if(r===0&&(Wi=null),nm(n),t=t.stateNode,Je&&typeof Je.onCommitFiberRoot=="function")try{Je.onCommitFiberRoot(tl,t,void 0,(t.current.flags&128)===128)}catch{}if(i!==null){t=et.T,r=vt.p,vt.p=2,et.T=null;try{for(var s=e.onRecoverableError,a=0;a<i.length;a++){var l=i[a];s(l.value,{componentStack:l.stack})}}finally{et.T=t,vt.p=r}}Fs&3&&Wc(),zn(e),r=e.pendingLanes,n&4194090&&r&42?e===ad?bo++:(bo=0,ad=e):bo=0,fl(0)}}function YT(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,ol(t)))}function Wc(e){return FT(),GT(),QT(),KT()}function KT(){if(Ae!==5)return!1;var e=Ji,t=rd;rd=0;var n=nm(Fs),i=et.T,r=vt.p;try{vt.p=32>n?32:n,et.T=null,n=sd,sd=null;var s=Ji,a=Fs;if(Ae=0,ia=Ji=null,Fs=0,St&6)throw Error(L(331));var l=St;if(St|=4,MT(s.current),NT(s,s.current,a,n),St=l,fl(0,!1),Je&&typeof Je.onPostCommitFiberRoot=="function")try{Je.onPostCommitFiberRoot(tl,s)}catch{}return!0}finally{vt.p=r,et.T=i,YT(e,t)}}function Ey(e,t,n){t=hn(n,t),t=Jf(e.stateNode,t,2),e=Zi(e,t,2),e!==null&&(nl(e,2),zn(e))}function Mt(e,t,n){if(e.tag===3)Ey(e,e,n);else for(;t!==null;){if(t.tag===3){Ey(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Wi===null||!Wi.has(i))){e=hn(n,e),n=hT(2),i=Zi(t,n,2),i!==null&&(fT(n,i,t,e),nl(i,2),zn(i));break}}t=t.return}}function sf(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new m2;var r=new Set;i.set(t,r)}else r=i.get(t),r===void 0&&(r=new Set,i.set(t,r));r.has(n)||(Mm=!0,r.add(n),e=v2.bind(null,e,t,n),t.then(e,e))}function v2(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,Vt===e&&(gt&n)===n&&($t===4||$t===3&&(gt&62914560)===gt&&300>Nn()-Pm?!(St&2)&&ra(e,0):Vm|=n,na===gt&&(na=0)),zn(e)}function XT(e,t){t===0&&(t=Fv()),e=_a(e,t),e!==null&&(nl(e,t),zn(e))}function T2(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),XT(e,n)}function E2(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,r=e.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(L(314))}i!==null&&i.delete(t),XT(e,n)}function A2(e,t){return tm(e,t)}var lc=null,vs=null,ld=!1,uc=!1,af=!1,qr=0;function zn(e){e!==vs&&e.next===null&&(vs===null?lc=vs=e:vs=vs.next=e),uc=!0,ld||(ld=!0,S2())}function fl(e,t){if(!af&&uc){af=!0;do for(var n=!1,i=lc;i!==null;){if(e!==0){var r=i.pendingLanes;if(r===0)var s=0;else{var a=i.suspendedLanes,l=i.pingedLanes;s=(1<<31-tn(42|e)+1)-1,s&=r&~(a&~l),s=s&201326741?s&201326741|1:s?s|2:0}s!==0&&(n=!0,Ay(i,s))}else s=gt,s=zc(i,i===Vt?s:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),!(s&3)||el(i,s)||(n=!0,Ay(i,s));i=i.next}while(n);af=!1}}function b2(){$T()}function $T(){uc=ld=!1;var e=0;qr!==0&&(O2()&&(e=qr),qr=0);for(var t=Nn(),n=null,i=lc;i!==null;){var r=i.next,s=ZT(i,t);s===0?(i.next=null,n===null?lc=r:n.next=r,r===null&&(vs=n)):(n=i,(e!==0||s&3)&&(uc=!0)),i=r}fl(e)}function ZT(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,s=e.pendingLanes&-62914561;0<s;){var a=31-tn(s),l=1<<a,u=r[a];u===-1?(!(l&n)||l&i)&&(r[a]=Xb(l,t)):u<=t&&(e.expiredLanes|=l),s&=~l}if(t=Vt,n=gt,n=zc(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i=e.callbackNode,n===0||e===t&&(bt===2||bt===9)||e.cancelPendingCommit!==null)return i!==null&&i!==null&&Nh(i),e.callbackNode=null,e.callbackPriority=0;if(!(n&3)||el(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(i!==null&&Nh(i),nm(n)){case 2:case 8:n=Bv;break;case 32:n=Fu;break;case 268435456:n=qv;break;default:n=Fu}return i=WT.bind(null,e),n=tm(n,i),e.callbackPriority=t,e.callbackNode=n,t}return i!==null&&i!==null&&Nh(i),e.callbackPriority=2,e.callbackNode=null,2}function WT(e,t){if(Ae!==0&&Ae!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(Wc()&&e.callbackNode!==n)return null;var i=gt;return i=zc(e,e===Vt?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i===0?null:(UT(e,i,t),ZT(e,Nn()),e.callbackNode!=null&&e.callbackNode===n?WT.bind(null,e):null)}function Ay(e,t){if(Wc())return null;UT(e,t,!0)}function S2(){M2(function(){St&6?tm(zv,b2):$T()})}function Um(){return qr===0&&(qr=Hv()),qr}function by(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:vu(""+e)}function Sy(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function w2(e,t,n,i,r){if(t==="submit"&&n&&n.stateNode===r){var s=by((r[qe]||null).action),a=i.submitter;a&&(t=(t=a[qe]||null)?by(t.formAction):a.getAttribute("formAction"),t!==null&&(s=t,a=null));var l=new Bc("action","action",null,i,r);e.push({event:l,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(qr!==0){var u=a?Sy(r,a):new FormData(r);Zf(n,{pending:!0,data:u,method:r.method,action:s},null,u)}}else typeof s=="function"&&(l.preventDefault(),u=a?Sy(r,a):new FormData(r),Zf(n,{pending:!0,data:u,method:r.method,action:s},s,u))},currentTarget:r}]})}}for(var of=0;of<jf.length;of++){var lf=jf[of],R2=lf.toLowerCase(),I2=lf[0].toUpperCase()+lf.slice(1);bn(R2,"on"+I2)}bn(d0,"onAnimationEnd");bn(m0,"onAnimationIteration");bn(g0,"onAnimationStart");bn("dblclick","onDoubleClick");bn("focusin","onFocus");bn("focusout","onBlur");bn(FS,"onTransitionRun");bn(GS,"onTransitionStart");bn(QS,"onTransitionCancel");bn(p0,"onTransitionEnd");$s("onMouseEnter",["mouseout","mouseover"]);$s("onMouseLeave",["mouseout","mouseover"]);$s("onPointerEnter",["pointerout","pointerover"]);$s("onPointerLeave",["pointerout","pointerover"]);Wr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Wr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Wr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Wr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Wr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Wr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Uo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),C2=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Uo));function JT(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;t:{var s=void 0;if(t)for(var a=i.length-1;0<=a;a--){var l=i[a],u=l.instance,h=l.currentTarget;if(l=l.listener,u!==s&&r.isPropagationStopped())break t;s=l,r.currentTarget=h;try{s(r)}catch(d){nc(d)}r.currentTarget=null,s=u}else for(a=0;a<i.length;a++){if(l=i[a],u=l.instance,h=l.currentTarget,l=l.listener,u!==s&&r.isPropagationStopped())break t;s=l,r.currentTarget=h;try{s(r)}catch(d){nc(d)}r.currentTarget=null,s=u}}}}function ut(e,t){var n=t[Of];n===void 0&&(n=t[Of]=new Set);var i=e+"__bubble";n.has(i)||(tE(t,e,2,!1),n.add(i))}function uf(e,t,n){var i=0;t&&(i|=4),tE(n,e,i,t)}var au="_reactListening"+Math.random().toString(36).slice(2);function jm(e){if(!e[au]){e[au]=!0,Kv.forEach(function(n){n!=="selectionchange"&&(C2.has(n)||uf(n,!1,e),uf(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[au]||(t[au]=!0,uf("selectionchange",!1,t))}}function tE(e,t,n,i){switch(fE(t)){case 2:var r=ew;break;case 8:r=nw;break;default:r=Hm}n=r.bind(null,t,n,e),r=void 0,!Pf||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(r=!0),i?r!==void 0?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):r!==void 0?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function cf(e,t,n,i,r){var s=i;if(!(t&1)&&!(t&2)&&i!==null)t:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var l=i.stateNode.containerInfo;if(l===r)break;if(a===4)for(a=i.return;a!==null;){var u=a.tag;if((u===3||u===4)&&a.stateNode.containerInfo===r)return;a=a.return}for(;l!==null;){if(a=Rs(l),a===null)return;if(u=a.tag,u===5||u===6||u===26||u===27){i=s=a;continue t}l=l.parentNode}}i=i.return}n0(function(){var h=s,d=sm(n),g=[];t:{var m=y0.get(e);if(m!==void 0){var _=Bc,N=e;switch(e){case"keypress":if(Eu(n)===0)break t;case"keydown":case"keyup":_=AS;break;case"focusin":N="focus",_=jh;break;case"focusout":N="blur",_=jh;break;case"beforeblur":case"afterblur":_=jh;break;case"click":if(n.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=Np;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=cS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=wS;break;case d0:case m0:case g0:_=dS;break;case p0:_=IS;break;case"scroll":case"scrollend":_=lS;break;case"wheel":_=DS;break;case"copy":case"cut":case"paste":_=gS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=kp;break;case"toggle":case"beforetoggle":_=NS}var k=(t&4)!==0,V=!k&&(e==="scroll"||e==="scrollend"),w=k?m!==null?m+"Capture":null:m;k=[];for(var v=h,R;v!==null;){var x=v;if(R=x.stateNode,x=x.tag,x!==5&&x!==26&&x!==27||R===null||w===null||(x=Oo(v,w),x!=null&&k.push(jo(v,x,R))),V)break;v=v.return}0<k.length&&(m=new _(m,N,null,n,d),g.push({event:m,listeners:k}))}}if(!(t&7)){t:{if(m=e==="mouseover"||e==="pointerover",_=e==="mouseout"||e==="pointerout",m&&n!==Vf&&(N=n.relatedTarget||n.fromElement)&&(Rs(N)||N[pa]))break t;if((_||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,_?(N=n.relatedTarget||n.toElement,_=h,N=N?Rs(N):null,N!==null&&(V=Jo(N),k=N.tag,N!==V||k!==5&&k!==27&&k!==6)&&(N=null)):(_=null,N=h),_!==N)){if(k=Np,x="onMouseLeave",w="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(k=kp,x="onPointerLeave",w="onPointerEnter",v="pointer"),V=_==null?m:io(_),R=N==null?m:io(N),m=new k(x,v+"leave",_,n,d),m.target=V,m.relatedTarget=R,x=null,Rs(d)===h&&(k=new k(w,v+"enter",N,n,d),k.target=R,k.relatedTarget=V,x=k),V=x,_&&N)e:{for(k=_,w=N,v=0,R=k;R;R=gs(R))v++;for(R=0,x=w;x;x=gs(x))R++;for(;0<v-R;)k=gs(k),v--;for(;0<R-v;)w=gs(w),R--;for(;v--;){if(k===w||w!==null&&k===w.alternate)break e;k=gs(k),w=gs(w)}k=null}else k=null;_!==null&&wy(g,m,_,k,!1),N!==null&&V!==null&&wy(g,V,N,k,!0)}}t:{if(m=h?io(h):window,_=m.nodeName&&m.nodeName.toLowerCase(),_==="select"||_==="input"&&m.type==="file")var j=Lp;else if(Pp(m))if(l0)j=BS;else{j=jS;var H=US}else _=m.nodeName,!_||_.toLowerCase()!=="input"||m.type!=="checkbox"&&m.type!=="radio"?h&&rm(h.elementType)&&(j=Lp):j=zS;if(j&&(j=j(e,h))){o0(g,j,n,d);break t}H&&H(e,m,h),e==="focusout"&&h&&m.type==="number"&&h.memoizedProps.value!=null&&Mf(m,"number",m.value)}switch(H=h?io(h):window,e){case"focusin":(Pp(H)||H.contentEditable==="true")&&(Ds=H,Lf=h,fo=null);break;case"focusout":fo=Lf=Ds=null;break;case"mousedown":Uf=!0;break;case"contextmenu":case"mouseup":case"dragend":Uf=!1,qp(g,n,d);break;case"selectionchange":if(HS)break;case"keydown":case"keyup":qp(g,n,d)}var E;if(lm)t:{switch(e){case"compositionstart":var y="onCompositionStart";break t;case"compositionend":y="onCompositionEnd";break t;case"compositionupdate":y="onCompositionUpdate";break t}y=void 0}else Cs?s0(e,n)&&(y="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(r0&&n.locale!=="ko"&&(Cs||y!=="onCompositionStart"?y==="onCompositionEnd"&&Cs&&(E=i0()):(Gi=d,am="value"in Gi?Gi.value:Gi.textContent,Cs=!0)),H=cc(h,y),0<H.length&&(y=new Op(y,e,null,n,d),g.push({event:y,listeners:H}),E?y.data=E:(E=a0(n),E!==null&&(y.data=E)))),(E=kS?MS(e,n):VS(e,n))&&(y=cc(h,"onBeforeInput"),0<y.length&&(H=new Op("onBeforeInput","beforeinput",null,n,d),g.push({event:H,listeners:y}),H.data=E)),w2(g,e,h,n,d)}JT(g,t)})}function jo(e,t,n){return{instance:e,listener:t,currentTarget:n}}function cc(e,t){for(var n=t+"Capture",i=[];e!==null;){var r=e,s=r.stateNode;if(r=r.tag,r!==5&&r!==26&&r!==27||s===null||(r=Oo(e,n),r!=null&&i.unshift(jo(e,r,s)),r=Oo(e,t),r!=null&&i.push(jo(e,r,s))),e.tag===3)return i;e=e.return}return[]}function gs(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function wy(e,t,n,i,r){for(var s=t._reactName,a=[];n!==null&&n!==i;){var l=n,u=l.alternate,h=l.stateNode;if(l=l.tag,u!==null&&u===i)break;l!==5&&l!==26&&l!==27||h===null||(u=h,r?(h=Oo(n,s),h!=null&&a.unshift(jo(n,h,u))):r||(h=Oo(n,s),h!=null&&a.push(jo(n,h,u)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var D2=/\r\n?/g,x2=/\u0000|\uFFFD/g;function Ry(e){return(typeof e=="string"?e:""+e).replace(D2,`
`).replace(x2,"")}function eE(e,t){return t=Ry(t),Ry(e)===t}function Jc(){}function It(e,t,n,i,r,s){switch(n){case"children":typeof i=="string"?t==="body"||t==="textarea"&&i===""||Zs(e,i):(typeof i=="number"||typeof i=="bigint")&&t!=="body"&&Zs(e,""+i);break;case"className":Jl(e,"class",i);break;case"tabIndex":Jl(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":Jl(e,n,i);break;case"style":e0(e,i,s);break;case"data":if(t!=="object"){Jl(e,"data",i);break}case"src":case"href":if(i===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=vu(""+i),e.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof s=="function"&&(n==="formAction"?(t!=="input"&&It(e,t,"name",r.name,r,null),It(e,t,"formEncType",r.formEncType,r,null),It(e,t,"formMethod",r.formMethod,r,null),It(e,t,"formTarget",r.formTarget,r,null)):(It(e,t,"encType",r.encType,r,null),It(e,t,"method",r.method,r,null),It(e,t,"target",r.target,r,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=vu(""+i),e.setAttribute(n,i);break;case"onClick":i!=null&&(e.onclick=Jc);break;case"onScroll":i!=null&&ut("scroll",e);break;case"onScrollEnd":i!=null&&ut("scrollend",e);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(L(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(L(60));e.innerHTML=n}}break;case"multiple":e.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":e.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){e.removeAttribute("xlink:href");break}n=vu(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""+i):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":i===!0?e.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,i):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?e.setAttribute(n,i):e.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?e.removeAttribute(n):e.setAttribute(n,i);break;case"popover":ut("beforetoggle",e),ut("toggle",e),_u(e,"popover",i);break;case"xlinkActuate":Fn(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":Fn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":Fn(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":Fn(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":Fn(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":Fn(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":Fn(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":Fn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":Fn(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":_u(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=aS.get(n)||n,_u(e,n,i))}}function ud(e,t,n,i,r,s){switch(n){case"style":e0(e,i,s);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(L(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(L(60));e.innerHTML=n}}break;case"children":typeof i=="string"?Zs(e,i):(typeof i=="number"||typeof i=="bigint")&&Zs(e,""+i);break;case"onScroll":i!=null&&ut("scroll",e);break;case"onScrollEnd":i!=null&&ut("scrollend",e);break;case"onClick":i!=null&&(e.onclick=Jc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Xv.hasOwnProperty(n))t:{if(n[0]==="o"&&n[1]==="n"&&(r=n.endsWith("Capture"),t=n.slice(2,r?n.length-7:void 0),s=e[qe]||null,s=s!=null?s[n]:null,typeof s=="function"&&e.removeEventListener(t,s,r),typeof i=="function")){typeof s!="function"&&s!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,i,r);break t}n in e?e[n]=i:i===!0?e.setAttribute(n,""):_u(e,n,i)}}}function Se(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ut("error",e),ut("load",e);var i=!1,r=!1,s;for(s in n)if(n.hasOwnProperty(s)){var a=n[s];if(a!=null)switch(s){case"src":i=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(L(137,t));default:It(e,t,s,a,n,null)}}r&&It(e,t,"srcSet",n.srcSet,n,null),i&&It(e,t,"src",n.src,n,null);return;case"input":ut("invalid",e);var l=s=a=r=null,u=null,h=null;for(i in n)if(n.hasOwnProperty(i)){var d=n[i];if(d!=null)switch(i){case"name":r=d;break;case"type":a=d;break;case"checked":u=d;break;case"defaultChecked":h=d;break;case"value":s=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(d!=null)throw Error(L(137,t));break;default:It(e,t,i,d,n,null)}}Wv(e,s,l,u,h,a,r,!1),Gu(e);return;case"select":ut("invalid",e),i=a=s=null;for(r in n)if(n.hasOwnProperty(r)&&(l=n[r],l!=null))switch(r){case"value":s=l;break;case"defaultValue":a=l;break;case"multiple":i=l;default:It(e,t,r,l,n,null)}t=s,n=a,e.multiple=!!i,t!=null?Us(e,!!i,t,!1):n!=null&&Us(e,!!i,n,!0);return;case"textarea":ut("invalid",e),s=r=i=null;for(a in n)if(n.hasOwnProperty(a)&&(l=n[a],l!=null))switch(a){case"value":i=l;break;case"defaultValue":r=l;break;case"children":s=l;break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(L(91));break;default:It(e,t,a,l,n,null)}t0(e,i,r,s),Gu(e);return;case"option":for(u in n)if(n.hasOwnProperty(u)&&(i=n[u],i!=null))switch(u){case"selected":e.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:It(e,t,u,i,n,null)}return;case"dialog":ut("beforetoggle",e),ut("toggle",e),ut("cancel",e),ut("close",e);break;case"iframe":case"object":ut("load",e);break;case"video":case"audio":for(i=0;i<Uo.length;i++)ut(Uo[i],e);break;case"image":ut("error",e),ut("load",e);break;case"details":ut("toggle",e);break;case"embed":case"source":case"link":ut("error",e),ut("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(h in n)if(n.hasOwnProperty(h)&&(i=n[h],i!=null))switch(h){case"children":case"dangerouslySetInnerHTML":throw Error(L(137,t));default:It(e,t,h,i,n,null)}return;default:if(rm(t)){for(d in n)n.hasOwnProperty(d)&&(i=n[d],i!==void 0&&ud(e,t,d,i,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(i=n[l],i!=null&&It(e,t,l,i,n,null))}function N2(e,t,n,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,s=null,a=null,l=null,u=null,h=null,d=null;for(_ in n){var g=n[_];if(n.hasOwnProperty(_)&&g!=null)switch(_){case"checked":break;case"value":break;case"defaultValue":u=g;default:i.hasOwnProperty(_)||It(e,t,_,null,i,g)}}for(var m in i){var _=i[m];if(g=n[m],i.hasOwnProperty(m)&&(_!=null||g!=null))switch(m){case"type":s=_;break;case"name":r=_;break;case"checked":h=_;break;case"defaultChecked":d=_;break;case"value":a=_;break;case"defaultValue":l=_;break;case"children":case"dangerouslySetInnerHTML":if(_!=null)throw Error(L(137,t));break;default:_!==g&&It(e,t,m,_,i,g)}}kf(e,a,l,u,h,d,s,r);return;case"select":_=a=l=m=null;for(s in n)if(u=n[s],n.hasOwnProperty(s)&&u!=null)switch(s){case"value":break;case"multiple":_=u;default:i.hasOwnProperty(s)||It(e,t,s,null,i,u)}for(r in i)if(s=i[r],u=n[r],i.hasOwnProperty(r)&&(s!=null||u!=null))switch(r){case"value":m=s;break;case"defaultValue":l=s;break;case"multiple":a=s;default:s!==u&&It(e,t,r,s,i,u)}t=l,n=a,i=_,m!=null?Us(e,!!n,m,!1):!!i!=!!n&&(t!=null?Us(e,!!n,t,!0):Us(e,!!n,n?[]:"",!1));return;case"textarea":_=m=null;for(l in n)if(r=n[l],n.hasOwnProperty(l)&&r!=null&&!i.hasOwnProperty(l))switch(l){case"value":break;case"children":break;default:It(e,t,l,null,i,r)}for(a in i)if(r=i[a],s=n[a],i.hasOwnProperty(a)&&(r!=null||s!=null))switch(a){case"value":m=r;break;case"defaultValue":_=r;break;case"children":break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(L(91));break;default:r!==s&&It(e,t,a,r,i,s)}Jv(e,m,_);return;case"option":for(var N in n)if(m=n[N],n.hasOwnProperty(N)&&m!=null&&!i.hasOwnProperty(N))switch(N){case"selected":e.selected=!1;break;default:It(e,t,N,null,i,m)}for(u in i)if(m=i[u],_=n[u],i.hasOwnProperty(u)&&m!==_&&(m!=null||_!=null))switch(u){case"selected":e.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:It(e,t,u,m,i,_)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var k in n)m=n[k],n.hasOwnProperty(k)&&m!=null&&!i.hasOwnProperty(k)&&It(e,t,k,null,i,m);for(h in i)if(m=i[h],_=n[h],i.hasOwnProperty(h)&&m!==_&&(m!=null||_!=null))switch(h){case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(L(137,t));break;default:It(e,t,h,m,i,_)}return;default:if(rm(t)){for(var V in n)m=n[V],n.hasOwnProperty(V)&&m!==void 0&&!i.hasOwnProperty(V)&&ud(e,t,V,void 0,i,m);for(d in i)m=i[d],_=n[d],!i.hasOwnProperty(d)||m===_||m===void 0&&_===void 0||ud(e,t,d,m,i,_);return}}for(var w in n)m=n[w],n.hasOwnProperty(w)&&m!=null&&!i.hasOwnProperty(w)&&It(e,t,w,null,i,m);for(g in i)m=i[g],_=n[g],!i.hasOwnProperty(g)||m===_||m==null&&_==null||It(e,t,g,m,i,_)}var cd=null,hd=null;function hc(e){return e.nodeType===9?e:e.ownerDocument}function Iy(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function nE(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function fd(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var hf=null;function O2(){var e=window.event;return e&&e.type==="popstate"?e===hf?!1:(hf=e,!0):(hf=null,!1)}var iE=typeof setTimeout=="function"?setTimeout:void 0,k2=typeof clearTimeout=="function"?clearTimeout:void 0,Cy=typeof Promise=="function"?Promise:void 0,M2=typeof queueMicrotask=="function"?queueMicrotask:typeof Cy<"u"?function(e){return Cy.resolve(null).then(e).catch(V2)}:iE;function V2(e){setTimeout(function(){throw e})}function vr(e){return e==="head"}function Dy(e,t){var n=t,i=0,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(0<i&&8>i){n=i;var a=e.ownerDocument;if(n&1&&So(a.documentElement),n&2&&So(a.body),n&4)for(n=a.head,So(n),a=n.firstChild;a;){var l=a.nextSibling,u=a.nodeName;a[il]||u==="SCRIPT"||u==="STYLE"||u==="LINK"&&a.rel.toLowerCase()==="stylesheet"||n.removeChild(a),a=l}}if(r===0){e.removeChild(s),Fo(t);return}r--}else n==="$"||n==="$?"||n==="$!"?r++:i=n.charCodeAt(0)-48;else i=0;n=s}while(n);Fo(t)}function dd(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":dd(n),im(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function P2(e,t,n,i){for(;e.nodeType===1;){var r=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(i){if(!e[il])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(s=e.getAttribute("rel"),s==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(s!==r.rel||e.getAttribute("href")!==(r.href==null||r.href===""?null:r.href)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin)||e.getAttribute("title")!==(r.title==null?null:r.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(s=e.getAttribute("src"),(s!==(r.src==null?null:r.src)||e.getAttribute("type")!==(r.type==null?null:r.type)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin))&&s&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var s=r.name==null?null:""+r.name;if(r.type==="hidden"&&e.getAttribute("name")===s)return e}else return e;if(e=En(e.nextSibling),e===null)break}return null}function L2(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=En(e.nextSibling),e===null))return null;return e}function md(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function U2(e,t){var n=e.ownerDocument;if(e.data!=="$?"||n.readyState==="complete")t();else{var i=function(){t(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),e._reactRetry=i}}function En(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var gd=null;function xy(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}function rE(e,t,n){switch(t=hc(n),e){case"html":if(e=t.documentElement,!e)throw Error(L(452));return e;case"head":if(e=t.head,!e)throw Error(L(453));return e;case"body":if(e=t.body,!e)throw Error(L(454));return e;default:throw Error(L(451))}}function So(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);im(e)}var pn=new Map,Ny=new Set;function fc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var yi=vt.d;vt.d={f:j2,r:z2,D:B2,C:q2,L:H2,m:F2,X:Q2,S:G2,M:Y2};function j2(){var e=yi.f(),t=$c();return e||t}function z2(e){var t=ya(e);t!==null&&t.tag===5&&t.type==="form"?Z0(t):yi.r(e)}var Ta=typeof document>"u"?null:document;function sE(e,t,n){var i=Ta;if(i&&typeof t=="string"&&t){var r=cn(t);r='link[rel="'+e+'"][href="'+r+'"]',typeof n=="string"&&(r+='[crossorigin="'+n+'"]'),Ny.has(r)||(Ny.add(r),e={rel:e,crossOrigin:n,href:t},i.querySelector(r)===null&&(t=i.createElement("link"),Se(t,"link",e),ge(t),i.head.appendChild(t)))}}function B2(e){yi.D(e),sE("dns-prefetch",e,null)}function q2(e,t){yi.C(e,t),sE("preconnect",e,t)}function H2(e,t,n){yi.L(e,t,n);var i=Ta;if(i&&e&&t){var r='link[rel="preload"][as="'+cn(t)+'"]';t==="image"&&n&&n.imageSrcSet?(r+='[imagesrcset="'+cn(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(r+='[imagesizes="'+cn(n.imageSizes)+'"]')):r+='[href="'+cn(e)+'"]';var s=r;switch(t){case"style":s=sa(e);break;case"script":s=Ea(e)}pn.has(s)||(e=Ut({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),pn.set(s,e),i.querySelector(r)!==null||t==="style"&&i.querySelector(dl(s))||t==="script"&&i.querySelector(ml(s))||(t=i.createElement("link"),Se(t,"link",e),ge(t),i.head.appendChild(t)))}}function F2(e,t){yi.m(e,t);var n=Ta;if(n&&e){var i=t&&typeof t.as=="string"?t.as:"script",r='link[rel="modulepreload"][as="'+cn(i)+'"][href="'+cn(e)+'"]',s=r;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=Ea(e)}if(!pn.has(s)&&(e=Ut({rel:"modulepreload",href:e},t),pn.set(s,e),n.querySelector(r)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(ml(s)))return}i=n.createElement("link"),Se(i,"link",e),ge(i),n.head.appendChild(i)}}}function G2(e,t,n){yi.S(e,t,n);var i=Ta;if(i&&e){var r=Ls(i).hoistableStyles,s=sa(e);t=t||"default";var a=r.get(s);if(!a){var l={loading:0,preload:null};if(a=i.querySelector(dl(s)))l.loading=5;else{e=Ut({rel:"stylesheet",href:e,"data-precedence":t},n),(n=pn.get(s))&&zm(e,n);var u=a=i.createElement("link");ge(u),Se(u,"link",e),u._p=new Promise(function(h,d){u.onload=h,u.onerror=d}),u.addEventListener("load",function(){l.loading|=1}),u.addEventListener("error",function(){l.loading|=2}),l.loading|=4,Cu(a,t,i)}a={type:"stylesheet",instance:a,count:1,state:l},r.set(s,a)}}}function Q2(e,t){yi.X(e,t);var n=Ta;if(n&&e){var i=Ls(n).hoistableScripts,r=Ea(e),s=i.get(r);s||(s=n.querySelector(ml(r)),s||(e=Ut({src:e,async:!0},t),(t=pn.get(r))&&Bm(e,t),s=n.createElement("script"),ge(s),Se(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}}function Y2(e,t){yi.M(e,t);var n=Ta;if(n&&e){var i=Ls(n).hoistableScripts,r=Ea(e),s=i.get(r);s||(s=n.querySelector(ml(r)),s||(e=Ut({src:e,async:!0,type:"module"},t),(t=pn.get(r))&&Bm(e,t),s=n.createElement("script"),ge(s),Se(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}}function Oy(e,t,n,i){var r=(r=Xi.current)?fc(r):null;if(!r)throw Error(L(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=sa(n.href),n=Ls(r).hoistableStyles,i=n.get(t),i||(i={type:"style",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=sa(n.href);var s=Ls(r).hoistableStyles,a=s.get(e);if(a||(r=r.ownerDocument||r,a={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},s.set(e,a),(s=r.querySelector(dl(e)))&&!s._p&&(a.instance=s,a.state.loading=5),pn.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},pn.set(e,n),s||K2(r,e,n,a.state))),t&&i===null)throw Error(L(528,""));return a}if(t&&i!==null)throw Error(L(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Ea(n),n=Ls(r).hoistableScripts,i=n.get(t),i||(i={type:"script",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(L(444,e))}}function sa(e){return'href="'+cn(e)+'"'}function dl(e){return'link[rel="stylesheet"]['+e+"]"}function aE(e){return Ut({},e,{"data-precedence":e.precedence,precedence:null})}function K2(e,t,n,i){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?i.loading=1:(t=e.createElement("link"),i.preload=t,t.addEventListener("load",function(){return i.loading|=1}),t.addEventListener("error",function(){return i.loading|=2}),Se(t,"link",n),ge(t),e.head.appendChild(t))}function Ea(e){return'[src="'+cn(e)+'"]'}function ml(e){return"script[async]"+e}function ky(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var i=e.querySelector('style[data-href~="'+cn(n.href)+'"]');if(i)return t.instance=i,ge(i),i;var r=Ut({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(e.ownerDocument||e).createElement("style"),ge(i),Se(i,"style",r),Cu(i,n.precedence,e),t.instance=i;case"stylesheet":r=sa(n.href);var s=e.querySelector(dl(r));if(s)return t.state.loading|=4,t.instance=s,ge(s),s;i=aE(n),(r=pn.get(r))&&zm(i,r),s=(e.ownerDocument||e).createElement("link"),ge(s);var a=s;return a._p=new Promise(function(l,u){a.onload=l,a.onerror=u}),Se(s,"link",i),t.state.loading|=4,Cu(s,n.precedence,e),t.instance=s;case"script":return s=Ea(n.src),(r=e.querySelector(ml(s)))?(t.instance=r,ge(r),r):(i=n,(r=pn.get(s))&&(i=Ut({},n),Bm(i,r)),e=e.ownerDocument||e,r=e.createElement("script"),ge(r),Se(r,"link",i),e.head.appendChild(r),t.instance=r);case"void":return null;default:throw Error(L(443,t.type))}else t.type==="stylesheet"&&!(t.state.loading&4)&&(i=t.instance,t.state.loading|=4,Cu(i,n.precedence,e));return t.instance}function Cu(e,t,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=i.length?i[i.length-1]:null,s=r,a=0;a<i.length;a++){var l=i[a];if(l.dataset.precedence===t)s=l;else if(s!==r)break}s?s.parentNode.insertBefore(e,s.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function zm(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Bm(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Du=null;function My(e,t,n){if(Du===null){var i=new Map,r=Du=new Map;r.set(n,i)}else r=Du,i=r.get(n),i||(i=new Map,r.set(n,i));if(i.has(e))return i;for(i.set(e,null),n=n.getElementsByTagName(e),r=0;r<n.length;r++){var s=n[r];if(!(s[il]||s[Ne]||e==="link"&&s.getAttribute("rel")==="stylesheet")&&s.namespaceURI!=="http://www.w3.org/2000/svg"){var a=s.getAttribute(t)||"";a=e+a;var l=i.get(a);l?l.push(s):i.set(a,[s])}}return i}function Vy(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function X2(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function oE(e){return!(e.type==="stylesheet"&&!(e.state.loading&3))}var zo=null;function $2(){}function Z2(e,t,n){if(zo===null)throw Error(L(475));var i=zo;if(t.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&!(t.state.loading&4)){if(t.instance===null){var r=sa(n.href),s=e.querySelector(dl(r));if(s){e=s._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(i.count++,i=dc.bind(i),e.then(i,i)),t.state.loading|=4,t.instance=s,ge(s);return}s=e.ownerDocument||e,n=aE(n),(r=pn.get(r))&&zm(n,r),s=s.createElement("link"),ge(s);var a=s;a._p=new Promise(function(l,u){a.onload=l,a.onerror=u}),Se(s,"link",n),t.instance=s}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(t,e),(e=t.state.preload)&&!(t.state.loading&3)&&(i.count++,t=dc.bind(i),e.addEventListener("load",t),e.addEventListener("error",t))}}function W2(){if(zo===null)throw Error(L(475));var e=zo;return e.stylesheets&&e.count===0&&pd(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&pd(e,e.stylesheets),e.unsuspend){var i=e.unsuspend;e.unsuspend=null,i()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}function dc(){if(this.count--,this.count===0){if(this.stylesheets)pd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var mc=null;function pd(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,mc=new Map,t.forEach(J2,e),mc=null,dc.call(e))}function J2(e,t){if(!(t.state.loading&4)){var n=mc.get(e);if(n)var i=n.get(null);else{n=new Map,mc.set(e,n);for(var r=e.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<r.length;s++){var a=r[s];(a.nodeName==="LINK"||a.getAttribute("media")!=="not all")&&(n.set(a.dataset.precedence,a),i=a)}i&&n.set(null,i)}r=t.instance,a=r.getAttribute("data-precedence"),s=n.get(a)||i,s===i&&n.set(null,r),n.set(a,r),this.count++,i=dc.bind(this),r.addEventListener("load",i),r.addEventListener("error",i),s?s.parentNode.insertBefore(r,s.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(r,e.firstChild)),t.state.loading|=4}}var Bo={$$typeof:$n,Provider:null,Consumer:null,_currentValue:Pr,_currentValue2:Pr,_threadCount:0};function tw(e,t,n,i,r,s,a,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Oh(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Oh(0),this.hiddenUpdates=Oh(null),this.identifierPrefix=i,this.onUncaughtError=r,this.onCaughtError=s,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function lE(e,t,n,i,r,s,a,l,u,h,d,g){return e=new tw(e,t,n,a,l,u,h,g),t=1,s===!0&&(t|=24),s=We(3,null,null,t),e.current=s,s.stateNode=e,t=gm(),t.refCount++,e.pooledCache=t,t.refCount++,s.memoizedState={element:i,isDehydrated:n,cache:t},ym(s),e}function uE(e){return e?(e=Os,e):Os}function cE(e,t,n,i,r,s){r=uE(r),i.context===null?i.context=r:i.pendingContext=r,i=$i(t),i.payload={element:n},s=s===void 0?null:s,s!==null&&(i.callback=s),n=Zi(e,i,t),n!==null&&(nn(n,e,t),po(n,e,t))}function Py(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function qm(e,t){Py(e,t),(e=e.alternate)&&Py(e,t)}function hE(e){if(e.tag===13){var t=_a(e,67108864);t!==null&&nn(t,e,67108864),qm(e,67108864)}}var gc=!0;function ew(e,t,n,i){var r=et.T;et.T=null;var s=vt.p;try{vt.p=2,Hm(e,t,n,i)}finally{vt.p=s,et.T=r}}function nw(e,t,n,i){var r=et.T;et.T=null;var s=vt.p;try{vt.p=8,Hm(e,t,n,i)}finally{vt.p=s,et.T=r}}function Hm(e,t,n,i){if(gc){var r=yd(i);if(r===null)cf(e,t,i,pc,n),Ly(e,i);else if(rw(r,e,t,n,i))i.stopPropagation();else if(Ly(e,i),t&4&&-1<iw.indexOf(e)){for(;r!==null;){var s=ya(r);if(s!==null)switch(s.tag){case 3:if(s=s.stateNode,s.current.memoizedState.isDehydrated){var a=Nr(s.pendingLanes);if(a!==0){var l=s;for(l.pendingLanes|=2,l.entangledLanes|=2;a;){var u=1<<31-tn(a);l.entanglements[1]|=u,a&=~u}zn(s),!(St&6)&&(ac=Nn()+500,fl(0))}}break;case 13:l=_a(s,2),l!==null&&nn(l,s,2),$c(),qm(s,2)}if(s=yd(i),s===null&&cf(e,t,i,pc,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else cf(e,t,i,null,n)}}function yd(e){return e=sm(e),Fm(e)}var pc=null;function Fm(e){if(pc=null,e=Rs(e),e!==null){var t=Jo(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=Pv(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return pc=e,null}function fE(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(qb()){case zv:return 2;case Bv:return 8;case Fu:case Hb:return 32;case qv:return 268435456;default:return 32}default:return 32}}var _d=!1,tr=null,er=null,nr=null,qo=new Map,Ho=new Map,ji=[],iw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ly(e,t){switch(e){case"focusin":case"focusout":tr=null;break;case"dragenter":case"dragleave":er=null;break;case"mouseover":case"mouseout":nr=null;break;case"pointerover":case"pointerout":qo.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ho.delete(t.pointerId)}}function to(e,t,n,i,r,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},t!==null&&(t=ya(t),t!==null&&hE(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,r!==null&&t.indexOf(r)===-1&&t.push(r),e)}function rw(e,t,n,i,r){switch(t){case"focusin":return tr=to(tr,e,t,n,i,r),!0;case"dragenter":return er=to(er,e,t,n,i,r),!0;case"mouseover":return nr=to(nr,e,t,n,i,r),!0;case"pointerover":var s=r.pointerId;return qo.set(s,to(qo.get(s)||null,e,t,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Ho.set(s,to(Ho.get(s)||null,e,t,n,i,r)),!0}return!1}function dE(e){var t=Rs(e.target);if(t!==null){var n=Jo(t);if(n!==null){if(t=n.tag,t===13){if(t=Pv(n),t!==null){e.blockedOn=t,Zb(e.priority,function(){if(n.tag===13){var i=en();i=em(i);var r=_a(n,i);r!==null&&nn(r,n,i),qm(n,i)}});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function xu(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=yd(e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);Vf=i,n.target.dispatchEvent(i),Vf=null}else return t=ya(n),t!==null&&hE(t),e.blockedOn=n,!1;t.shift()}return!0}function Uy(e,t,n){xu(e)&&n.delete(t)}function sw(){_d=!1,tr!==null&&xu(tr)&&(tr=null),er!==null&&xu(er)&&(er=null),nr!==null&&xu(nr)&&(nr=null),qo.forEach(Uy),Ho.forEach(Uy)}function ou(e,t){e.blockedOn===t&&(e.blockedOn=null,_d||(_d=!0,he.unstable_scheduleCallback(he.unstable_NormalPriority,sw)))}var lu=null;function jy(e){lu!==e&&(lu=e,he.unstable_scheduleCallback(he.unstable_NormalPriority,function(){lu===e&&(lu=null);for(var t=0;t<e.length;t+=3){var n=e[t],i=e[t+1],r=e[t+2];if(typeof i!="function"){if(Fm(i||n)===null)continue;break}var s=ya(n);s!==null&&(e.splice(t,3),t-=3,Zf(s,{pending:!0,data:r,method:n.method,action:i},i,r))}}))}function Fo(e){function t(u){return ou(u,e)}tr!==null&&ou(tr,e),er!==null&&ou(er,e),nr!==null&&ou(nr,e),qo.forEach(t),Ho.forEach(t);for(var n=0;n<ji.length;n++){var i=ji[n];i.blockedOn===e&&(i.blockedOn=null)}for(;0<ji.length&&(n=ji[0],n.blockedOn===null);)dE(n),n.blockedOn===null&&ji.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var r=n[i],s=n[i+1],a=r[qe]||null;if(typeof s=="function")a||jy(n);else if(a){var l=null;if(s&&s.hasAttribute("formAction")){if(r=s,a=s[qe]||null)l=a.formAction;else if(Fm(r)!==null)continue}else l=a.action;typeof l=="function"?n[i+1]=l:(n.splice(i,3),i-=3),jy(n)}}}function Gm(e){this._internalRoot=e}th.prototype.render=Gm.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(L(409));var n=t.current,i=en();cE(n,i,e,t,null,null)};th.prototype.unmount=Gm.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;cE(e.current,2,null,e,null,null),$c(),t[pa]=null}};function th(e){this._internalRoot=e}th.prototype.unstable_scheduleHydration=function(e){if(e){var t=Yv();e={blockedOn:null,target:e,priority:t};for(var n=0;n<ji.length&&t!==0&&t<ji[n].priority;n++);ji.splice(n,0,e),n===0&&dE(e)}};var zy=Mv.version;if(zy!=="19.1.0")throw Error(L(527,zy,"19.1.0"));vt.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(L(188)):(e=Object.keys(e).join(","),Error(L(268,e)));return e=Vb(t),e=e!==null?Lv(e):null,e=e===null?null:e.stateNode,e};var aw={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:et,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var uu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!uu.isDisabled&&uu.supportsFiber)try{tl=uu.inject(aw),Je=uu}catch{}}Uc.createRoot=function(e,t){if(!Vv(e))throw Error(L(299));var n=!1,i="",r=lT,s=uT,a=cT,l=null;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onUncaughtError!==void 0&&(r=t.onUncaughtError),t.onCaughtError!==void 0&&(s=t.onCaughtError),t.onRecoverableError!==void 0&&(a=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(l=t.unstable_transitionCallbacks)),t=lE(e,1,!1,null,null,n,i,r,s,a,l,null),e[pa]=t.current,jm(e),new Gm(t)};Uc.hydrateRoot=function(e,t,n){if(!Vv(e))throw Error(L(299));var i=!1,r="",s=lT,a=uT,l=cT,u=null,h=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onUncaughtError!==void 0&&(s=n.onUncaughtError),n.onCaughtError!==void 0&&(a=n.onCaughtError),n.onRecoverableError!==void 0&&(l=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(u=n.unstable_transitionCallbacks),n.formState!==void 0&&(h=n.formState)),t=lE(e,1,!0,t,n??null,i,r,s,a,l,u,h),t.context=uE(null),n=t.current,i=en(),i=em(i),r=$i(i),r.callback=null,Zi(n,r,i),n=i,t.current.lanes=n,nl(t,n),zn(t),e[pa]=t.current,jm(e),new th(t)};Uc.version="19.1.0";function mE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(mE)}catch(e){console.error(e)}}mE(),Cv.exports=Uc;var ow=Cv.exports;const lw=yv(ow),uw=()=>{};var By={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gE=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=r&63|128):(r&64512)===55296&&i+1<e.length&&(e.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(e.charCodeAt(++i)&1023),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=r&63|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=r&63|128)}return t},cw=function(e){const t=[];let n=0,i=0;for(;n<e.length;){const r=e[n++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=e[n++];t[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=e[n++],a=e[n++],l=e[n++],u=((r&7)<<18|(s&63)<<12|(a&63)<<6|l&63)-65536;t[i++]=String.fromCharCode(55296+(u>>10)),t[i++]=String.fromCharCode(56320+(u&1023))}else{const s=e[n++],a=e[n++];t[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|a&63)}}return t.join("")},pE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<e.length;r+=3){const s=e[r],a=r+1<e.length,l=a?e[r+1]:0,u=r+2<e.length,h=u?e[r+2]:0,d=s>>2,g=(s&3)<<4|l>>4;let m=(l&15)<<2|h>>6,_=h&63;u||(_=64,a||(m=64)),i.push(n[d],n[g],n[m],n[_])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(gE(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):cw(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<e.length;){const s=n[e.charAt(r++)],l=r<e.length?n[e.charAt(r)]:0;++r;const h=r<e.length?n[e.charAt(r)]:64;++r;const g=r<e.length?n[e.charAt(r)]:64;if(++r,s==null||l==null||h==null||g==null)throw new hw;const m=s<<2|l>>4;if(i.push(m),h!==64){const _=l<<4&240|h>>2;if(i.push(_),g!==64){const N=h<<6&192|g;i.push(N)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class hw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const fw=function(e){const t=gE(e);return pE.encodeByteArray(t,!0)},yc=function(e){return fw(e).replace(/\./g,"")},yE=function(e){try{return pE.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mw=()=>dw().__FIREBASE_DEFAULTS__,gw=()=>{if(typeof process>"u"||typeof By>"u")return;const e=By.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},pw=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&yE(e[1]);return t&&JSON.parse(t)},eh=()=>{try{return uw()||mw()||gw()||pw()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},_E=e=>{var t,n;return(n=(t=eh())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},yw=e=>{const t=_E(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),i]:[t.substring(0,n),i]},vE=()=>{var e;return(e=eh())===null||e===void 0?void 0:e.config},TE=e=>{var t;return(t=eh())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _w{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aa(e){return e.endsWith(".cloudworkstations.dev")}async function EE(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vw(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=t||"demo-project",r=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[yc(JSON.stringify(n)),yc(JSON.stringify(a)),""].join(".")}const wo={};function Tw(){const e={prod:[],emulator:[]};for(const t of Object.keys(wo))wo[t]?e.emulator.push(t):e.prod.push(t);return e}function Ew(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let qy=!1;function AE(e,t){if(typeof window>"u"||typeof document>"u"||!Aa(window.location.host)||wo[e]===t||wo[e]||qy)return;wo[e]=t;function n(m){return`__firebase__banner__${m}`}const i="__firebase__banner",s=Tw().prod.length>0;function a(){const m=document.getElementById(i);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,_){m.setAttribute("width","24"),m.setAttribute("id",_),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function h(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{qy=!0,a()},m}function d(m,_){m.setAttribute("id",_),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function g(){const m=Ew(i),_=n("text"),N=document.getElementById(_)||document.createElement("span"),k=n("learnmore"),V=document.getElementById(k)||document.createElement("a"),w=n("preprendIcon"),v=document.getElementById(w)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const R=m.element;l(R),d(V,k);const x=h();u(v,w),R.append(v,N,V,x),document.body.appendChild(R)}s?(N.innerText="Preview backend disconnected.",v.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(v.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ke(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Aw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ke())}function bw(){var e;const t=(e=eh())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Sw(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ww(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function Rw(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Iw(){const e=ke();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Cw(){return!bw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Dw(){try{return typeof indexedDB=="object"}catch{return!1}}function xw(){return new Promise((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;t(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nw="FirebaseError";class _i extends Error{constructor(t,n,i){super(n),this.code=t,this.customData=i,this.name=Nw,Object.setPrototypeOf(this,_i.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,gl.prototype.create)}}class gl{constructor(t,n,i){this.service=t,this.serviceName=n,this.errors=i}create(t,...n){const i=n[0]||{},r=`${this.service}/${t}`,s=this.errors[t],a=s?Ow(s,i):"Error",l=`${this.serviceName}: ${a} (${r}).`;return new _i(r,l,i)}}function Ow(e,t){return e.replace(kw,(n,i)=>{const r=t[i];return r!=null?String(r):`<${i}?>`})}const kw=/\{\$([^}]+)}/g;function Mw(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Yr(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const r of n){if(!i.includes(r))return!1;const s=e[r],a=t[r];if(Hy(s)&&Hy(a)){if(!Yr(s,a))return!1}else if(s!==a)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function Hy(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pl(e){const t=[];for(const[n,i]of Object.entries(e))Array.isArray(i)?i.forEach(r=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function Vw(e,t){const n=new Pw(e,t);return n.subscribe.bind(n)}class Pw{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,i){let r;if(t===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");Lw(t,["next","error","complete"])?r=t:r={next:t,error:n,complete:i},r.next===void 0&&(r.next=ff),r.error===void 0&&(r.error=ff),r.complete===void 0&&(r.complete=ff);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Lw(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function ff(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function He(e){return e&&e._delegate?e._delegate:e}class Kr{constructor(t,n,i){this.name=t,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const i=new _w;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const i=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),r=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(zw(t))try{this.getOrInitializeService({instanceIdentifier:Mr})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(t=Mr){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Mr){return this.instances.has(t)}getOptions(t=Mr){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[s,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);i===l&&a.resolve(r)}return r}onInit(t,n){var i;const r=this.normalizeInstanceIdentifier(n),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(t),this.onInitCallbacks.set(r,s);const a=this.instances.get(r);return a&&t(a,r),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:jw(t),options:n}),this.instances.set(t,i),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=Mr){return this.component?this.component.multipleInstances?t:Mr:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function jw(e){return e===Mr?void 0:e}function zw(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new Uw(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ht;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(ht||(ht={}));const qw={debug:ht.DEBUG,verbose:ht.VERBOSE,info:ht.INFO,warn:ht.WARN,error:ht.ERROR,silent:ht.SILENT},Hw=ht.INFO,Fw={[ht.DEBUG]:"log",[ht.VERBOSE]:"log",[ht.INFO]:"info",[ht.WARN]:"warn",[ht.ERROR]:"error"},Gw=(e,t,...n)=>{if(t<e.logLevel)return;const i=new Date().toISOString(),r=Fw[t];if(r)console[r](`[${i}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Qm{constructor(t){this.name=t,this._logLevel=Hw,this._logHandler=Gw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in ht))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?qw[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,ht.DEBUG,...t),this._logHandler(this,ht.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,ht.VERBOSE,...t),this._logHandler(this,ht.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,ht.INFO,...t),this._logHandler(this,ht.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,ht.WARN,...t),this._logHandler(this,ht.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,ht.ERROR,...t),this._logHandler(this,ht.ERROR,...t)}}const Qw=(e,t)=>t.some(n=>e instanceof n);let Fy,Gy;function Yw(){return Fy||(Fy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Kw(){return Gy||(Gy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const bE=new WeakMap,vd=new WeakMap,SE=new WeakMap,df=new WeakMap,Ym=new WeakMap;function Xw(e){const t=new Promise((n,i)=>{const r=()=>{e.removeEventListener("success",s),e.removeEventListener("error",a)},s=()=>{n(ir(e.result)),r()},a=()=>{i(e.error),r()};e.addEventListener("success",s),e.addEventListener("error",a)});return t.then(n=>{n instanceof IDBCursor&&bE.set(n,e)}).catch(()=>{}),Ym.set(t,e),t}function $w(e){if(vd.has(e))return;const t=new Promise((n,i)=>{const r=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",a),e.removeEventListener("abort",a)},s=()=>{n(),r()},a=()=>{i(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",s),e.addEventListener("error",a),e.addEventListener("abort",a)});vd.set(e,t)}let Td={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return vd.get(e);if(t==="objectStoreNames")return e.objectStoreNames||SE.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ir(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function Zw(e){Td=e(Td)}function Ww(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const i=e.call(mf(this),t,...n);return SE.set(i,t.sort?t.sort():[t]),ir(i)}:Kw().includes(e)?function(...t){return e.apply(mf(this),t),ir(bE.get(this))}:function(...t){return ir(e.apply(mf(this),t))}}function Jw(e){return typeof e=="function"?Ww(e):(e instanceof IDBTransaction&&$w(e),Qw(e,Yw())?new Proxy(e,Td):e)}function ir(e){if(e instanceof IDBRequest)return Xw(e);if(df.has(e))return df.get(e);const t=Jw(e);return t!==e&&(df.set(e,t),Ym.set(t,e)),t}const mf=e=>Ym.get(e);function tR(e,t,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const a=indexedDB.open(e,t),l=ir(a);return i&&a.addEventListener("upgradeneeded",u=>{i(ir(a.result),u.oldVersion,u.newVersion,ir(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{s&&u.addEventListener("close",()=>s()),r&&u.addEventListener("versionchange",h=>r(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const eR=["get","getKey","getAll","getAllKeys","count"],nR=["put","add","delete","clear"],gf=new Map;function Qy(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(gf.get(t))return gf.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,r=nR.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||eR.includes(n)))return;const s=async function(a,...l){const u=this.transaction(a,r?"readwrite":"readonly");let h=u.store;return i&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),r&&u.done]))[0]};return gf.set(t,s),s}Zw(e=>({...e,get:(t,n,i)=>Qy(t,n)||e.get(t,n,i),has:(t,n)=>!!Qy(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(rR(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function rR(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Ed="@firebase/app",Yy="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hi=new Qm("@firebase/app"),sR="@firebase/app-compat",aR="@firebase/analytics-compat",oR="@firebase/analytics",lR="@firebase/app-check-compat",uR="@firebase/app-check",cR="@firebase/auth",hR="@firebase/auth-compat",fR="@firebase/database",dR="@firebase/data-connect",mR="@firebase/database-compat",gR="@firebase/functions",pR="@firebase/functions-compat",yR="@firebase/installations",_R="@firebase/installations-compat",vR="@firebase/messaging",TR="@firebase/messaging-compat",ER="@firebase/performance",AR="@firebase/performance-compat",bR="@firebase/remote-config",SR="@firebase/remote-config-compat",wR="@firebase/storage",RR="@firebase/storage-compat",IR="@firebase/firestore",CR="@firebase/ai",DR="@firebase/firestore-compat",xR="firebase",NR="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ad="[DEFAULT]",OR={[Ed]:"fire-core",[sR]:"fire-core-compat",[oR]:"fire-analytics",[aR]:"fire-analytics-compat",[uR]:"fire-app-check",[lR]:"fire-app-check-compat",[cR]:"fire-auth",[hR]:"fire-auth-compat",[fR]:"fire-rtdb",[dR]:"fire-data-connect",[mR]:"fire-rtdb-compat",[gR]:"fire-fn",[pR]:"fire-fn-compat",[yR]:"fire-iid",[_R]:"fire-iid-compat",[vR]:"fire-fcm",[TR]:"fire-fcm-compat",[ER]:"fire-perf",[AR]:"fire-perf-compat",[bR]:"fire-rc",[SR]:"fire-rc-compat",[wR]:"fire-gcs",[RR]:"fire-gcs-compat",[IR]:"fire-fst",[DR]:"fire-fst-compat",[CR]:"fire-vertex","fire-js":"fire-js",[xR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _c=new Map,kR=new Map,bd=new Map;function Ky(e,t){try{e.container.addComponent(t)}catch(n){hi.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function aa(e){const t=e.name;if(bd.has(t))return hi.debug(`There were multiple attempts to register component ${t}.`),!1;bd.set(t,e);for(const n of _c.values())Ky(n,e);for(const n of kR.values())Ky(n,e);return!0}function Km(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function fn(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},rr=new gl("app","Firebase",MR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(t,n,i){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Kr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw rr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ba=NR;function wE(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const i=Object.assign({name:Ad,automaticDataCollectionEnabled:!0},t),r=i.name;if(typeof r!="string"||!r)throw rr.create("bad-app-name",{appName:String(r)});if(n||(n=vE()),!n)throw rr.create("no-options");const s=_c.get(r);if(s){if(Yr(n,s.options)&&Yr(i,s.config))return s;throw rr.create("duplicate-app",{appName:r})}const a=new Bw(r);for(const u of bd.values())a.addComponent(u);const l=new VR(n,i,a);return _c.set(r,l),l}function RE(e=Ad){const t=_c.get(e);if(!t&&e===Ad&&vE())return wE();if(!t)throw rr.create("no-app",{appName:e});return t}function sr(e,t,n){var i;let r=(i=OR[e])!==null&&i!==void 0?i:e;n&&(r+=`-${n}`);const s=r.match(/\s|\//),a=t.match(/\s|\//);if(s||a){const l=[`Unable to register library "${r}" with version "${t}":`];s&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&a&&l.push("and"),a&&l.push(`version name "${t}" contains illegal characters (whitespace or "/")`),hi.warn(l.join(" "));return}aa(new Kr(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PR="firebase-heartbeat-database",LR=1,Go="firebase-heartbeat-store";let pf=null;function IE(){return pf||(pf=tR(PR,LR,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(Go)}catch(n){console.warn(n)}}}}).catch(e=>{throw rr.create("idb-open",{originalErrorMessage:e.message})})),pf}async function UR(e){try{const n=(await IE()).transaction(Go),i=await n.objectStore(Go).get(CE(e));return await n.done,i}catch(t){if(t instanceof _i)hi.warn(t.message);else{const n=rr.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});hi.warn(n.message)}}}async function Xy(e,t){try{const i=(await IE()).transaction(Go,"readwrite");await i.objectStore(Go).put(t,CE(e)),await i.done}catch(n){if(n instanceof _i)hi.warn(n.message);else{const i=rr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});hi.warn(i.message)}}}function CE(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jR=1024,zR=30;class BR{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new HR(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var t,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=$y();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats.length>zR){const a=FR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){hi.warn(i)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=$y(),{heartbeatsToSend:i,unsentEntries:r}=qR(this._heartbeatsCache.heartbeats),s=yc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return hi.warn(n),""}}}function $y(){return new Date().toISOString().substring(0,10)}function qR(e,t=jR){const n=[];let i=e.slice();for(const r of e){const s=n.find(a=>a.agent===r.agent);if(s){if(s.dates.push(r.date),Zy(n)>t){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Zy(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class HR{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Dw()?xw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await UR(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return Xy(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return Xy(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function Zy(e){return yc(JSON.stringify({version:2,heartbeats:e})).length}function FR(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let i=1;i<e.length;i++)e[i].date<n&&(n=e[i].date,t=i);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GR(e){aa(new Kr("platform-logger",t=>new iR(t),"PRIVATE")),aa(new Kr("heartbeat",t=>new BR(t),"PRIVATE")),sr(Ed,Yy,e),sr(Ed,Yy,"esm2017"),sr("fire-js","")}GR("");var QR="firebase",YR="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */sr(QR,YR,"app");function Xm(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n}function DE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const KR=DE,xE=new gl("auth","Firebase",DE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vc=new Qm("@firebase/auth");function XR(e,...t){vc.logLevel<=ht.WARN&&vc.warn(`Auth (${ba}): ${e}`,...t)}function Nu(e,...t){vc.logLevel<=ht.ERROR&&vc.error(`Auth (${ba}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fi(e,...t){throw $m(e,...t)}function kn(e,...t){return $m(e,...t)}function NE(e,t,n){const i=Object.assign(Object.assign({},KR()),{[t]:n});return new gl("auth","Firebase",i).create(t,{appName:e.name})}function si(e){return NE(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function $m(e,...t){if(typeof e!="string"){const n=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=e.name),e._errorFactory.create(n,...i)}return xE.create(e,...t)}function nt(e,t,...n){if(!e)throw $m(t,...n)}function ei(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Nu(t),new Error(t)}function di(e,t){e||ei(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sd(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function $R(){return Wy()==="http:"||Wy()==="https:"}function Wy(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&($R()||ww()||"connection"in navigator)?navigator.onLine:!0}function WR(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(t,n){this.shortDelay=t,this.longDelay=n,di(n>t,"Short delay should be less than long delay!"),this.isMobile=Aw()||Rw()}get(){return ZR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zm(e,t){di(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OE{static initialize(t,n,i){this.fetchImpl=t,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ei("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ei("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ei("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tI=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],eI=new yl(3e4,6e4);function _l(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Sa(e,t,n,i,r={}){return kE(e,r,async()=>{let s={},a={};i&&(t==="GET"?a=i:s={body:JSON.stringify(i)});const l=pl(Object.assign({key:e.config.apiKey},a)).slice(1),u=await e._getAdditionalHeaders();u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode);const h=Object.assign({method:t,headers:u},s);return Sw()||(h.referrerPolicy="no-referrer"),e.emulatorConfig&&Aa(e.emulatorConfig.host)&&(h.credentials="include"),OE.fetch()(await ME(e,e.config.apiHost,n,l),h)})}async function kE(e,t,n){e._canInitEmulator=!1;const i=Object.assign(Object.assign({},JR),t);try{const r=new nI(e),s=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw cu(e,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const l=s.ok?a.errorMessage:a.error.message,[u,h]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw cu(e,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw cu(e,"email-already-in-use",a);if(u==="USER_DISABLED")throw cu(e,"user-disabled",a);const d=i[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw NE(e,d,h);fi(e,d)}}catch(r){if(r instanceof _i)throw r;fi(e,"network-request-failed",{message:String(r)})}}async function Wm(e,t,n,i,r={}){const s=await Sa(e,t,n,i,r);return"mfaPendingCredential"in s&&fi(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function ME(e,t,n,i){const r=`${t}${n}?${i}`,s=e,a=s.config.emulator?Zm(e.config,r):`${e.config.apiScheme}://${r}`;return tI.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a}class nI{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(kn(this.auth,"network-request-failed")),eI.get())})}}function cu(e,t,n){const i={appName:e.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=kn(e,t,i);return r.customData._tokenResponse=n,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iI(e,t){return Sa(e,"POST","/v1/accounts:delete",t)}async function Tc(e,t){return Sa(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ro(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function rI(e,t=!1){const n=He(e),i=await n.getIdToken(t),r=Jm(i);nt(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:Ro(yf(r.auth_time)),issuedAtTime:Ro(yf(r.iat)),expirationTime:Ro(yf(r.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function yf(e){return Number(e)*1e3}function Jm(e){const[t,n,i]=e.split(".");if(t===void 0||n===void 0||i===void 0)return Nu("JWT malformed, contained fewer than 3 sections"),null;try{const r=yE(n);return r?JSON.parse(r):(Nu("Failed to decode base64 JWT payload"),null)}catch(r){return Nu("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function Jy(e){const t=Jm(e);return nt(t,"internal-error"),nt(typeof t.exp<"u","internal-error"),nt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qo(e,t,n=!1){if(n)return t;try{return await t}catch(i){throw i instanceof _i&&sI(i)&&e.auth.currentUser===e&&await e.auth.signOut(),i}}function sI({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ro(this.lastLoginAt),this.creationTime=Ro(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ec(e){var t;const n=e.auth,i=await e.getIdToken(),r=await Qo(e,Tc(n,{idToken:i}));nt(r==null?void 0:r.users.length,n,"internal-error");const s=r.users[0];e._notifyReloadListener(s);const a=!((t=s.providerUserInfo)===null||t===void 0)&&t.length?VE(s.providerUserInfo):[],l=lI(e.providerData,a),u=e.isAnonymous,h=!(e.email&&s.passwordHash)&&!(l!=null&&l.length),d=u?h:!1,g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new wd(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(e,g)}async function oI(e){const t=He(e);await Ec(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function lI(e,t){return[...e.filter(i=>!t.some(r=>r.providerId===i.providerId)),...t]}function VE(e){return e.map(t=>{var{providerId:n}=t,i=Xm(t,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uI(e,t){const n=await kE(e,{},async()=>{const i=pl({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:s}=e.config,a=await ME(e,r,"/v1/token",`key=${s}`),l=await e._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:l,body:i};return e.emulatorConfig&&Aa(e.emulatorConfig.host)&&(u.credentials="include"),OE.fetch()(a,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function cI(e,t){return Sa(e,"POST","/v2/accounts:revokeToken",_l(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){nt(t.idToken,"internal-error"),nt(typeof t.idToken<"u","internal-error"),nt(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):Jy(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){nt(t.length!==0,"internal-error");const n=Jy(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(nt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:i,refreshToken:r,expiresIn:s}=await uI(t,n);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(t,n,i){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,n){const{refreshToken:i,accessToken:r,expirationTime:s}=n,a=new Gs;return i&&(nt(typeof i=="string","internal-error",{appName:t}),a.refreshToken=i),r&&(nt(typeof r=="string","internal-error",{appName:t}),a.accessToken=r),s&&(nt(typeof s=="number","internal-error",{appName:t}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Gs,this.toJSON())}_performRefresh(){return ei("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oi(e,t){nt(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class vn{constructor(t){var{uid:n,auth:i,stsTokenManager:r}=t,s=Xm(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new aI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new wd(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const n=await Qo(this,this.stsTokenManager.getToken(this.auth,t));return nt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return rI(this,t)}reload(){return oI(this)}_assign(t){this!==t&&(nt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new vn(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){nt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),n&&await Ec(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(fn(this.auth.app))return Promise.reject(si(this.auth));const t=await this.getIdToken();return await Qo(this,iI(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var i,r,s,a,l,u,h,d;const g=(i=n.displayName)!==null&&i!==void 0?i:void 0,m=(r=n.email)!==null&&r!==void 0?r:void 0,_=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,N=(a=n.photoURL)!==null&&a!==void 0?a:void 0,k=(l=n.tenantId)!==null&&l!==void 0?l:void 0,V=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,w=(h=n.createdAt)!==null&&h!==void 0?h:void 0,v=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:R,emailVerified:x,isAnonymous:j,providerData:H,stsTokenManager:E}=n;nt(R&&E,t,"internal-error");const y=Gs.fromJSON(this.name,E);nt(typeof R=="string",t,"internal-error"),Oi(g,t.name),Oi(m,t.name),nt(typeof x=="boolean",t,"internal-error"),nt(typeof j=="boolean",t,"internal-error"),Oi(_,t.name),Oi(N,t.name),Oi(k,t.name),Oi(V,t.name),Oi(w,t.name),Oi(v,t.name);const A=new vn({uid:R,auth:t,email:m,emailVerified:x,displayName:g,isAnonymous:j,photoURL:N,phoneNumber:_,tenantId:k,stsTokenManager:y,createdAt:w,lastLoginAt:v});return H&&Array.isArray(H)&&(A.providerData=H.map(b=>Object.assign({},b))),V&&(A._redirectEventId=V),A}static async _fromIdTokenResponse(t,n,i=!1){const r=new Gs;r.updateFromServerResponse(n);const s=new vn({uid:n.localId,auth:t,stsTokenManager:r,isAnonymous:i});return await Ec(s),s}static async _fromGetAccountInfoResponse(t,n,i){const r=n.users[0];nt(r.localId!==void 0,"internal-error");const s=r.providerUserInfo!==void 0?VE(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!(s!=null&&s.length),l=new Gs;l.updateFromIdToken(i);const u=new vn({uid:r.localId,auth:t,stsTokenManager:l,isAnonymous:a}),h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new wd(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,h),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t_=new Map;function ni(e){di(e instanceof Function,"Expected a class definition");let t=t_.get(e);return t?(di(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,t_.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}PE.type="NONE";const e_=PE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ou(e,t,n){return`firebase:${e}:${t}:${n}`}class Qs{constructor(t,n,i){this.persistence=t,this.auth=n,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=Ou(this.userKey,r.apiKey,s),this.fullPersistenceKey=Ou("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await Tc(this.auth,{idToken:t}).catch(()=>{});return n?vn._fromGetAccountInfoResponse(this.auth,n,t):null}return vn._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,i="authUser"){if(!n.length)return new Qs(ni(e_),t,i);const r=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let s=r[0]||ni(e_);const a=Ou(i,t.config.apiKey,t.name);let l=null;for(const h of n)try{const d=await h._get(a);if(d){let g;if(typeof d=="string"){const m=await Tc(t,{idToken:d}).catch(()=>{});if(!m)break;g=await vn._fromGetAccountInfoResponse(t,m,d)}else g=vn._fromJSON(t,d);h!==s&&(l=g),s=h;break}}catch{}const u=r.filter(h=>h._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new Qs(s,t,i):(s=u[0],l&&await s._set(a,l.toJSON()),await Promise.all(n.map(async h=>{if(h!==s)try{await h._remove(a)}catch{}})),new Qs(s,t,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n_(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(zE(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(LE(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(qE(t))return"Blackberry";if(HE(t))return"Webos";if(UE(t))return"Safari";if((t.includes("chrome/")||jE(t))&&!t.includes("edge/"))return"Chrome";if(BE(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=e.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function LE(e=ke()){return/firefox\//i.test(e)}function UE(e=ke()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function jE(e=ke()){return/crios\//i.test(e)}function zE(e=ke()){return/iemobile/i.test(e)}function BE(e=ke()){return/android/i.test(e)}function qE(e=ke()){return/blackberry/i.test(e)}function HE(e=ke()){return/webos/i.test(e)}function tg(e=ke()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function hI(e=ke()){var t;return tg(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function fI(){return Iw()&&document.documentMode===10}function FE(e=ke()){return tg(e)||BE(e)||HE(e)||qE(e)||/windows phone/i.test(e)||zE(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GE(e,t=[]){let n;switch(e){case"Browser":n=n_(ke());break;case"Worker":n=`${n_(ke())}-${e}`;break;default:n=e}const i=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${ba}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const i=s=>new Promise((a,l)=>{try{const u=t(s);a(u)}catch(u){l(u)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const i of this.queue)await i(t),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mI(e,t={}){return Sa(e,"GET","/v2/passwordPolicy",_l(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gI=6;class pI{constructor(t){var n,i,r,s;const a=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=a.minPasswordLength)!==null&&n!==void 0?n:gI,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=t.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=t.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,i,r,s,a,l;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,u),this.validatePasswordCharacterOptions(t,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(i=u.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(r=u.containsLowercaseLetter)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsNumericCharacter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(l=u.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),u}validatePasswordLengthOptions(t,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=t.length>=i),r&&(n.meetsMaxPasswordLength=t.length<=r)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<t.length;r++)i=t.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(t,n,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(t,n,i,r){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new i_(this),this.idTokenSubscription=new i_(this),this.beforeStateQueue=new dI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=xE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=ni(n)),this._initializationPromise=this.queue(async()=>{var i,r,s;if(!this._deleted&&(this.persistenceManager=await Qs.create(this,t),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await Tc(this,{idToken:t}),i=await vn._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(fn(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=r==null?void 0:r._redirectEventId,u=await this.tryRedirectSignIn(t);(!a||a===l)&&(u!=null&&u.user)&&(r=u.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return nt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await Ec(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=WR()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(fn(this.app))return Promise.reject(si(this));const n=t?He(t):null;return n&&nt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&nt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return fn(this.app)?Promise.reject(si(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return fn(this.app)?Promise.reject(si(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ni(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await mI(this),n=new pI(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new gl("auth","Firebase",t())}onAuthStateChanged(t,n,i){return this.registerStateListener(this.authStateSubscription,t,n,i)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,i){return this.registerStateListener(this.idTokenSubscription,t,n,i)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const i=this.onAuthStateChanged(()=>{i(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await cI(this,i)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const i=await this.getOrInitRedirectPersistenceManager(n);return t===null?i.removeCurrentUser():i.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&ni(t)||this._popupRedirectResolver;nt(n,this,"argument-error"),this.redirectPersistenceManager=await Qs.create(this,[ni(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,i,r){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(nt(l,this,"internal-error"),l.then(()=>{a||s(this.currentUser)}),typeof n=="function"){const u=t.addObserver(n,i,r);return()=>{a=!0,u()}}else{const u=t.addObserver(n);return()=>{a=!0,u()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return nt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=GE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var t;if(fn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n!=null&&n.error&&XR(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function vl(e){return He(e)}class i_{constructor(t){this.auth=t,this.observer=null,this.addObserver=Vw(n=>this.observer=n)}get next(){return nt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _I(e){eg=e}function vI(e){return eg.loadJS(e)}function TI(){return eg.gapiScript}function EI(e){return`__${e}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AI(e,t){const n=Km(e,"auth");if(n.isInitialized()){const r=n.getImmediate(),s=n.getOptions();if(Yr(s,t??{}))return r;fi(r,"already-initialized")}return n.initialize({options:t})}function bI(e,t){const n=(t==null?void 0:t.persistence)||[],i=(Array.isArray(n)?n:[n]).map(ni);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(i,t==null?void 0:t.popupRedirectResolver)}function SI(e,t,n){const i=vl(e);nt(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const r=!1,s=QE(t),{host:a,port:l}=wI(t),u=l===null?"":`:${l}`,h={url:`${s}//${a}${u}/`},d=Object.freeze({host:a,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){nt(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),nt(Yr(h,i.config.emulator)&&Yr(d,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=h,i.emulatorConfig=d,i.settings.appVerificationDisabledForTesting=!0,Aa(a)?(EE(`${s}//${a}${u}`),AE("Auth",!0)):RI()}function QE(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function wI(e){const t=QE(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const s=r[1];return{host:s,port:r_(i.substr(s.length+1))}}else{const[s,a]=i.split(":");return{host:s,port:r_(a)}}}function r_(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function RI(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return ei("not implemented")}_getIdTokenResponse(t){return ei("not implemented")}_linkToIdToken(t,n){return ei("not implemented")}_getReauthenticationResolver(t){return ei("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ys(e,t){return Wm(e,"POST","/v1/accounts:signInWithIdp",_l(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const II="http://localhost";class Xr extends YE{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new Xr(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):fi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:r}=n,s=Xm(n,["providerId","signInMethod"]);if(!i||!r)return null;const a=new Xr(i,r);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(t){const n=this.buildRequest();return Ys(t,n)}_linkToIdToken(t,n){const i=this.buildRequest();return i.idToken=n,Ys(t,i)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,Ys(t,n)}buildRequest(){const t={requestUri:II,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=pl(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl extends KE{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi extends Tl{constructor(){super("facebook.com")}static credential(t){return Xr._fromParams({providerId:zi.PROVIDER_ID,signInMethod:zi.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return zi.credentialFromTaggedObject(t)}static credentialFromError(t){return zi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return zi.credential(t.oauthAccessToken)}catch{return null}}}zi.FACEBOOK_SIGN_IN_METHOD="facebook.com";zi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi extends Tl{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return Xr._fromParams({providerId:Bi.PROVIDER_ID,signInMethod:Bi.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Bi.credentialFromTaggedObject(t)}static credentialFromError(t){return Bi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:i}=t;if(!n&&!i)return null;try{return Bi.credential(n,i)}catch{return null}}}Bi.GOOGLE_SIGN_IN_METHOD="google.com";Bi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi extends Tl{constructor(){super("github.com")}static credential(t){return Xr._fromParams({providerId:qi.PROVIDER_ID,signInMethod:qi.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return qi.credentialFromTaggedObject(t)}static credentialFromError(t){return qi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return qi.credential(t.oauthAccessToken)}catch{return null}}}qi.GITHUB_SIGN_IN_METHOD="github.com";qi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi extends Tl{constructor(){super("twitter.com")}static credential(t,n){return Xr._fromParams({providerId:Hi.PROVIDER_ID,signInMethod:Hi.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Hi.credentialFromTaggedObject(t)}static credentialFromError(t){return Hi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=t;if(!n||!i)return null;try{return Hi.credential(n,i)}catch{return null}}}Hi.TWITTER_SIGN_IN_METHOD="twitter.com";Hi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CI(e,t){return Wm(e,"POST","/v1/accounts:signUp",_l(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,i,r=!1){const s=await vn._fromIdTokenResponse(t,i,r),a=s_(i);return new mi({user:s,providerId:a,_tokenResponse:i,operationType:n})}static async _forOperation(t,n,i){await t._updateTokensIfNecessary(i,!0);const r=s_(i);return new mi({user:t,providerId:r,_tokenResponse:i,operationType:n})}}function s_(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DI(e){var t;if(fn(e.app))return Promise.reject(si(e));const n=vl(e);if(await n._initializationPromise,!((t=n.currentUser)===null||t===void 0)&&t.isAnonymous)return new mi({user:n.currentUser,providerId:null,operationType:"signIn"});const i=await CI(n,{returnSecureToken:!0}),r=await mi._fromIdTokenResponse(n,"signIn",i,!0);return await n._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac extends _i{constructor(t,n,i,r){var s;super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,Ac.prototype),this.customData={appName:t.name,tenantId:(s=t.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,n,i,r){return new Ac(t,n,i,r)}}function XE(e,t,n,i){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Ac._fromErrorAndOperation(e,s,t,i):s})}async function xI(e,t,n=!1){const i=await Qo(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return mi._forOperation(e,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NI(e,t,n=!1){const{auth:i}=e;if(fn(i.app))return Promise.reject(si(i));const r="reauthenticate";try{const s=await Qo(e,XE(i,r,t,e),n);nt(s.idToken,i,"internal-error");const a=Jm(s.idToken);nt(a,i,"internal-error");const{sub:l}=a;return nt(e.uid===l,i,"user-mismatch"),mi._forOperation(e,r,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&fi(i,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OI(e,t,n=!1){if(fn(e.app))return Promise.reject(si(e));const i="signIn",r=await XE(e,i,t),s=await mi._fromIdTokenResponse(e,i,r);return n||await e._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kI(e,t){return Wm(e,"POST","/v1/accounts:signInWithCustomToken",_l(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MI(e,t){if(fn(e.app))return Promise.reject(si(e));const n=vl(e),i=await kI(n,{token:t,returnSecureToken:!0}),r=await mi._fromIdTokenResponse(n,"signIn",i);return await n._updateCurrentUser(r.user),r}function VI(e,t,n,i){return He(e).onIdTokenChanged(t,n,i)}function PI(e,t,n){return He(e).beforeAuthStateChanged(t,n)}function LI(e,t,n,i){return He(e).onAuthStateChanged(t,n,i)}const bc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(bc,"1"),this.storage.removeItem(bc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UI=1e3,jI=10;class ZE extends $E{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=FE(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&t(n,r,i)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((a,l,u)=>{this.notifyListeners(a,u)});return}const i=t.key;n?this.detachListener():this.stopPolling();const r=()=>{const a=this.storage.getItem(i);!n&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);fI()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(r,jI):r()}notifyListeners(t,n){this.localCache[t]=n;const i=this.listeners[t];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:i}),!0)})},UI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}ZE.type="LOCAL";const zI=ZE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE extends $E{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}WE.type="SESSION";const JE=WE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BI(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(r=>r.isListeningto(t));if(n)return n;const i=new nh(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:i,eventType:r,data:s}=n.data,a=this.handlersMap[r];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const l=Array.from(a).map(async h=>h(n.origin,s)),u=await BI(l);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:u})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}nh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ng(e="",t=10){let n="";for(let i=0;i<t;i++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,a;return new Promise((l,u)=>{const h=ng("",20);r.port1.start();const d=setTimeout(()=>{u(new Error("unsupported_event"))},i);a={messageChannel:r,onMessage(g){const m=g;if(m.data.eventId===h)switch(m.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(m.data.response);break;default:clearTimeout(d),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:t,eventId:h,data:n},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mn(){return window}function HI(e){Mn().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t1(){return typeof Mn().WorkerGlobalScope<"u"&&typeof Mn().importScripts=="function"}async function FI(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function GI(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function QI(){return t1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e1="firebaseLocalStorageDb",YI=1,Sc="firebaseLocalStorage",n1="fbase_key";class El{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function ih(e,t){return e.transaction([Sc],t?"readwrite":"readonly").objectStore(Sc)}function KI(){const e=indexedDB.deleteDatabase(e1);return new El(e).toPromise()}function Rd(){const e=indexedDB.open(e1,YI);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const i=e.result;try{i.createObjectStore(Sc,{keyPath:n1})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const i=e.result;i.objectStoreNames.contains(Sc)?t(i):(i.close(),await KI(),t(await Rd()))})})}async function a_(e,t,n){const i=ih(e,!0).put({[n1]:t,value:n});return new El(i).toPromise()}async function XI(e,t){const n=ih(e,!1).get(t),i=await new El(n).toPromise();return i===void 0?null:i.value}function o_(e,t){const n=ih(e,!0).delete(t);return new El(n).toPromise()}const $I=800,ZI=3;class i1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Rd(),this.db)}async _withRetries(t){let n=0;for(;;)try{const i=await this._openDb();return await t(i)}catch(i){if(n++>ZI)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return t1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=nh._getInstance(QI()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await FI(),!this.activeServiceWorker)return;this.sender=new qI(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||GI()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Rd();return await a_(t,bc,"1"),await o_(t,bc),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>a_(i,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(i=>XI(i,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>o_(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(r=>{const s=ih(r,!1).getAll();return new El(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(t.length!==0)for(const{fbase_key:r,value:s}of t)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(t,n){this.localCache[t]=n;const i=this.listeners[t];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),$I)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}i1.type="LOCAL";const WI=i1;new yl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JI(e,t){return t?ni(t):(nt(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig extends YE{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Ys(t,this._buildIdpRequest())}_linkToIdToken(t,n){return Ys(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return Ys(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function tC(e){return OI(e.auth,new ig(e),e.bypassAuthState)}function eC(e){const{auth:t,user:n}=e;return nt(n,t,"internal-error"),NI(n,new ig(e),e.bypassAuthState)}async function nC(e){const{auth:t,user:n}=e;return nt(n,t,"internal-error"),xI(n,new ig(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1{constructor(t,n,i,r,s=!1){this.auth=t,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:i,postBody:r,tenantId:s,error:a,type:l}=t;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:n,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(h){this.reject(h)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return tC;case"linkViaPopup":case"linkViaRedirect":return nC;case"reauthViaPopup":case"reauthViaRedirect":return eC;default:fi(this.auth,"internal-error")}}resolve(t){di(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){di(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iC=new yl(2e3,1e4);class Ps extends r1{constructor(t,n,i,r,s){super(t,n,r,s),this.provider=i,this.authWindow=null,this.pollId=null,Ps.currentPopupAction&&Ps.currentPopupAction.cancel(),Ps.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return nt(t,this.auth,"internal-error"),t}async onExecution(){di(this.filter.length===1,"Popup operations only handle one event");const t=ng();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(kn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(kn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ps.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(kn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,iC.get())};t()}}Ps.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rC="pendingRedirect",ku=new Map;class sC extends r1{constructor(t,n,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let t=ku.get(this.auth._key());if(!t){try{const i=await aC(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(i)}catch(n){t=()=>Promise.reject(n)}ku.set(this.auth._key(),t)}return this.bypassAuthState||ku.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function aC(e,t){const n=uC(t),i=lC(e);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function oC(e,t){ku.set(e._key(),t)}function lC(e){return ni(e._redirectPersistence)}function uC(e){return Ou(rC,e.config.apiKey,e.name)}async function cC(e,t,n=!1){if(fn(e.app))return Promise.reject(si(e));const i=vl(e),r=JI(i,t),a=await new sC(i,r,n).execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,t)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hC=10*60*1e3;class fC{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(t,i)&&(n=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!dC(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var i;if(t.error&&!s1(t)){const r=((i=t.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(kn(this.auth,r))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const i=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=hC&&this.cachedEventUids.clear(),this.cachedEventUids.has(l_(t))}saveEventToCache(t){this.cachedEventUids.add(l_(t)),this.lastProcessedEventTime=Date.now()}}function l_(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function s1({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function dC(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return s1(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mC(e,t={}){return Sa(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,pC=/^https?/;async function yC(e){if(e.config.emulator)return;const{authorizedDomains:t}=await mC(e);for(const n of t)try{if(_C(n))return}catch{}fi(e,"unauthorized-domain")}function _C(e){const t=Sd(),{protocol:n,hostname:i}=new URL(t);if(e.startsWith("chrome-extension://")){const a=new URL(e);return a.hostname===""&&i===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===i}if(!pC.test(n))return!1;if(gC.test(e))return i===e;const r=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vC=new yl(3e4,6e4);function u_(){const e=Mn().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function TC(e){return new Promise((t,n)=>{var i,r,s;function a(){u_(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{u_(),n(kn(e,"network-request-failed"))},timeout:vC.get()})}if(!((r=(i=Mn().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)t(gapi.iframes.getContext());else if(!((s=Mn().gapi)===null||s===void 0)&&s.load)a();else{const l=EI("iframefcb");return Mn()[l]=()=>{gapi.load?a():n(kn(e,"network-request-failed"))},vI(`${TI()}?onload=${l}`).catch(u=>n(u))}}).catch(t=>{throw Mu=null,t})}let Mu=null;function EC(e){return Mu=Mu||TC(e),Mu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AC=new yl(5e3,15e3),bC="__/auth/iframe",SC="emulator/auth/iframe",wC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},RC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function IC(e){const t=e.config;nt(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Zm(t,SC):`https://${e.config.authDomain}/${bC}`,i={apiKey:t.apiKey,appName:e.name,v:ba},r=RC.get(e.config.apiHost);r&&(i.eid=r);const s=e._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${pl(i).slice(1)}`}async function CC(e){const t=await EC(e),n=Mn().gapi;return nt(n,e,"internal-error"),t.open({where:document.body,url:IC(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:wC,dontclear:!0},i=>new Promise(async(r,s)=>{await i.restyle({setHideOnLeave:!1});const a=kn(e,"network-request-failed"),l=Mn().setTimeout(()=>{s(a)},AC.get());function u(){Mn().clearTimeout(l),r(i)}i.ping(u).then(u,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},xC=500,NC=600,OC="_blank",kC="http://localhost";class c_{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function MC(e,t,n,i=xC,r=NC){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let l="";const u=Object.assign(Object.assign({},DC),{width:i.toString(),height:r.toString(),top:s,left:a}),h=ke().toLowerCase();n&&(l=jE(h)?OC:n),LE(h)&&(t=t||kC,u.scrollbars="yes");const d=Object.entries(u).reduce((m,[_,N])=>`${m}${_}=${N},`,"");if(hI(h)&&l!=="_self")return VC(t||"",l),new c_(null);const g=window.open(t||"",l,d);nt(g,e,"popup-blocked");try{g.focus()}catch{}return new c_(g)}function VC(e,t){const n=document.createElement("a");n.href=e,n.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PC="__/auth/handler",LC="emulator/auth/handler",UC=encodeURIComponent("fac");async function h_(e,t,n,i,r,s){nt(e.config.authDomain,e,"auth-domain-config-required"),nt(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:i,v:ba,eventId:r};if(t instanceof KE){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",Mw(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[d,g]of Object.entries({}))a[d]=g}if(t instanceof Tl){const d=t.getScopes().filter(g=>g!=="");d.length>0&&(a.scopes=d.join(","))}e.tenantId&&(a.tid=e.tenantId);const l=a;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const u=await e._getAppCheckToken(),h=u?`#${UC}=${encodeURIComponent(u)}`:"";return`${jC(e)}?${pl(l).slice(1)}${h}`}function jC({config:e}){return e.emulator?Zm(e,LC):`https://${e.authDomain}/${PC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _f="webStorageSupport";class zC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=JE,this._completeRedirectFn=cC,this._overrideRedirectResult=oC}async _openPopup(t,n,i,r){var s;di((s=this.eventManagers[t._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const a=await h_(t,n,i,Sd(),r);return MC(t,a,ng())}async _openRedirect(t,n,i,r){await this._originValidation(t);const s=await h_(t,n,i,Sd(),r);return HI(s),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:r,promise:s}=this.eventManagers[n];return r?Promise.resolve(r):(di(s,"If manager is not set, promise should be"),s)}const i=this.initAndGetManager(t);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(t){const n=await CC(t),i=new fC(t);return n.register("authEvent",r=>(nt(r==null?void 0:r.authEvent,t,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=n,i}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(_f,{type:_f},r=>{var s;const a=(s=r==null?void 0:r[0])===null||s===void 0?void 0:s[_f];a!==void 0&&n(!!a),fi(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=yC(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return FE()||UE()||tg()}}const BC=zC;var f_="@firebase/auth",d_="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(i=>{t((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){nt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HC(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function FC(e){aa(new Kr("auth",(t,{options:n})=>{const i=t.getProvider("app").getImmediate(),r=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=i.options;nt(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const u={apiKey:a,authDomain:l,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:GE(e)},h=new yI(i,r,s,u);return bI(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,i)=>{t.getProvider("auth-internal").initialize()})),aa(new Kr("auth-internal",t=>{const n=vl(t.getProvider("auth").getImmediate());return(i=>new qC(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),sr(f_,d_,HC(e)),sr(f_,d_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GC=5*60,QC=TE("authIdTokenMaxAge")||GC;let m_=null;const YC=e=>async t=>{const n=t&&await t.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>QC)return;const r=n==null?void 0:n.token;m_!==r&&(m_=r,await fetch(e,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function KC(e=RE()){const t=Km(e,"auth");if(t.isInitialized())return t.getImmediate();const n=AI(e,{popupRedirectResolver:BC,persistence:[WI,zI,JE]}),i=TE("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(i,location.origin);if(location.origin===s.origin){const a=YC(s.toString());PI(n,a,()=>a(n.currentUser)),VI(n,l=>a(l))}}const r=_E("auth");return r&&SI(n,`http://${r}`),n}function XC(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}_I({loadJS(e){return new Promise((t,n)=>{const i=document.createElement("script");i.setAttribute("src",e),i.onload=t,i.onerror=r=>{const s=kn("internal-error");s.customData=r,n(s)},i.type="text/javascript",i.charset="UTF-8",XC().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});FC("Browser");var g_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ar,a1;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(E,y){function A(){}A.prototype=y.prototype,E.D=y.prototype,E.prototype=new A,E.prototype.constructor=E,E.C=function(b,I,C){for(var S=Array(arguments.length-2),Gt=2;Gt<arguments.length;Gt++)S[Gt-2]=arguments[Gt];return y.prototype[I].apply(b,S)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(E,y,A){A||(A=0);var b=Array(16);if(typeof y=="string")for(var I=0;16>I;++I)b[I]=y.charCodeAt(A++)|y.charCodeAt(A++)<<8|y.charCodeAt(A++)<<16|y.charCodeAt(A++)<<24;else for(I=0;16>I;++I)b[I]=y[A++]|y[A++]<<8|y[A++]<<16|y[A++]<<24;y=E.g[0],A=E.g[1],I=E.g[2];var C=E.g[3],S=y+(C^A&(I^C))+b[0]+3614090360&4294967295;y=A+(S<<7&4294967295|S>>>25),S=C+(I^y&(A^I))+b[1]+3905402710&4294967295,C=y+(S<<12&4294967295|S>>>20),S=I+(A^C&(y^A))+b[2]+606105819&4294967295,I=C+(S<<17&4294967295|S>>>15),S=A+(y^I&(C^y))+b[3]+3250441966&4294967295,A=I+(S<<22&4294967295|S>>>10),S=y+(C^A&(I^C))+b[4]+4118548399&4294967295,y=A+(S<<7&4294967295|S>>>25),S=C+(I^y&(A^I))+b[5]+1200080426&4294967295,C=y+(S<<12&4294967295|S>>>20),S=I+(A^C&(y^A))+b[6]+2821735955&4294967295,I=C+(S<<17&4294967295|S>>>15),S=A+(y^I&(C^y))+b[7]+4249261313&4294967295,A=I+(S<<22&4294967295|S>>>10),S=y+(C^A&(I^C))+b[8]+1770035416&4294967295,y=A+(S<<7&4294967295|S>>>25),S=C+(I^y&(A^I))+b[9]+2336552879&4294967295,C=y+(S<<12&4294967295|S>>>20),S=I+(A^C&(y^A))+b[10]+4294925233&4294967295,I=C+(S<<17&4294967295|S>>>15),S=A+(y^I&(C^y))+b[11]+2304563134&4294967295,A=I+(S<<22&4294967295|S>>>10),S=y+(C^A&(I^C))+b[12]+1804603682&4294967295,y=A+(S<<7&4294967295|S>>>25),S=C+(I^y&(A^I))+b[13]+4254626195&4294967295,C=y+(S<<12&4294967295|S>>>20),S=I+(A^C&(y^A))+b[14]+2792965006&4294967295,I=C+(S<<17&4294967295|S>>>15),S=A+(y^I&(C^y))+b[15]+1236535329&4294967295,A=I+(S<<22&4294967295|S>>>10),S=y+(I^C&(A^I))+b[1]+4129170786&4294967295,y=A+(S<<5&4294967295|S>>>27),S=C+(A^I&(y^A))+b[6]+3225465664&4294967295,C=y+(S<<9&4294967295|S>>>23),S=I+(y^A&(C^y))+b[11]+643717713&4294967295,I=C+(S<<14&4294967295|S>>>18),S=A+(C^y&(I^C))+b[0]+3921069994&4294967295,A=I+(S<<20&4294967295|S>>>12),S=y+(I^C&(A^I))+b[5]+3593408605&4294967295,y=A+(S<<5&4294967295|S>>>27),S=C+(A^I&(y^A))+b[10]+38016083&4294967295,C=y+(S<<9&4294967295|S>>>23),S=I+(y^A&(C^y))+b[15]+3634488961&4294967295,I=C+(S<<14&4294967295|S>>>18),S=A+(C^y&(I^C))+b[4]+3889429448&4294967295,A=I+(S<<20&4294967295|S>>>12),S=y+(I^C&(A^I))+b[9]+568446438&4294967295,y=A+(S<<5&4294967295|S>>>27),S=C+(A^I&(y^A))+b[14]+3275163606&4294967295,C=y+(S<<9&4294967295|S>>>23),S=I+(y^A&(C^y))+b[3]+4107603335&4294967295,I=C+(S<<14&4294967295|S>>>18),S=A+(C^y&(I^C))+b[8]+1163531501&4294967295,A=I+(S<<20&4294967295|S>>>12),S=y+(I^C&(A^I))+b[13]+2850285829&4294967295,y=A+(S<<5&4294967295|S>>>27),S=C+(A^I&(y^A))+b[2]+4243563512&4294967295,C=y+(S<<9&4294967295|S>>>23),S=I+(y^A&(C^y))+b[7]+1735328473&4294967295,I=C+(S<<14&4294967295|S>>>18),S=A+(C^y&(I^C))+b[12]+2368359562&4294967295,A=I+(S<<20&4294967295|S>>>12),S=y+(A^I^C)+b[5]+4294588738&4294967295,y=A+(S<<4&4294967295|S>>>28),S=C+(y^A^I)+b[8]+2272392833&4294967295,C=y+(S<<11&4294967295|S>>>21),S=I+(C^y^A)+b[11]+1839030562&4294967295,I=C+(S<<16&4294967295|S>>>16),S=A+(I^C^y)+b[14]+4259657740&4294967295,A=I+(S<<23&4294967295|S>>>9),S=y+(A^I^C)+b[1]+2763975236&4294967295,y=A+(S<<4&4294967295|S>>>28),S=C+(y^A^I)+b[4]+1272893353&4294967295,C=y+(S<<11&4294967295|S>>>21),S=I+(C^y^A)+b[7]+4139469664&4294967295,I=C+(S<<16&4294967295|S>>>16),S=A+(I^C^y)+b[10]+3200236656&4294967295,A=I+(S<<23&4294967295|S>>>9),S=y+(A^I^C)+b[13]+681279174&4294967295,y=A+(S<<4&4294967295|S>>>28),S=C+(y^A^I)+b[0]+3936430074&4294967295,C=y+(S<<11&4294967295|S>>>21),S=I+(C^y^A)+b[3]+3572445317&4294967295,I=C+(S<<16&4294967295|S>>>16),S=A+(I^C^y)+b[6]+76029189&4294967295,A=I+(S<<23&4294967295|S>>>9),S=y+(A^I^C)+b[9]+3654602809&4294967295,y=A+(S<<4&4294967295|S>>>28),S=C+(y^A^I)+b[12]+3873151461&4294967295,C=y+(S<<11&4294967295|S>>>21),S=I+(C^y^A)+b[15]+530742520&4294967295,I=C+(S<<16&4294967295|S>>>16),S=A+(I^C^y)+b[2]+3299628645&4294967295,A=I+(S<<23&4294967295|S>>>9),S=y+(I^(A|~C))+b[0]+4096336452&4294967295,y=A+(S<<6&4294967295|S>>>26),S=C+(A^(y|~I))+b[7]+1126891415&4294967295,C=y+(S<<10&4294967295|S>>>22),S=I+(y^(C|~A))+b[14]+2878612391&4294967295,I=C+(S<<15&4294967295|S>>>17),S=A+(C^(I|~y))+b[5]+4237533241&4294967295,A=I+(S<<21&4294967295|S>>>11),S=y+(I^(A|~C))+b[12]+1700485571&4294967295,y=A+(S<<6&4294967295|S>>>26),S=C+(A^(y|~I))+b[3]+2399980690&4294967295,C=y+(S<<10&4294967295|S>>>22),S=I+(y^(C|~A))+b[10]+4293915773&4294967295,I=C+(S<<15&4294967295|S>>>17),S=A+(C^(I|~y))+b[1]+2240044497&4294967295,A=I+(S<<21&4294967295|S>>>11),S=y+(I^(A|~C))+b[8]+1873313359&4294967295,y=A+(S<<6&4294967295|S>>>26),S=C+(A^(y|~I))+b[15]+4264355552&4294967295,C=y+(S<<10&4294967295|S>>>22),S=I+(y^(C|~A))+b[6]+2734768916&4294967295,I=C+(S<<15&4294967295|S>>>17),S=A+(C^(I|~y))+b[13]+1309151649&4294967295,A=I+(S<<21&4294967295|S>>>11),S=y+(I^(A|~C))+b[4]+4149444226&4294967295,y=A+(S<<6&4294967295|S>>>26),S=C+(A^(y|~I))+b[11]+3174756917&4294967295,C=y+(S<<10&4294967295|S>>>22),S=I+(y^(C|~A))+b[2]+718787259&4294967295,I=C+(S<<15&4294967295|S>>>17),S=A+(C^(I|~y))+b[9]+3951481745&4294967295,E.g[0]=E.g[0]+y&4294967295,E.g[1]=E.g[1]+(I+(S<<21&4294967295|S>>>11))&4294967295,E.g[2]=E.g[2]+I&4294967295,E.g[3]=E.g[3]+C&4294967295}i.prototype.u=function(E,y){y===void 0&&(y=E.length);for(var A=y-this.blockSize,b=this.B,I=this.h,C=0;C<y;){if(I==0)for(;C<=A;)r(this,E,C),C+=this.blockSize;if(typeof E=="string"){for(;C<y;)if(b[I++]=E.charCodeAt(C++),I==this.blockSize){r(this,b),I=0;break}}else for(;C<y;)if(b[I++]=E[C++],I==this.blockSize){r(this,b),I=0;break}}this.h=I,this.o+=y},i.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var y=1;y<E.length-8;++y)E[y]=0;var A=8*this.o;for(y=E.length-8;y<E.length;++y)E[y]=A&255,A/=256;for(this.u(E),E=Array(16),y=A=0;4>y;++y)for(var b=0;32>b;b+=8)E[A++]=this.g[y]>>>b&255;return E};function s(E,y){var A=l;return Object.prototype.hasOwnProperty.call(A,E)?A[E]:A[E]=y(E)}function a(E,y){this.h=y;for(var A=[],b=!0,I=E.length-1;0<=I;I--){var C=E[I]|0;b&&C==y||(A[I]=C,b=!1)}this.g=A}var l={};function u(E){return-128<=E&&128>E?s(E,function(y){return new a([y|0],0>y?-1:0)}):new a([E|0],0>E?-1:0)}function h(E){if(isNaN(E)||!isFinite(E))return g;if(0>E)return V(h(-E));for(var y=[],A=1,b=0;E>=A;b++)y[b]=E/A|0,A*=4294967296;return new a(y,0)}function d(E,y){if(E.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(E.charAt(0)=="-")return V(d(E.substring(1),y));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=h(Math.pow(y,8)),b=g,I=0;I<E.length;I+=8){var C=Math.min(8,E.length-I),S=parseInt(E.substring(I,I+C),y);8>C?(C=h(Math.pow(y,C)),b=b.j(C).add(h(S))):(b=b.j(A),b=b.add(h(S)))}return b}var g=u(0),m=u(1),_=u(16777216);e=a.prototype,e.m=function(){if(k(this))return-V(this).m();for(var E=0,y=1,A=0;A<this.g.length;A++){var b=this.i(A);E+=(0<=b?b:4294967296+b)*y,y*=4294967296}return E},e.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(N(this))return"0";if(k(this))return"-"+V(this).toString(E);for(var y=h(Math.pow(E,6)),A=this,b="";;){var I=x(A,y).g;A=w(A,I.j(y));var C=((0<A.g.length?A.g[0]:A.h)>>>0).toString(E);if(A=I,N(A))return C+b;for(;6>C.length;)C="0"+C;b=C+b}},e.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function N(E){if(E.h!=0)return!1;for(var y=0;y<E.g.length;y++)if(E.g[y]!=0)return!1;return!0}function k(E){return E.h==-1}e.l=function(E){return E=w(this,E),k(E)?-1:N(E)?0:1};function V(E){for(var y=E.g.length,A=[],b=0;b<y;b++)A[b]=~E.g[b];return new a(A,~E.h).add(m)}e.abs=function(){return k(this)?V(this):this},e.add=function(E){for(var y=Math.max(this.g.length,E.g.length),A=[],b=0,I=0;I<=y;I++){var C=b+(this.i(I)&65535)+(E.i(I)&65535),S=(C>>>16)+(this.i(I)>>>16)+(E.i(I)>>>16);b=S>>>16,C&=65535,S&=65535,A[I]=S<<16|C}return new a(A,A[A.length-1]&-2147483648?-1:0)};function w(E,y){return E.add(V(y))}e.j=function(E){if(N(this)||N(E))return g;if(k(this))return k(E)?V(this).j(V(E)):V(V(this).j(E));if(k(E))return V(this.j(V(E)));if(0>this.l(_)&&0>E.l(_))return h(this.m()*E.m());for(var y=this.g.length+E.g.length,A=[],b=0;b<2*y;b++)A[b]=0;for(b=0;b<this.g.length;b++)for(var I=0;I<E.g.length;I++){var C=this.i(b)>>>16,S=this.i(b)&65535,Gt=E.i(I)>>>16,Q=E.i(I)&65535;A[2*b+2*I]+=S*Q,v(A,2*b+2*I),A[2*b+2*I+1]+=C*Q,v(A,2*b+2*I+1),A[2*b+2*I+1]+=S*Gt,v(A,2*b+2*I+1),A[2*b+2*I+2]+=C*Gt,v(A,2*b+2*I+2)}for(b=0;b<y;b++)A[b]=A[2*b+1]<<16|A[2*b];for(b=y;b<2*y;b++)A[b]=0;return new a(A,0)};function v(E,y){for(;(E[y]&65535)!=E[y];)E[y+1]+=E[y]>>>16,E[y]&=65535,y++}function R(E,y){this.g=E,this.h=y}function x(E,y){if(N(y))throw Error("division by zero");if(N(E))return new R(g,g);if(k(E))return y=x(V(E),y),new R(V(y.g),V(y.h));if(k(y))return y=x(E,V(y)),new R(V(y.g),y.h);if(30<E.g.length){if(k(E)||k(y))throw Error("slowDivide_ only works with positive integers.");for(var A=m,b=y;0>=b.l(E);)A=j(A),b=j(b);var I=H(A,1),C=H(b,1);for(b=H(b,2),A=H(A,2);!N(b);){var S=C.add(b);0>=S.l(E)&&(I=I.add(A),C=S),b=H(b,1),A=H(A,1)}return y=w(E,I.j(y)),new R(I,y)}for(I=g;0<=E.l(y);){for(A=Math.max(1,Math.floor(E.m()/y.m())),b=Math.ceil(Math.log(A)/Math.LN2),b=48>=b?1:Math.pow(2,b-48),C=h(A),S=C.j(y);k(S)||0<S.l(E);)A-=b,C=h(A),S=C.j(y);N(C)&&(C=m),I=I.add(C),E=w(E,S)}return new R(I,E)}e.A=function(E){return x(this,E).h},e.and=function(E){for(var y=Math.max(this.g.length,E.g.length),A=[],b=0;b<y;b++)A[b]=this.i(b)&E.i(b);return new a(A,this.h&E.h)},e.or=function(E){for(var y=Math.max(this.g.length,E.g.length),A=[],b=0;b<y;b++)A[b]=this.i(b)|E.i(b);return new a(A,this.h|E.h)},e.xor=function(E){for(var y=Math.max(this.g.length,E.g.length),A=[],b=0;b<y;b++)A[b]=this.i(b)^E.i(b);return new a(A,this.h^E.h)};function j(E){for(var y=E.g.length+1,A=[],b=0;b<y;b++)A[b]=E.i(b)<<1|E.i(b-1)>>>31;return new a(A,E.h)}function H(E,y){var A=y>>5;y%=32;for(var b=E.g.length-A,I=[],C=0;C<b;C++)I[C]=0<y?E.i(C+A)>>>y|E.i(C+A+1)<<32-y:E.i(C+A);return new a(I,E.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,a1=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=d,ar=a}).apply(typeof g_<"u"?g_:typeof self<"u"?self:typeof window<"u"?window:{});var hu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var o1,so,l1,Vu,Id,u1,c1,h1;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,c,f){return o==Array.prototype||o==Object.prototype||(o[c]=f.value),o};function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof hu=="object"&&hu];for(var c=0;c<o.length;++c){var f=o[c];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var i=n(this);function r(o,c){if(c)t:{var f=i;o=o.split(".");for(var p=0;p<o.length-1;p++){var D=o[p];if(!(D in f))break t;f=f[D]}o=o[o.length-1],p=f[o],c=c(p),c!=p&&c!=null&&t(f,o,{configurable:!0,writable:!0,value:c})}}function s(o,c){o instanceof String&&(o+="");var f=0,p=!1,D={next:function(){if(!p&&f<o.length){var O=f++;return{value:c(O,o[O]),done:!1}}return p=!0,{done:!0,value:void 0}}};return D[Symbol.iterator]=function(){return D},D}r("Array.prototype.values",function(o){return o||function(){return s(this,function(c,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function u(o){var c=typeof o;return c=c!="object"?c:o?Array.isArray(o)?"array":c:"null",c=="array"||c=="object"&&typeof o.length=="number"}function h(o){var c=typeof o;return c=="object"&&o!=null||c=="function"}function d(o,c,f){return o.call.apply(o.bind,arguments)}function g(o,c,f){if(!o)throw Error();if(2<arguments.length){var p=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(D,p),o.apply(c,D)}}return function(){return o.apply(c,arguments)}}function m(o,c,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:g,m.apply(null,arguments)}function _(o,c){var f=Array.prototype.slice.call(arguments,1);return function(){var p=f.slice();return p.push.apply(p,arguments),o.apply(this,p)}}function N(o,c){function f(){}f.prototype=c.prototype,o.aa=c.prototype,o.prototype=new f,o.prototype.constructor=o,o.Qb=function(p,D,O){for(var B=Array(arguments.length-2),kt=2;kt<arguments.length;kt++)B[kt-2]=arguments[kt];return c.prototype[D].apply(p,B)}}function k(o){const c=o.length;if(0<c){const f=Array(c);for(let p=0;p<c;p++)f[p]=o[p];return f}return[]}function V(o,c){for(let f=1;f<arguments.length;f++){const p=arguments[f];if(u(p)){const D=o.length||0,O=p.length||0;o.length=D+O;for(let B=0;B<O;B++)o[D+B]=p[B]}else o.push(p)}}class w{constructor(c,f){this.i=c,this.j=f,this.h=0,this.g=null}get(){let c;return 0<this.h?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function v(o){return/^[\s\xa0]*$/.test(o)}function R(){var o=l.navigator;return o&&(o=o.userAgent)?o:""}function x(o){return x[" "](o),o}x[" "]=function(){};var j=R().indexOf("Gecko")!=-1&&!(R().toLowerCase().indexOf("webkit")!=-1&&R().indexOf("Edge")==-1)&&!(R().indexOf("Trident")!=-1||R().indexOf("MSIE")!=-1)&&R().indexOf("Edge")==-1;function H(o,c,f){for(const p in o)c.call(f,o[p],p,o)}function E(o,c){for(const f in o)c.call(void 0,o[f],f,o)}function y(o){const c={};for(const f in o)c[f]=o[f];return c}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(o,c){let f,p;for(let D=1;D<arguments.length;D++){p=arguments[D];for(f in p)o[f]=p[f];for(let O=0;O<A.length;O++)f=A[O],Object.prototype.hasOwnProperty.call(p,f)&&(o[f]=p[f])}}function I(o){var c=1;o=o.split(":");const f=[];for(;0<c&&o.length;)f.push(o.shift()),c--;return o.length&&f.push(o.join(":")),f}function C(o){l.setTimeout(()=>{throw o},0)}function S(){var o=wt;let c=null;return o.g&&(c=o.g,o.g=o.g.next,o.g||(o.h=null),c.next=null),c}class Gt{constructor(){this.h=this.g=null}add(c,f){const p=Q.get();p.set(c,f),this.h?this.h.next=p:this.g=p,this.h=p}}var Q=new w(()=>new M,o=>o.reset());class M{constructor(){this.next=this.g=this.h=null}set(c,f){this.h=c,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Y,tt=!1,wt=new Gt,Dt=()=>{const o=l.Promise.resolve(void 0);Y=()=>{o.then(vi)}};var vi=()=>{for(var o;o=S();){try{o.h.call(o.g)}catch(f){C(f)}var c=Q;c.j(o),100>c.h&&(c.h++,o.next=c.g,c.g=o)}tt=!1};function _e(){this.s=this.s,this.C=this.C}_e.prototype.s=!1,_e.prototype.ma=function(){this.s||(this.s=!0,this.N())},_e.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function qt(o,c){this.type=o,this.g=this.target=c,this.defaultPrevented=!1}qt.prototype.h=function(){this.defaultPrevented=!0};var Ge=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,c=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const f=()=>{};l.addEventListener("test",f,c),l.removeEventListener("test",f,c)}catch{}return o}();function Qe(o,c){if(qt.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var f=this.type=o.type,p=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=c,c=o.relatedTarget){if(j){t:{try{x(c.nodeName);var D=!0;break t}catch{}D=!1}D||(c=null)}}else f=="mouseover"?c=o.fromElement:f=="mouseout"&&(c=o.toElement);this.relatedTarget=c,p?(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:_h[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&Qe.aa.h.call(this)}}N(Qe,qt);var _h={2:"touch",3:"pen",4:"mouse"};Qe.prototype.h=function(){Qe.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var Tr="closure_listenable_"+(1e6*Math.random()|0),xa=0;function as(o,c,f,p,D){this.listener=o,this.proxy=null,this.src=c,this.type=f,this.capture=!!p,this.ha=D,this.key=++xa,this.da=this.fa=!1}function Ti(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function Bn(o){this.src=o,this.g={},this.h=0}Bn.prototype.add=function(o,c,f,p,D){var O=o.toString();o=this.g[O],o||(o=this.g[O]=[],this.h++);var B=Na(o,c,p,D);return-1<B?(c=o[B],f||(c.fa=!1)):(c=new as(c,this.src,O,!!p,D),c.fa=f,o.push(c)),c};function Ye(o,c){var f=c.type;if(f in o.g){var p=o.g[f],D=Array.prototype.indexOf.call(p,c,void 0),O;(O=0<=D)&&Array.prototype.splice.call(p,D,1),O&&(Ti(c),o.g[f].length==0&&(delete o.g[f],o.h--))}}function Na(o,c,f,p){for(var D=0;D<o.length;++D){var O=o[D];if(!O.da&&O.listener==c&&O.capture==!!f&&O.ha==p)return D}return-1}var Ei="closure_lm_"+(1e6*Math.random()|0),Oa={};function Ai(o,c,f,p,D){if(Array.isArray(c)){for(var O=0;O<c.length;O++)Ai(o,c[O],f,p,D);return null}return f=Dl(f),o&&o[Tr]?o.K(c,f,h(p)?!!p.capture:!1,D):Il(o,c,f,!1,p,D)}function Il(o,c,f,p,D,O){if(!c)throw Error("Invalid event type");var B=h(D)?!!D.capture:!!D,kt=Er(o);if(kt||(o[Ei]=kt=new Bn(o)),f=kt.add(c,f,p,B,O),f.proxy)return f;if(p=vh(),f.proxy=p,p.src=o,p.listener=f,o.addEventListener)Ge||(D=B),D===void 0&&(D=!1),o.addEventListener(c.toString(),p,D);else if(o.attachEvent)o.attachEvent(Va(c.toString()),p);else if(o.addListener&&o.removeListener)o.addListener(p);else throw Error("addEventListener and attachEvent are unavailable.");return f}function vh(){function o(f){return c.call(o.src,o.listener,f)}const c=os;return o}function ka(o,c,f,p,D){if(Array.isArray(c))for(var O=0;O<c.length;O++)ka(o,c[O],f,p,D);else p=h(p)?!!p.capture:!!p,f=Dl(f),o&&o[Tr]?(o=o.i,c=String(c).toString(),c in o.g&&(O=o.g[c],f=Na(O,f,p,D),-1<f&&(Ti(O[f]),Array.prototype.splice.call(O,f,1),O.length==0&&(delete o.g[c],o.h--)))):o&&(o=Er(o))&&(c=o.g[c.toString()],o=-1,c&&(o=Na(c,f,p,D)),(f=-1<o?c[o]:null)&&Ma(f))}function Ma(o){if(typeof o!="number"&&o&&!o.da){var c=o.src;if(c&&c[Tr])Ye(c.i,o);else{var f=o.type,p=o.proxy;c.removeEventListener?c.removeEventListener(f,p,o.capture):c.detachEvent?c.detachEvent(Va(f),p):c.addListener&&c.removeListener&&c.removeListener(p),(f=Er(c))?(Ye(f,o),f.h==0&&(f.src=null,c[Ei]=null)):Ti(o)}}}function Va(o){return o in Oa?Oa[o]:Oa[o]="on"+o}function os(o,c){if(o.da)o=!0;else{c=new Qe(c,this);var f=o.listener,p=o.ha||o.src;o.fa&&Ma(o),o=f.call(p,c)}return o}function Er(o){return o=o[Ei],o instanceof Bn?o:null}var Cl="__closure_events_fn_"+(1e9*Math.random()>>>0);function Dl(o){return typeof o=="function"?o:(o[Cl]||(o[Cl]=function(c){return o.handleEvent(c)}),o[Cl])}function ae(){_e.call(this),this.i=new Bn(this),this.M=this,this.F=null}N(ae,_e),ae.prototype[Tr]=!0,ae.prototype.removeEventListener=function(o,c,f,p){ka(this,o,c,f,p)};function fe(o,c){var f,p=o.F;if(p)for(f=[];p;p=p.F)f.push(p);if(o=o.M,p=c.type||c,typeof c=="string")c=new qt(c,o);else if(c instanceof qt)c.target=c.target||o;else{var D=c;c=new qt(p,o),b(c,D)}if(D=!0,f)for(var O=f.length-1;0<=O;O--){var B=c.g=f[O];D=Ar(B,p,!0,c)&&D}if(B=c.g=o,D=Ar(B,p,!0,c)&&D,D=Ar(B,p,!1,c)&&D,f)for(O=0;O<f.length;O++)B=c.g=f[O],D=Ar(B,p,!1,c)&&D}ae.prototype.N=function(){if(ae.aa.N.call(this),this.i){var o=this.i,c;for(c in o.g){for(var f=o.g[c],p=0;p<f.length;p++)Ti(f[p]);delete o.g[c],o.h--}}this.F=null},ae.prototype.K=function(o,c,f,p){return this.i.add(String(o),c,!1,f,p)},ae.prototype.L=function(o,c,f,p){return this.i.add(String(o),c,!0,f,p)};function Ar(o,c,f,p){if(c=o.i.g[String(c)],!c)return!0;c=c.concat();for(var D=!0,O=0;O<c.length;++O){var B=c[O];if(B&&!B.da&&B.capture==f){var kt=B.listener,ve=B.ha||B.src;B.fa&&Ye(o.i,B),D=kt.call(ve,p)!==!1&&D}}return D&&!p.defaultPrevented}function xl(o,c,f){if(typeof o=="function")f&&(o=m(o,f));else if(o&&typeof o.handleEvent=="function")o=m(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(c)?-1:l.setTimeout(o,c||0)}function lt(o){o.g=xl(()=>{o.g=null,o.i&&(o.i=!1,lt(o))},o.l);const c=o.h;o.h=null,o.m.apply(null,c)}class bi extends _e{constructor(c,f){super(),this.m=c,this.l=f,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:lt(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function br(o){_e.call(this),this.h=o,this.g={}}N(br,_e);var Nl=[];function Pa(o){H(o.g,function(c,f){this.g.hasOwnProperty(f)&&Ma(c)},o),o.g={}}br.prototype.N=function(){br.aa.N.call(this),Pa(this)},br.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Si=l.JSON.stringify,Th=l.JSON.parse,Ol=class{stringify(o){return l.JSON.stringify(o,void 0)}parse(o){return l.JSON.parse(o,void 0)}};function La(){}La.prototype.h=null;function wi(o){return o.h||(o.h=o.i())}function kl(){}var Sr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ls(){qt.call(this,"d")}N(ls,qt);function us(){qt.call(this,"c")}N(us,qt);var Sn={},Ml=null;function cs(){return Ml=Ml||new ae}Sn.La="serverreachability";function Vl(o){qt.call(this,Sn.La,o)}N(Vl,qt);function wr(o){const c=cs();fe(c,new Vl(c))}Sn.STAT_EVENT="statevent";function z(o,c){qt.call(this,Sn.STAT_EVENT,o),this.stat=c}N(z,qt);function q(o){const c=cs();fe(c,new z(c,o))}Sn.Ma="timingevent";function X(o,c){qt.call(this,Sn.Ma,o),this.size=c}N(X,qt);function W(o,c){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){o()},c)}function $(){this.g=!0}$.prototype.xa=function(){this.g=!1};function dt(o,c,f,p,D,O){o.info(function(){if(o.g)if(O)for(var B="",kt=O.split("&"),ve=0;ve<kt.length;ve++){var yt=kt[ve].split("=");if(1<yt.length){var Re=yt[0];yt=yt[1];var Ie=Re.split("_");B=2<=Ie.length&&Ie[1]=="type"?B+(Re+"="+yt+"&"):B+(Re+"=redacted&")}}else B=null;else B=O;return"XMLHTTP REQ ("+p+") [attempt "+D+"]: "+c+`
`+f+`
`+B})}function xt(o,c,f,p,D,O,B){o.info(function(){return"XMLHTTP RESP ("+p+") [ attempt "+D+"]: "+c+`
`+f+`
`+O+" "+B})}function Tt(o,c,f,p){o.info(function(){return"XMLHTTP TEXT ("+c+"): "+Nt(o,f)+(p?" "+p:"")})}function pt(o,c){o.info(function(){return"TIMEOUT: "+c})}$.prototype.info=function(){};function Nt(o,c){if(!o.g)return c;if(!c)return null;try{var f=JSON.parse(c);if(f){for(o=0;o<f.length;o++)if(Array.isArray(f[o])){var p=f[o];if(!(2>p.length)){var D=p[1];if(Array.isArray(D)&&!(1>D.length)){var O=D[0];if(O!="noop"&&O!="stop"&&O!="close")for(var B=1;B<D.length;B++)D[B]=""}}}}return Si(f)}catch{return c}}var Rt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Zt={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},At;function Ot(){}N(Ot,La),Ot.prototype.g=function(){return new XMLHttpRequest},Ot.prototype.i=function(){return{}},At=new Ot;function Qt(o,c,f,p){this.j=o,this.i=c,this.l=f,this.R=p||1,this.U=new br(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Yt}function Yt(){this.i=null,this.g="",this.h=!1}var Wt={},sn={};function Ri(o,c,f){o.L=1,o.v=zl(qn(c)),o.m=f,o.P=!0,Ii(o,null)}function Ii(o,c){o.F=Date.now(),Rr(o),o.A=qn(o.v);var f=o.A,p=o.R;Array.isArray(p)||(p=[String(p)]),Kg(f.i,"t",p),o.C=0,f=o.j.J,o.h=new Yt,o.g=fp(o.j,f?c:null,!o.m),0<o.O&&(o.M=new bi(m(o.Y,o,o.g),o.O)),c=o.U,f=o.g,p=o.ca;var D="readystatechange";Array.isArray(D)||(D&&(Nl[0]=D.toString()),D=Nl);for(var O=0;O<D.length;O++){var B=Ai(f,D[O],p||c.handleEvent,!1,c.h||c);if(!B)break;c.g[B.key]=B}c=o.H?y(o.H):{},o.m?(o.u||(o.u="POST"),c["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,c)):(o.u="GET",o.g.ea(o.A,o.u,null,c)),wr(),dt(o.i,o.u,o.A,o.l,o.R,o.m)}Qt.prototype.ca=function(o){o=o.target;const c=this.M;c&&Hn(o)==3?c.j():this.Y(o)},Qt.prototype.Y=function(o){try{if(o==this.g)t:{const Ie=Hn(this.g);var c=this.g.Ba();const ds=this.g.Z();if(!(3>Ie)&&(Ie!=3||this.g&&(this.h.h||this.g.oa()||ep(this.g)))){this.J||Ie!=4||c==7||(c==8||0>=ds?wr(3):wr(2)),Eh(this);var f=this.g.Z();this.X=f;e:if(Ua(this)){var p=ep(this.g);o="";var D=p.length,O=Hn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ir(this),ja(this);var B="";break e}this.h.i=new l.TextDecoder}for(c=0;c<D;c++)this.h.h=!0,o+=this.h.i.decode(p[c],{stream:!(O&&c==D-1)});p.length=0,this.h.g+=o,this.C=0,B=this.h.g}else B=this.g.oa();if(this.o=f==200,xt(this.i,this.u,this.A,this.l,this.R,Ie,f),this.o){if(this.T&&!this.K){e:{if(this.g){var kt,ve=this.g;if((kt=ve.g?ve.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(kt)){var yt=kt;break e}}yt=null}if(f=yt)Tt(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ah(this,f);else{this.o=!1,this.s=3,q(12),Ir(this),ja(this);break t}}if(this.P){f=!0;let yn;for(;!this.J&&this.C<B.length;)if(yn=Pl(this,B),yn==sn){Ie==4&&(this.s=4,q(14),f=!1),Tt(this.i,this.l,null,"[Incomplete Response]");break}else if(yn==Wt){this.s=4,q(15),Tt(this.i,this.l,B,"[Invalid Chunk]"),f=!1;break}else Tt(this.i,this.l,yn,null),Ah(this,yn);if(Ua(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ie!=4||B.length!=0||this.h.h||(this.s=1,q(16),f=!1),this.o=this.o&&f,!f)Tt(this.i,this.l,B,"[Invalid Chunked Response]"),Ir(this),ja(this);else if(0<B.length&&!this.W){this.W=!0;var Re=this.j;Re.g==this&&Re.ba&&!Re.M&&(Re.j.info("Great, no buffering proxy detected. Bytes received: "+B.length),Ch(Re),Re.M=!0,q(11))}}else Tt(this.i,this.l,B,null),Ah(this,B);Ie==4&&Ir(this),this.o&&!this.J&&(Ie==4?lp(this.j,this):(this.o=!1,Rr(this)))}else cb(this.g),f==400&&0<B.indexOf("Unknown SID")?(this.s=3,q(12)):(this.s=0,q(13)),Ir(this),ja(this)}}}catch{}finally{}};function Ua(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function Pl(o,c){var f=o.C,p=c.indexOf(`
`,f);return p==-1?sn:(f=Number(c.substring(f,p)),isNaN(f)?Wt:(p+=1,p+f>c.length?sn:(c=c.slice(p,p+f),o.C=p+f,c)))}Qt.prototype.cancel=function(){this.J=!0,Ir(this)};function Rr(o){o.S=Date.now()+o.I,Ll(o,o.I)}function Ll(o,c){if(o.B!=null)throw Error("WatchDog timer not null");o.B=W(m(o.ba,o),c)}function Eh(o){o.B&&(l.clearTimeout(o.B),o.B=null)}Qt.prototype.ba=function(){this.B=null;const o=Date.now();0<=o-this.S?(pt(this.i,this.A),this.L!=2&&(wr(),q(17)),Ir(this),this.s=2,ja(this)):Ll(this,this.S-o)};function ja(o){o.j.G==0||o.J||lp(o.j,o)}function Ir(o){Eh(o);var c=o.M;c&&typeof c.ma=="function"&&c.ma(),o.M=null,Pa(o.U),o.g&&(c=o.g,o.g=null,c.abort(),c.ma())}function Ah(o,c){try{var f=o.j;if(f.G!=0&&(f.g==o||bh(f.h,o))){if(!o.K&&bh(f.h,o)&&f.G==3){try{var p=f.Da.g.parse(c)}catch{p=null}if(Array.isArray(p)&&p.length==3){var D=p;if(D[0]==0){t:if(!f.u){if(f.g)if(f.g.F+3e3<o.F)Ql(f),Fl(f);else break t;Ih(f),q(18)}}else f.za=D[1],0<f.za-f.T&&37500>D[2]&&f.F&&f.v==0&&!f.C&&(f.C=W(m(f.Za,f),6e3));if(1>=jg(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Dr(f,11)}else if((o.K||f.g==o)&&Ql(f),!v(c))for(D=f.Da.g.parse(c),c=0;c<D.length;c++){let yt=D[c];if(f.T=yt[0],yt=yt[1],f.G==2)if(yt[0]=="c"){f.K=yt[1],f.ia=yt[2];const Re=yt[3];Re!=null&&(f.la=Re,f.j.info("VER="+f.la));const Ie=yt[4];Ie!=null&&(f.Aa=Ie,f.j.info("SVER="+f.Aa));const ds=yt[5];ds!=null&&typeof ds=="number"&&0<ds&&(p=1.5*ds,f.L=p,f.j.info("backChannelRequestTimeoutMs_="+p)),p=f;const yn=o.g;if(yn){const Kl=yn.g?yn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Kl){var O=p.h;O.g||Kl.indexOf("spdy")==-1&&Kl.indexOf("quic")==-1&&Kl.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(Sh(O,O.h),O.h=null))}if(p.D){const Dh=yn.g?yn.g.getResponseHeader("X-HTTP-Session-Id"):null;Dh&&(p.ya=Dh,Pt(p.I,p.D,Dh))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-o.F,f.j.info("Handshake RTT: "+f.R+"ms")),p=f;var B=o;if(p.qa=hp(p,p.J?p.ia:null,p.W),B.K){zg(p.h,B);var kt=B,ve=p.L;ve&&(kt.I=ve),kt.B&&(Eh(kt),Rr(kt)),p.g=B}else ap(p);0<f.i.length&&Gl(f)}else yt[0]!="stop"&&yt[0]!="close"||Dr(f,7);else f.G==3&&(yt[0]=="stop"||yt[0]=="close"?yt[0]=="stop"?Dr(f,7):Rh(f):yt[0]!="noop"&&f.l&&f.l.ta(yt),f.v=0)}}wr(4)}catch{}}var KA=class{constructor(o,c){this.g=o,this.map=c}};function Lg(o){this.l=o||10,l.PerformanceNavigationTiming?(o=l.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ug(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function jg(o){return o.h?1:o.g?o.g.size:0}function bh(o,c){return o.h?o.h==c:o.g?o.g.has(c):!1}function Sh(o,c){o.g?o.g.add(c):o.h=c}function zg(o,c){o.h&&o.h==c?o.h=null:o.g&&o.g.has(c)&&o.g.delete(c)}Lg.prototype.cancel=function(){if(this.i=Bg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function Bg(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let c=o.i;for(const f of o.g.values())c=c.concat(f.D);return c}return k(o.i)}function XA(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(u(o)){for(var c=[],f=o.length,p=0;p<f;p++)c.push(o[p]);return c}c=[],f=0;for(p in o)c[f++]=o[p];return c}function $A(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(u(o)||typeof o=="string"){var c=[];o=o.length;for(var f=0;f<o;f++)c.push(f);return c}c=[],f=0;for(const p in o)c[f++]=p;return c}}}function qg(o,c){if(o.forEach&&typeof o.forEach=="function")o.forEach(c,void 0);else if(u(o)||typeof o=="string")Array.prototype.forEach.call(o,c,void 0);else for(var f=$A(o),p=XA(o),D=p.length,O=0;O<D;O++)c.call(void 0,p[O],f&&f[O],o)}var Hg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ZA(o,c){if(o){o=o.split("&");for(var f=0;f<o.length;f++){var p=o[f].indexOf("="),D=null;if(0<=p){var O=o[f].substring(0,p);D=o[f].substring(p+1)}else O=o[f];c(O,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function Cr(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof Cr){this.h=o.h,Ul(this,o.j),this.o=o.o,this.g=o.g,jl(this,o.s),this.l=o.l;var c=o.i,f=new qa;f.i=c.i,c.g&&(f.g=new Map(c.g),f.h=c.h),Fg(this,f),this.m=o.m}else o&&(c=String(o).match(Hg))?(this.h=!1,Ul(this,c[1]||"",!0),this.o=za(c[2]||""),this.g=za(c[3]||"",!0),jl(this,c[4]),this.l=za(c[5]||"",!0),Fg(this,c[6]||"",!0),this.m=za(c[7]||"")):(this.h=!1,this.i=new qa(null,this.h))}Cr.prototype.toString=function(){var o=[],c=this.j;c&&o.push(Ba(c,Gg,!0),":");var f=this.g;return(f||c=="file")&&(o.push("//"),(c=this.o)&&o.push(Ba(c,Gg,!0),"@"),o.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&o.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&o.push("/"),o.push(Ba(f,f.charAt(0)=="/"?tb:JA,!0))),(f=this.i.toString())&&o.push("?",f),(f=this.m)&&o.push("#",Ba(f,nb)),o.join("")};function qn(o){return new Cr(o)}function Ul(o,c,f){o.j=f?za(c,!0):c,o.j&&(o.j=o.j.replace(/:$/,""))}function jl(o,c){if(c){if(c=Number(c),isNaN(c)||0>c)throw Error("Bad port number "+c);o.s=c}else o.s=null}function Fg(o,c,f){c instanceof qa?(o.i=c,ib(o.i,o.h)):(f||(c=Ba(c,eb)),o.i=new qa(c,o.h))}function Pt(o,c,f){o.i.set(c,f)}function zl(o){return Pt(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function za(o,c){return o?c?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Ba(o,c,f){return typeof o=="string"?(o=encodeURI(o).replace(c,WA),f&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function WA(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var Gg=/[#\/\?@]/g,JA=/[#\?:]/g,tb=/[#\?]/g,eb=/[#\?@]/g,nb=/#/g;function qa(o,c){this.h=this.g=null,this.i=o||null,this.j=!!c}function Ci(o){o.g||(o.g=new Map,o.h=0,o.i&&ZA(o.i,function(c,f){o.add(decodeURIComponent(c.replace(/\+/g," ")),f)}))}e=qa.prototype,e.add=function(o,c){Ci(this),this.i=null,o=hs(this,o);var f=this.g.get(o);return f||this.g.set(o,f=[]),f.push(c),this.h+=1,this};function Qg(o,c){Ci(o),c=hs(o,c),o.g.has(c)&&(o.i=null,o.h-=o.g.get(c).length,o.g.delete(c))}function Yg(o,c){return Ci(o),c=hs(o,c),o.g.has(c)}e.forEach=function(o,c){Ci(this),this.g.forEach(function(f,p){f.forEach(function(D){o.call(c,D,p,this)},this)},this)},e.na=function(){Ci(this);const o=Array.from(this.g.values()),c=Array.from(this.g.keys()),f=[];for(let p=0;p<c.length;p++){const D=o[p];for(let O=0;O<D.length;O++)f.push(c[p])}return f},e.V=function(o){Ci(this);let c=[];if(typeof o=="string")Yg(this,o)&&(c=c.concat(this.g.get(hs(this,o))));else{o=Array.from(this.g.values());for(let f=0;f<o.length;f++)c=c.concat(o[f])}return c},e.set=function(o,c){return Ci(this),this.i=null,o=hs(this,o),Yg(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[c]),this.h+=1,this},e.get=function(o,c){return o?(o=this.V(o),0<o.length?String(o[0]):c):c};function Kg(o,c,f){Qg(o,c),0<f.length&&(o.i=null,o.g.set(hs(o,c),k(f)),o.h+=f.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],c=Array.from(this.g.keys());for(var f=0;f<c.length;f++){var p=c[f];const O=encodeURIComponent(String(p)),B=this.V(p);for(p=0;p<B.length;p++){var D=O;B[p]!==""&&(D+="="+encodeURIComponent(String(B[p]))),o.push(D)}}return this.i=o.join("&")};function hs(o,c){return c=String(c),o.j&&(c=c.toLowerCase()),c}function ib(o,c){c&&!o.j&&(Ci(o),o.i=null,o.g.forEach(function(f,p){var D=p.toLowerCase();p!=D&&(Qg(this,p),Kg(this,D,f))},o)),o.j=c}function rb(o,c){const f=new $;if(l.Image){const p=new Image;p.onload=_(Di,f,"TestLoadImage: loaded",!0,c,p),p.onerror=_(Di,f,"TestLoadImage: error",!1,c,p),p.onabort=_(Di,f,"TestLoadImage: abort",!1,c,p),p.ontimeout=_(Di,f,"TestLoadImage: timeout",!1,c,p),l.setTimeout(function(){p.ontimeout&&p.ontimeout()},1e4),p.src=o}else c(!1)}function sb(o,c){const f=new $,p=new AbortController,D=setTimeout(()=>{p.abort(),Di(f,"TestPingServer: timeout",!1,c)},1e4);fetch(o,{signal:p.signal}).then(O=>{clearTimeout(D),O.ok?Di(f,"TestPingServer: ok",!0,c):Di(f,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(D),Di(f,"TestPingServer: error",!1,c)})}function Di(o,c,f,p,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),p(f)}catch{}}function ab(){this.g=new Ol}function ob(o,c,f){const p=f||"";try{qg(o,function(D,O){let B=D;h(D)&&(B=Si(D)),c.push(p+O+"="+encodeURIComponent(B))})}catch(D){throw c.push(p+"type="+encodeURIComponent("_badmap")),D}}function Bl(o){this.l=o.Ub||null,this.j=o.eb||!1}N(Bl,La),Bl.prototype.g=function(){return new ql(this.l,this.j)},Bl.prototype.i=function(o){return function(){return o}}({});function ql(o,c){ae.call(this),this.D=o,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(ql,ae),e=ql.prototype,e.open=function(o,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=c,this.readyState=1,Fa(this)},e.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const c={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(c.body=o),(this.D||l).fetch(new Request(this.A,c)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ha(this)),this.readyState=0},e.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,Fa(this)),this.g&&(this.readyState=3,Fa(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Xg(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function Xg(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}e.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var c=o.value?o.value:new Uint8Array(0);(c=this.v.decode(c,{stream:!o.done}))&&(this.response=this.responseText+=c)}o.done?Ha(this):Fa(this),this.readyState==3&&Xg(this)}},e.Ra=function(o){this.g&&(this.response=this.responseText=o,Ha(this))},e.Qa=function(o){this.g&&(this.response=o,Ha(this))},e.ga=function(){this.g&&Ha(this)};function Ha(o){o.readyState=4,o.l=null,o.j=null,o.v=null,Fa(o)}e.setRequestHeader=function(o,c){this.u.append(o,c)},e.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],c=this.h.entries();for(var f=c.next();!f.done;)f=f.value,o.push(f[0]+": "+f[1]),f=c.next();return o.join(`\r
`)};function Fa(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(ql.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function $g(o){let c="";return H(o,function(f,p){c+=p,c+=":",c+=f,c+=`\r
`}),c}function wh(o,c,f){t:{for(p in f){var p=!1;break t}p=!0}p||(f=$g(f),typeof o=="string"?f!=null&&encodeURIComponent(String(f)):Pt(o,c,f))}function Kt(o){ae.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(Kt,ae);var lb=/^https?$/i,ub=["POST","PUT"];e=Kt.prototype,e.Ha=function(o){this.J=o},e.ea=function(o,c,f,p){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);c=c?c.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():At.g(),this.v=this.o?wi(this.o):wi(At),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(c,String(o),!0),this.B=!1}catch(O){Zg(this,O);return}if(o=f||"",f=new Map(this.headers),p)if(Object.getPrototypeOf(p)===Object.prototype)for(var D in p)f.set(D,p[D]);else if(typeof p.keys=="function"&&typeof p.get=="function")for(const O of p.keys())f.set(O,p.get(O));else throw Error("Unknown input type for opt_headers: "+String(p));p=Array.from(f.keys()).find(O=>O.toLowerCase()=="content-type"),D=l.FormData&&o instanceof l.FormData,!(0<=Array.prototype.indexOf.call(ub,c,void 0))||p||D||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[O,B]of f)this.g.setRequestHeader(O,B);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{tp(this),this.u=!0,this.g.send(o),this.u=!1}catch(O){Zg(this,O)}};function Zg(o,c){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=c,o.m=5,Wg(o),Hl(o)}function Wg(o){o.A||(o.A=!0,fe(o,"complete"),fe(o,"error"))}e.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,fe(this,"complete"),fe(this,"abort"),Hl(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Hl(this,!0)),Kt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Jg(this):this.bb())},e.bb=function(){Jg(this)};function Jg(o){if(o.h&&typeof a<"u"&&(!o.v[1]||Hn(o)!=4||o.Z()!=2)){if(o.u&&Hn(o)==4)xl(o.Ea,0,o);else if(fe(o,"readystatechange"),Hn(o)==4){o.h=!1;try{const B=o.Z();t:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break t;default:c=!1}var f;if(!(f=c)){var p;if(p=B===0){var D=String(o.D).match(Hg)[1]||null;!D&&l.self&&l.self.location&&(D=l.self.location.protocol.slice(0,-1)),p=!lb.test(D?D.toLowerCase():"")}f=p}if(f)fe(o,"complete"),fe(o,"success");else{o.m=6;try{var O=2<Hn(o)?o.g.statusText:""}catch{O=""}o.l=O+" ["+o.Z()+"]",Wg(o)}}finally{Hl(o)}}}}function Hl(o,c){if(o.g){tp(o);const f=o.g,p=o.v[0]?()=>{}:null;o.g=null,o.v=null,c||fe(o,"ready");try{f.onreadystatechange=p}catch{}}}function tp(o){o.I&&(l.clearTimeout(o.I),o.I=null)}e.isActive=function(){return!!this.g};function Hn(o){return o.g?o.g.readyState:0}e.Z=function(){try{return 2<Hn(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(o){if(this.g){var c=this.g.responseText;return o&&c.indexOf(o)==0&&(c=c.substring(o.length)),Th(c)}};function ep(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function cb(o){const c={};o=(o.g&&2<=Hn(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let p=0;p<o.length;p++){if(v(o[p]))continue;var f=I(o[p]);const D=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const O=c[D]||[];c[D]=O,O.push(f)}E(c,function(p){return p.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ga(o,c,f){return f&&f.internalChannelParams&&f.internalChannelParams[o]||c}function np(o){this.Aa=0,this.i=[],this.j=new $,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ga("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ga("baseRetryDelayMs",5e3,o),this.cb=Ga("retryDelaySeedMs",1e4,o),this.Wa=Ga("forwardChannelMaxRetries",2,o),this.wa=Ga("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new Lg(o&&o.concurrentRequestLimit),this.Da=new ab,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=np.prototype,e.la=8,e.G=1,e.connect=function(o,c,f,p){q(0),this.W=o,this.H=c||{},f&&p!==void 0&&(this.H.OSID=f,this.H.OAID=p),this.F=this.X,this.I=hp(this,null,this.W),Gl(this)};function Rh(o){if(ip(o),o.G==3){var c=o.U++,f=qn(o.I);if(Pt(f,"SID",o.K),Pt(f,"RID",c),Pt(f,"TYPE","terminate"),Qa(o,f),c=new Qt(o,o.j,c),c.L=2,c.v=zl(qn(f)),f=!1,l.navigator&&l.navigator.sendBeacon)try{f=l.navigator.sendBeacon(c.v.toString(),"")}catch{}!f&&l.Image&&(new Image().src=c.v,f=!0),f||(c.g=fp(c.j,null),c.g.ea(c.v)),c.F=Date.now(),Rr(c)}cp(o)}function Fl(o){o.g&&(Ch(o),o.g.cancel(),o.g=null)}function ip(o){Fl(o),o.u&&(l.clearTimeout(o.u),o.u=null),Ql(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&l.clearTimeout(o.s),o.s=null)}function Gl(o){if(!Ug(o.h)&&!o.s){o.s=!0;var c=o.Ga;Y||Dt(),tt||(Y(),tt=!0),wt.add(c,o),o.B=0}}function hb(o,c){return jg(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=c.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=W(m(o.Ga,o,c),up(o,o.B)),o.B++,!0)}e.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const D=new Qt(this,this.j,o);let O=this.o;if(this.S&&(O?(O=y(O),b(O,this.S)):O=this.S),this.m!==null||this.O||(D.H=O,O=null),this.P)t:{for(var c=0,f=0;f<this.i.length;f++){e:{var p=this.i[f];if("__data__"in p.map&&(p=p.map.__data__,typeof p=="string")){p=p.length;break e}p=void 0}if(p===void 0)break;if(c+=p,4096<c){c=f;break t}if(c===4096||f===this.i.length-1){c=f+1;break t}}c=1e3}else c=1e3;c=sp(this,D,c),f=qn(this.I),Pt(f,"RID",o),Pt(f,"CVER",22),this.D&&Pt(f,"X-HTTP-Session-Id",this.D),Qa(this,f),O&&(this.O?c="headers="+encodeURIComponent(String($g(O)))+"&"+c:this.m&&wh(f,this.m,O)),Sh(this.h,D),this.Ua&&Pt(f,"TYPE","init"),this.P?(Pt(f,"$req",c),Pt(f,"SID","null"),D.T=!0,Ri(D,f,null)):Ri(D,f,c),this.G=2}}else this.G==3&&(o?rp(this,o):this.i.length==0||Ug(this.h)||rp(this))};function rp(o,c){var f;c?f=c.l:f=o.U++;const p=qn(o.I);Pt(p,"SID",o.K),Pt(p,"RID",f),Pt(p,"AID",o.T),Qa(o,p),o.m&&o.o&&wh(p,o.m,o.o),f=new Qt(o,o.j,f,o.B+1),o.m===null&&(f.H=o.o),c&&(o.i=c.D.concat(o.i)),c=sp(o,f,1e3),f.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),Sh(o.h,f),Ri(f,p,c)}function Qa(o,c){o.H&&H(o.H,function(f,p){Pt(c,p,f)}),o.l&&qg({},function(f,p){Pt(c,p,f)})}function sp(o,c,f){f=Math.min(o.i.length,f);var p=o.l?m(o.l.Na,o.l,o):null;t:{var D=o.i;let O=-1;for(;;){const B=["count="+f];O==-1?0<f?(O=D[0].g,B.push("ofs="+O)):O=0:B.push("ofs="+O);let kt=!0;for(let ve=0;ve<f;ve++){let yt=D[ve].g;const Re=D[ve].map;if(yt-=O,0>yt)O=Math.max(0,D[ve].g-100),kt=!1;else try{ob(Re,B,"req"+yt+"_")}catch{p&&p(Re)}}if(kt){p=B.join("&");break t}}}return o=o.i.splice(0,f),c.D=o,p}function ap(o){if(!o.g&&!o.u){o.Y=1;var c=o.Fa;Y||Dt(),tt||(Y(),tt=!0),wt.add(c,o),o.v=0}}function Ih(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=W(m(o.Fa,o),up(o,o.v)),o.v++,!0)}e.Fa=function(){if(this.u=null,op(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=W(m(this.ab,this),o)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,q(10),Fl(this),op(this))};function Ch(o){o.A!=null&&(l.clearTimeout(o.A),o.A=null)}function op(o){o.g=new Qt(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var c=qn(o.qa);Pt(c,"RID","rpc"),Pt(c,"SID",o.K),Pt(c,"AID",o.T),Pt(c,"CI",o.F?"0":"1"),!o.F&&o.ja&&Pt(c,"TO",o.ja),Pt(c,"TYPE","xmlhttp"),Qa(o,c),o.m&&o.o&&wh(c,o.m,o.o),o.L&&(o.g.I=o.L);var f=o.g;o=o.ia,f.L=1,f.v=zl(qn(c)),f.m=null,f.P=!0,Ii(f,o)}e.Za=function(){this.C!=null&&(this.C=null,Fl(this),Ih(this),q(19))};function Ql(o){o.C!=null&&(l.clearTimeout(o.C),o.C=null)}function lp(o,c){var f=null;if(o.g==c){Ql(o),Ch(o),o.g=null;var p=2}else if(bh(o.h,c))f=c.D,zg(o.h,c),p=1;else return;if(o.G!=0){if(c.o)if(p==1){f=c.m?c.m.length:0,c=Date.now()-c.F;var D=o.B;p=cs(),fe(p,new X(p,f)),Gl(o)}else ap(o);else if(D=c.s,D==3||D==0&&0<c.X||!(p==1&&hb(o,c)||p==2&&Ih(o)))switch(f&&0<f.length&&(c=o.h,c.i=c.i.concat(f)),D){case 1:Dr(o,5);break;case 4:Dr(o,10);break;case 3:Dr(o,6);break;default:Dr(o,2)}}}function up(o,c){let f=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(f*=2),f*c}function Dr(o,c){if(o.j.info("Error code "+c),c==2){var f=m(o.fb,o),p=o.Xa;const D=!p;p=new Cr(p||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Ul(p,"https"),zl(p),D?rb(p.toString(),f):sb(p.toString(),f)}else q(2);o.G=0,o.l&&o.l.sa(c),cp(o),ip(o)}e.fb=function(o){o?(this.j.info("Successfully pinged google.com"),q(2)):(this.j.info("Failed to ping google.com"),q(1))};function cp(o){if(o.G=0,o.ka=[],o.l){const c=Bg(o.h);(c.length!=0||o.i.length!=0)&&(V(o.ka,c),V(o.ka,o.i),o.h.i.length=0,k(o.i),o.i.length=0),o.l.ra()}}function hp(o,c,f){var p=f instanceof Cr?qn(f):new Cr(f);if(p.g!="")c&&(p.g=c+"."+p.g),jl(p,p.s);else{var D=l.location;p=D.protocol,c=c?c+"."+D.hostname:D.hostname,D=+D.port;var O=new Cr(null);p&&Ul(O,p),c&&(O.g=c),D&&jl(O,D),f&&(O.l=f),p=O}return f=o.D,c=o.ya,f&&c&&Pt(p,f,c),Pt(p,"VER",o.la),Qa(o,p),p}function fp(o,c,f){if(c&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return c=o.Ca&&!o.pa?new Kt(new Bl({eb:f})):new Kt(o.pa),c.Ha(o.J),c}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function dp(){}e=dp.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function Yl(){}Yl.prototype.g=function(o,c){return new Ke(o,c)};function Ke(o,c){ae.call(this),this.g=new np(c),this.l=o,this.h=c&&c.messageUrlParams||null,o=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(o?o["X-WebChannel-Content-Type"]=c.messageContentType:o={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.va&&(o?o["X-WebChannel-Client-Profile"]=c.va:o={"X-WebChannel-Client-Profile":c.va}),this.g.S=o,(o=c&&c.Sb)&&!v(o)&&(this.g.m=o),this.v=c&&c.supportsCrossDomainXhr||!1,this.u=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!v(c)&&(this.g.D=c,o=this.h,o!==null&&c in o&&(o=this.h,c in o&&delete o[c])),this.j=new fs(this)}N(Ke,ae),Ke.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ke.prototype.close=function(){Rh(this.g)},Ke.prototype.o=function(o){var c=this.g;if(typeof o=="string"){var f={};f.__data__=o,o=f}else this.u&&(f={},f.__data__=Si(o),o=f);c.i.push(new KA(c.Ya++,o)),c.G==3&&Gl(c)},Ke.prototype.N=function(){this.g.l=null,delete this.j,Rh(this.g),delete this.g,Ke.aa.N.call(this)};function mp(o){ls.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var c=o.__sm__;if(c){t:{for(const f in c){o=f;break t}o=void 0}(this.i=o)&&(o=this.i,c=c!==null&&o in c?c[o]:void 0),this.data=c}else this.data=o}N(mp,ls);function gp(){us.call(this),this.status=1}N(gp,us);function fs(o){this.g=o}N(fs,dp),fs.prototype.ua=function(){fe(this.g,"a")},fs.prototype.ta=function(o){fe(this.g,new mp(o))},fs.prototype.sa=function(o){fe(this.g,new gp)},fs.prototype.ra=function(){fe(this.g,"b")},Yl.prototype.createWebChannel=Yl.prototype.g,Ke.prototype.send=Ke.prototype.o,Ke.prototype.open=Ke.prototype.m,Ke.prototype.close=Ke.prototype.close,h1=function(){return new Yl},c1=function(){return cs()},u1=Sn,Id={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Rt.NO_ERROR=0,Rt.TIMEOUT=8,Rt.HTTP_ERROR=6,Vu=Rt,Zt.COMPLETE="complete",l1=Zt,kl.EventType=Sr,Sr.OPEN="a",Sr.CLOSE="b",Sr.ERROR="c",Sr.MESSAGE="d",ae.prototype.listen=ae.prototype.K,so=kl,Kt.prototype.listenOnce=Kt.prototype.L,Kt.prototype.getLastError=Kt.prototype.Ka,Kt.prototype.getLastErrorCode=Kt.prototype.Ba,Kt.prototype.getStatus=Kt.prototype.Z,Kt.prototype.getResponseJson=Kt.prototype.Oa,Kt.prototype.getResponseText=Kt.prototype.oa,Kt.prototype.send=Kt.prototype.ea,Kt.prototype.setWithCredentials=Kt.prototype.Ha,o1=Kt}).apply(typeof hu<"u"?hu:typeof self<"u"?self:typeof window<"u"?window:{});const p_="@firebase/firestore",y_="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}De.UNAUTHENTICATED=new De(null),De.GOOGLE_CREDENTIALS=new De("google-credentials-uid"),De.FIRST_PARTY=new De("first-party-uid"),De.MOCK_USER=new De("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wa="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $r=new Qm("@firebase/firestore");function Ts(){return $r.logLevel}function G(e,...t){if($r.logLevel<=ht.DEBUG){const n=t.map(rg);$r.debug(`Firestore (${wa}): ${e}`,...n)}}function gi(e,...t){if($r.logLevel<=ht.ERROR){const n=t.map(rg);$r.error(`Firestore (${wa}): ${e}`,...n)}}function oa(e,...t){if($r.logLevel<=ht.WARN){const n=t.map(rg);$r.warn(`Firestore (${wa}): ${e}`,...n)}}function rg(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J(e,t,n){let i="Unexpected state";typeof t=="string"?i=t:n=t,f1(e,i,n)}function f1(e,t,n){let i=`FIRESTORE (${wa}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw gi(i),new Error(i)}function Et(e,t,n,i){let r="Unexpected state";typeof n=="string"?r=n:i=n,e||f1(t,r,i)}function rt(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class K extends _i{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d1{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class $C{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(De.UNAUTHENTICATED))}shutdown(){}}class ZC{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class WC{constructor(t){this.t=t,this.currentUser=De.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){Et(this.o===void 0,42304);let i=this.i;const r=u=>this.i!==i?(i=this.i,n(u)):Promise.resolve();let s=new or;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new or,t.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const u=s;t.enqueueRetryable(async()=>{await u.promise,await r(this.currentUser)})},l=u=>{G("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(G("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new or)}},0),a()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==t?(G("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Et(typeof i.accessToken=="string",31837,{l:i}),new d1(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Et(t===null||typeof t=="string",2055,{h:t}),new De(t)}}class JC{constructor(t,n,i){this.P=t,this.T=n,this.I=i,this.type="FirstParty",this.user=De.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class t4{constructor(t,n,i){this.P=t,this.T=n,this.I=i}getToken(){return Promise.resolve(new JC(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable(()=>n(De.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class __{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class e4{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,fn(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){Et(this.o===void 0,3512);const i=s=>{s.error!=null&&G("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,G("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>i(s))};const r=s=>{G("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?r(s):G("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new __(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(Et(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new __(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n4(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let i=0;i<e;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m1(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g1{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=n4(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<n&&(i+=t.charAt(r[s]%62))}return i}}function at(e,t){return e<t?-1:e>t?1:0}function Cd(e,t){let n=0;for(;n<e.length&&n<t.length;){const i=e.codePointAt(n),r=t.codePointAt(n);if(i!==r){if(i<128&&r<128)return at(i,r);{const s=m1(),a=i4(s.encode(v_(e,n)),s.encode(v_(t,n)));return a!==0?a:at(i,r)}}n+=i>65535?2:1}return at(e.length,t.length)}function v_(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function i4(e,t){for(let n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return at(e[n],t[n]);return at(e.length,t.length)}function la(e,t,n){return e.length===t.length&&e.every((i,r)=>n(i,t[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T_=-62135596800,E_=1e6;class ue{static now(){return ue.fromMillis(Date.now())}static fromDate(t){return ue.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),i=Math.floor((t-1e3*n)*E_);return new ue(n,i)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new K(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new K(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<T_)throw new K(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new K(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/E_}_compareTo(t){return this.seconds===t.seconds?at(this.nanoseconds,t.nanoseconds):at(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds-T_;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{static fromTimestamp(t){return new it(t)}static min(){return new it(new ue(0,0))}static max(){return new it(new ue(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A_="__name__";class In{constructor(t,n,i){n===void 0?n=0:n>t.length&&J(637,{offset:n,range:t.length}),i===void 0?i=t.length-n:i>t.length-n&&J(1746,{length:i,range:t.length-n}),this.segments=t,this.offset=n,this.len=i}get length(){return this.len}isEqual(t){return In.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof In?t.forEach(i=>{n.push(i)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,i=this.limit();n<i;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const i=Math.min(t.length,n.length);for(let r=0;r<i;r++){const s=In.compareSegments(t.get(r),n.get(r));if(s!==0)return s}return at(t.length,n.length)}static compareSegments(t,n){const i=In.isNumericId(t),r=In.isNumericId(n);return i&&!r?-1:!i&&r?1:i&&r?In.extractNumericId(t).compare(In.extractNumericId(n)):Cd(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return ar.fromString(t.substring(4,t.length-2))}}class Lt extends In{construct(t,n,i){return new Lt(t,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const i of t){if(i.indexOf("//")>=0)throw new K(U.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new Lt(n)}static emptyPath(){return new Lt([])}}const r4=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class be extends In{construct(t,n,i){return new be(t,n,i)}static isValidIdentifier(t){return r4.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),be.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===A_}static keyField(){return new be([A_])}static fromServerFormat(t){const n=[];let i="",r=0;const s=()=>{if(i.length===0)throw new K(U.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;r<t.length;){const l=t[r];if(l==="\\"){if(r+1===t.length)throw new K(U.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[r+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new K(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=u,r+=2}else l==="`"?(a=!a,r++):l!=="."||a?(i+=l,r++):(s(),r++)}if(s(),a)throw new K(U.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new be(n)}static emptyPath(){return new be([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(t){this.path=t}static fromPath(t){return new Z(Lt.fromString(t))}static fromName(t){return new Z(Lt.fromString(t).popFirst(5))}static empty(){return new Z(Lt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Lt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return Lt.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Z(new Lt(t.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yo=-1;function s4(e,t){const n=e.toTimestamp().seconds,i=e.toTimestamp().nanoseconds+1,r=it.fromTimestamp(i===1e9?new ue(n+1,0):new ue(n,i));return new fr(r,Z.empty(),t)}function a4(e){return new fr(e.readTime,e.key,Yo)}class fr{constructor(t,n,i){this.readTime=t,this.documentKey=n,this.largestBatchId=i}static min(){return new fr(it.min(),Z.empty(),Yo)}static max(){return new fr(it.max(),Z.empty(),Yo)}}function o4(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=Z.comparator(e.documentKey,t.documentKey),n!==0?n:at(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class u4{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ra(e){if(e.code!==U.FAILED_PRECONDITION||e.message!==l4)throw e;G("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&J(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new P((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,r)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof P?n:P.resolve(n)}catch(n){return P.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):P.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):P.reject(n)}static resolve(t){return new P((n,i)=>{n(t)})}static reject(t){return new P((n,i)=>{i(t)})}static waitFor(t){return new P((n,i)=>{let r=0,s=0,a=!1;t.forEach(l=>{++r,l.next(()=>{++s,a&&s===r&&n()},u=>i(u))}),a=!0,s===r&&n()})}static or(t){let n=P.resolve(!1);for(const i of t)n=n.next(r=>r?P.resolve(r):i());return n}static forEach(t,n){const i=[];return t.forEach((r,s)=>{i.push(n.call(this,r,s))}),this.waitFor(i)}static mapArray(t,n){return new P((i,r)=>{const s=t.length,a=new Array(s);let l=0;for(let u=0;u<s;u++){const h=u;n(t[h]).next(d=>{a[h]=d,++l,l===s&&i(a)},d=>r(d))}})}static doWhile(t,n){return new P((i,r)=>{const s=()=>{t()===!0?n().next(()=>{s()},r):i()};s()})}}function c4(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ia(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=i=>this.ue(i),this.ce=i=>n.writeSequenceNumber(i))}ue(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ce&&this.ce(t),t}}rh.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sg=-1;function sh(e){return e==null}function wc(e){return e===0&&1/e==-1/0}function h4(e){return typeof e=="number"&&Number.isInteger(e)&&!wc(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p1="";function f4(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=b_(t)),t=d4(e.get(n),t);return b_(t)}function d4(e,t){let n=t;const i=e.length;for(let r=0;r<i;r++){const s=e.charAt(r);switch(s){case"\0":n+="";break;case p1:n+="";break;default:n+=s}}return n}function b_(e){return e+p1+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S_(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function ns(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function y1(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(t,n){this.comparator=t,this.root=n||Ee.EMPTY}insert(t,n){return new Ft(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Ee.BLACK,null,null))}remove(t){return new Ft(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ee.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(t){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,i)=>(t(n,i),!1))}toString(){const t=[];return this.inorderTraversal((n,i)=>(t.push(`${n}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new fu(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new fu(this.root,t,this.comparator,!1)}getReverseIterator(){return new fu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new fu(this.root,t,this.comparator,!0)}}class fu{constructor(t,n,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=n?i(t.key,n):1,n&&r&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Ee{constructor(t,n,i,r,s){this.key=t,this.value=n,this.color=i??Ee.RED,this.left=r??Ee.EMPTY,this.right=s??Ee.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,i,r,s){return new Ee(t??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,i){let r=this;const s=i(t,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(t,n,i),null):s===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(t,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Ee.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let i,r=this;if(n(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(t,r.key)===0){if(r.right.isEmpty())return Ee.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Ee.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Ee.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw J(43730,{key:this.key,value:this.value});if(this.right.isRed())throw J(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw J(27949);return t+(this.isRed()?0:1)}}Ee.EMPTY=null,Ee.RED=!0,Ee.BLACK=!1;Ee.EMPTY=new class{constructor(){this.size=0}get key(){throw J(57766)}get value(){throw J(16141)}get color(){throw J(16727)}get left(){throw J(29726)}get right(){throw J(36894)}copy(t,n,i,r,s){return this}insert(t,n,i){return new Ee(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(t){this.comparator=t,this.data=new Ft(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,i)=>(t(n),!1))}forEachInRange(t,n){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;n(r.key)}}forEachWhile(t,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new w_(this.data.getIterator())}getIteratorFrom(t){return new w_(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(i=>{n=n.add(i)}),n}isEqual(t){if(!(t instanceof ce)||this.size!==t.size)return!1;const n=this.data.getIterator(),i=t.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new ce(this.comparator);return n.data=t,n}}class w_{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(t){this.fields=t,t.sort(be.comparator)}static empty(){return new Tn([])}unionWith(t){let n=new ce(be.comparator);for(const i of this.fields)n=n.add(i);for(const i of t)n=n.add(i);return new Tn(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return la(this.fields,t.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new _1("Invalid base64 string: "+s):s}}(t);return new we(n)}static fromUint8Array(t){const n=function(r){let s="";for(let a=0;a<r.length;++a)s+=String.fromCharCode(r[a]);return s}(t);return new we(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return at(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}we.EMPTY_BYTE_STRING=new we("");const m4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function dr(e){if(Et(!!e,39018),typeof e=="string"){let t=0;const n=m4.exec(e);if(Et(!!n,46558,{timestamp:e}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}const i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:ee(e.seconds),nanos:ee(e.nanos)}}function ee(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function mr(e){return typeof e=="string"?we.fromBase64String(e):we.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v1="server_timestamp",T1="__type__",E1="__previous_value__",A1="__local_write_time__";function ag(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{})[T1])===null||n===void 0?void 0:n.stringValue)===v1}function ah(e){const t=e.mapValue.fields[E1];return ag(t)?ah(t):t}function Ko(e){const t=dr(e.mapValue.fields[A1].timestampValue);return new ue(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g4{constructor(t,n,i,r,s,a,l,u,h,d){this.databaseId=t,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=h,this.isUsingEmulator=d}}const Rc="(default)";class Xo{constructor(t,n){this.projectId=t,this.database=n||Rc}static empty(){return new Xo("","")}get isDefaultDatabase(){return this.database===Rc}isEqual(t){return t instanceof Xo&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b1="__type__",p4="__max__",du={mapValue:{}},S1="__vector__",Ic="value";function gr(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?ag(e)?4:_4(e)?9007199254740991:y4(e)?10:11:J(28295,{value:e})}function Un(e,t){if(e===t)return!0;const n=gr(e);if(n!==gr(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Ko(e).isEqual(Ko(t));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const a=dr(r.timestampValue),l=dr(s.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(r,s){return mr(r.bytesValue).isEqual(mr(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(r,s){return ee(r.geoPointValue.latitude)===ee(s.geoPointValue.latitude)&&ee(r.geoPointValue.longitude)===ee(s.geoPointValue.longitude)}(e,t);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return ee(r.integerValue)===ee(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const a=ee(r.doubleValue),l=ee(s.doubleValue);return a===l?wc(a)===wc(l):isNaN(a)&&isNaN(l)}return!1}(e,t);case 9:return la(e.arrayValue.values||[],t.arrayValue.values||[],Un);case 10:case 11:return function(r,s){const a=r.mapValue.fields||{},l=s.mapValue.fields||{};if(S_(a)!==S_(l))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!Un(a[u],l[u])))return!1;return!0}(e,t);default:return J(52216,{left:e})}}function $o(e,t){return(e.values||[]).find(n=>Un(n,t))!==void 0}function ua(e,t){if(e===t)return 0;const n=gr(e),i=gr(t);if(n!==i)return at(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return at(e.booleanValue,t.booleanValue);case 2:return function(s,a){const l=ee(s.integerValue||s.doubleValue),u=ee(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(e,t);case 3:return R_(e.timestampValue,t.timestampValue);case 4:return R_(Ko(e),Ko(t));case 5:return Cd(e.stringValue,t.stringValue);case 6:return function(s,a){const l=mr(s),u=mr(a);return l.compareTo(u)}(e.bytesValue,t.bytesValue);case 7:return function(s,a){const l=s.split("/"),u=a.split("/");for(let h=0;h<l.length&&h<u.length;h++){const d=at(l[h],u[h]);if(d!==0)return d}return at(l.length,u.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,a){const l=at(ee(s.latitude),ee(a.latitude));return l!==0?l:at(ee(s.longitude),ee(a.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return I_(e.arrayValue,t.arrayValue);case 10:return function(s,a){var l,u,h,d;const g=s.fields||{},m=a.fields||{},_=(l=g[Ic])===null||l===void 0?void 0:l.arrayValue,N=(u=m[Ic])===null||u===void 0?void 0:u.arrayValue,k=at(((h=_==null?void 0:_.values)===null||h===void 0?void 0:h.length)||0,((d=N==null?void 0:N.values)===null||d===void 0?void 0:d.length)||0);return k!==0?k:I_(_,N)}(e.mapValue,t.mapValue);case 11:return function(s,a){if(s===du.mapValue&&a===du.mapValue)return 0;if(s===du.mapValue)return 1;if(a===du.mapValue)return-1;const l=s.fields||{},u=Object.keys(l),h=a.fields||{},d=Object.keys(h);u.sort(),d.sort();for(let g=0;g<u.length&&g<d.length;++g){const m=Cd(u[g],d[g]);if(m!==0)return m;const _=ua(l[u[g]],h[d[g]]);if(_!==0)return _}return at(u.length,d.length)}(e.mapValue,t.mapValue);default:throw J(23264,{Pe:n})}}function R_(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return at(e,t);const n=dr(e),i=dr(t),r=at(n.seconds,i.seconds);return r!==0?r:at(n.nanos,i.nanos)}function I_(e,t){const n=e.values||[],i=t.values||[];for(let r=0;r<n.length&&r<i.length;++r){const s=ua(n[r],i[r]);if(s)return s}return at(n.length,i.length)}function ca(e){return Dd(e)}function Dd(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const i=dr(n);return`time(${i.seconds},${i.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return mr(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return Z.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let i="[",r=!0;for(const s of n.values||[])r?r=!1:i+=",",i+=Dd(s);return i+"]"}(e.arrayValue):"mapValue"in e?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",s=!0;for(const a of i)s?s=!1:r+=",",r+=`${a}:${Dd(n.fields[a])}`;return r+"}"}(e.mapValue):J(61005,{value:e})}function Pu(e){switch(gr(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=ah(e);return t?16+Pu(t):16;case 5:return 2*e.stringValue.length;case 6:return mr(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((r,s)=>r+Pu(s),0)}(e.arrayValue);case 10:case 11:return function(i){let r=0;return ns(i.fields,(s,a)=>{r+=s.length+Pu(a)}),r}(e.mapValue);default:throw J(13486,{value:e})}}function C_(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function xd(e){return!!e&&"integerValue"in e}function og(e){return!!e&&"arrayValue"in e}function D_(e){return!!e&&"nullValue"in e}function x_(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Lu(e){return!!e&&"mapValue"in e}function y4(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{})[b1])===null||n===void 0?void 0:n.stringValue)===S1}function Io(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return ns(e.mapValue.fields,(n,i)=>t.mapValue.fields[n]=Io(i)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Io(e.arrayValue.values[n]);return t}return Object.assign({},e)}function _4(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===p4}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(t){this.value=t}static empty(){return new dn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let i=0;i<t.length-1;++i)if(n=(n.mapValue.fields||{})[t.get(i)],!Lu(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Io(n)}setAll(t){let n=be.emptyPath(),i={},r=[];t.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,i,r),i={},r=[],n=l.popLast()}a?i[l.lastSegment()]=Io(a):r.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,i,r)}delete(t){const n=this.field(t.popLast());Lu(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Un(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=n.mapValue.fields[t.get(i)];Lu(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[t.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(t,n,i){ns(n,(r,s)=>t[r]=s);for(const r of i)delete t[r]}clone(){return new dn(Io(this.value))}}function w1(e){const t=[];return ns(e.fields,(n,i)=>{const r=new be([n]);if(Lu(i)){const s=w1(i.mapValue).fields;if(s.length===0)t.push(r);else for(const a of s)t.push(r.child(a))}else t.push(r)}),new Tn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(t,n,i,r,s,a,l){this.key=t,this.documentType=n,this.version=i,this.readTime=r,this.createTime=s,this.data=a,this.documentState=l}static newInvalidDocument(t){return new xe(t,0,it.min(),it.min(),it.min(),dn.empty(),0)}static newFoundDocument(t,n,i,r){return new xe(t,1,n,it.min(),i,r,0)}static newNoDocument(t,n){return new xe(t,2,n,it.min(),it.min(),dn.empty(),0)}static newUnknownDocument(t,n){return new xe(t,3,n,it.min(),it.min(),dn.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(it.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=dn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=dn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=it.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof xe&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new xe(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(t,n){this.position=t,this.inclusive=n}}function N_(e,t,n){let i=0;for(let r=0;r<e.position.length;r++){const s=t[r],a=e.position[r];if(s.field.isKeyField()?i=Z.comparator(Z.fromName(a.referenceValue),n.key):i=ua(a,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function O_(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Un(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc{constructor(t,n="asc"){this.field=t,this.dir=n}}function v4(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{}class re extends R1{constructor(t,n,i){super(),this.field=t,this.op=n,this.value=i}static create(t,n,i){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,i):new E4(t,n,i):n==="array-contains"?new S4(t,i):n==="in"?new w4(t,i):n==="not-in"?new R4(t,i):n==="array-contains-any"?new I4(t,i):new re(t,n,i)}static createKeyFieldInFilter(t,n,i){return n==="in"?new A4(t,i):new b4(t,i)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ua(n,this.value)):n!==null&&gr(this.value)===gr(n)&&this.matchesComparison(ua(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return J(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class An extends R1{constructor(t,n){super(),this.filters=t,this.op=n,this.Te=null}static create(t,n){return new An(t,n)}matches(t){return I1(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function I1(e){return e.op==="and"}function C1(e){return T4(e)&&I1(e)}function T4(e){for(const t of e.filters)if(t instanceof An)return!1;return!0}function Nd(e){if(e instanceof re)return e.field.canonicalString()+e.op.toString()+ca(e.value);if(C1(e))return e.filters.map(t=>Nd(t)).join(",");{const t=e.filters.map(n=>Nd(n)).join(",");return`${e.op}(${t})`}}function D1(e,t){return e instanceof re?function(i,r){return r instanceof re&&i.op===r.op&&i.field.isEqual(r.field)&&Un(i.value,r.value)}(e,t):e instanceof An?function(i,r){return r instanceof An&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,a,l)=>s&&D1(a,r.filters[l]),!0):!1}(e,t):void J(19439)}function x1(e){return e instanceof re?function(n){return`${n.field.canonicalString()} ${n.op} ${ca(n.value)}`}(e):e instanceof An?function(n){return n.op.toString()+" {"+n.getFilters().map(x1).join(" ,")+"}"}(e):"Filter"}class E4 extends re{constructor(t,n,i){super(t,n,i),this.key=Z.fromName(i.referenceValue)}matches(t){const n=Z.comparator(t.key,this.key);return this.matchesComparison(n)}}class A4 extends re{constructor(t,n){super(t,"in",n),this.keys=N1("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class b4 extends re{constructor(t,n){super(t,"not-in",n),this.keys=N1("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function N1(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>Z.fromName(i.referenceValue))}class S4 extends re{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return og(n)&&$o(n.arrayValue,this.value)}}class w4 extends re{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&$o(this.value.arrayValue,n)}}class R4 extends re{constructor(t,n){super(t,"not-in",n)}matches(t){if($o(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!$o(this.value.arrayValue,n)}}class I4 extends re{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!og(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>$o(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C4{constructor(t,n=null,i=[],r=[],s=null,a=null,l=null){this.path=t,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=a,this.endAt=l,this.Ie=null}}function k_(e,t=null,n=[],i=[],r=null,s=null,a=null){return new C4(e,t,n,i,r,s,a)}function lg(e){const t=rt(e);if(t.Ie===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(i=>Nd(i)).join(","),n+="|ob:",n+=t.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),sh(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(i=>ca(i)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(i=>ca(i)).join(",")),t.Ie=n}return t.Ie}function ug(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!v4(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!D1(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!O_(e.startAt,t.startAt)&&O_(e.endAt,t.endAt)}function Od(e){return Z.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{constructor(t,n=null,i=[],r=[],s=null,a="F",l=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=a,this.startAt=l,this.endAt=u,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function D4(e,t,n,i,r,s,a,l){return new Al(e,t,n,i,r,s,a,l)}function oh(e){return new Al(e)}function M_(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function O1(e){return e.collectionGroup!==null}function Co(e){const t=rt(e);if(t.Ee===null){t.Ee=[];const n=new Set;for(const s of t.explicitOrderBy)t.Ee.push(s),n.add(s.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new ce(be.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(t).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||t.Ee.push(new Dc(s,i))}),n.has(be.keyField().canonicalString())||t.Ee.push(new Dc(be.keyField(),i))}return t.Ee}function Vn(e){const t=rt(e);return t.de||(t.de=x4(t,Co(e))),t.de}function x4(e,t){if(e.limitType==="F")return k_(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new Dc(r.field,s)});const n=e.endAt?new Cc(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Cc(e.startAt.position,e.startAt.inclusive):null;return k_(e.path,e.collectionGroup,t,e.filters,e.limit,n,i)}}function kd(e,t){const n=e.filters.concat([t]);return new Al(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Md(e,t,n){return new Al(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function lh(e,t){return ug(Vn(e),Vn(t))&&e.limitType===t.limitType}function k1(e){return`${lg(Vn(e))}|lt:${e.limitType}`}function Es(e){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>x1(r)).join(", ")}]`),sh(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>ca(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>ca(r)).join(",")),`Target(${i})`}(Vn(e))}; limitType=${e.limitType})`}function uh(e,t){return t.isFoundDocument()&&function(i,r){const s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):Z.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(e,t)&&function(i,r){for(const s of Co(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(e,t)&&function(i,r){for(const s of i.filters)if(!s.matches(r))return!1;return!0}(e,t)&&function(i,r){return!(i.startAt&&!function(a,l,u){const h=N_(a,l,u);return a.inclusive?h<=0:h<0}(i.startAt,Co(i),r)||i.endAt&&!function(a,l,u){const h=N_(a,l,u);return a.inclusive?h>=0:h>0}(i.endAt,Co(i),r))}(e,t)}function N4(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function M1(e){return(t,n)=>{let i=!1;for(const r of Co(e)){const s=O4(r,t,n);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function O4(e,t,n){const i=e.field.isKeyField()?Z.comparator(t.key,n.key):function(s,a,l){const u=a.data.field(s),h=l.data.field(s);return u!==null&&h!==null?ua(u,h):J(42886)}(e.field,t,n);switch(e.dir){case"asc":return i;case"desc":return-1*i;default:return J(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,t))return s}}has(t){return this.get(t)!==void 0}set(t,n){const i=this.mapKeyFn(t),r=this.inner[i];if(r===void 0)return this.inner[i]=[[t,n]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return void(r[s]=[t,n]);r.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){ns(this.inner,(n,i)=>{for(const[r,s]of i)t(r,s)})}isEmpty(){return y1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k4=new Ft(Z.comparator);function pi(){return k4}const V1=new Ft(Z.comparator);function ao(...e){let t=V1;for(const n of e)t=t.insert(n.key,n);return t}function P1(e){let t=V1;return e.forEach((n,i)=>t=t.insert(n,i.overlayedDocument)),t}function Vr(){return Do()}function L1(){return Do()}function Do(){return new is(e=>e.toString(),(e,t)=>e.isEqual(t))}const M4=new Ft(Z.comparator),V4=new ce(Z.comparator);function ft(...e){let t=V4;for(const n of e)t=t.add(n);return t}const P4=new ce(at);function L4(){return P4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cg(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:wc(t)?"-0":t}}function U1(e){return{integerValue:""+e}}function U4(e,t){return h4(t)?U1(t):cg(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{constructor(){this._=void 0}}function j4(e,t,n){return e instanceof xc?function(r,s){const a={fields:{[T1]:{stringValue:v1},[A1]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&ag(s)&&(s=ah(s)),s&&(a.fields[E1]=s),{mapValue:a}}(n,t):e instanceof Zo?z1(e,t):e instanceof Wo?B1(e,t):function(r,s){const a=j1(r,s),l=V_(a)+V_(r.Re);return xd(a)&&xd(r.Re)?U1(l):cg(r.serializer,l)}(e,t)}function z4(e,t,n){return e instanceof Zo?z1(e,t):e instanceof Wo?B1(e,t):n}function j1(e,t){return e instanceof Nc?function(i){return xd(i)||function(s){return!!s&&"doubleValue"in s}(i)}(t)?t:{integerValue:0}:null}class xc extends ch{}class Zo extends ch{constructor(t){super(),this.elements=t}}function z1(e,t){const n=q1(t);for(const i of e.elements)n.some(r=>Un(r,i))||n.push(i);return{arrayValue:{values:n}}}class Wo extends ch{constructor(t){super(),this.elements=t}}function B1(e,t){let n=q1(t);for(const i of e.elements)n=n.filter(r=>!Un(r,i));return{arrayValue:{values:n}}}class Nc extends ch{constructor(t,n){super(),this.serializer=t,this.Re=n}}function V_(e){return ee(e.integerValue||e.doubleValue)}function q1(e){return og(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function B4(e,t){return e.field.isEqual(t.field)&&function(i,r){return i instanceof Zo&&r instanceof Zo||i instanceof Wo&&r instanceof Wo?la(i.elements,r.elements,Un):i instanceof Nc&&r instanceof Nc?Un(i.Re,r.Re):i instanceof xc&&r instanceof xc}(e.transform,t.transform)}class q4{constructor(t,n){this.version=t,this.transformResults=n}}class Pn{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Pn}static exists(t){return new Pn(void 0,t)}static updateTime(t){return new Pn(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Uu(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class hh{}function H1(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new hg(e.key,Pn.none()):new bl(e.key,e.data,Pn.none());{const n=e.data,i=dn.empty();let r=new ce(be.comparator);for(let s of t.fields)if(!r.has(s)){let a=n.field(s);a===null&&s.length>1&&(s=s.popLast(),a=n.field(s)),a===null?i.delete(s):i.set(s,a),r=r.add(s)}return new rs(e.key,i,new Tn(r.toArray()),Pn.none())}}function H4(e,t,n){e instanceof bl?function(r,s,a){const l=r.value.clone(),u=L_(r.fieldTransforms,s,a.transformResults);l.setAll(u),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(e,t,n):e instanceof rs?function(r,s,a){if(!Uu(r.precondition,s))return void s.convertToUnknownDocument(a.version);const l=L_(r.fieldTransforms,s,a.transformResults),u=s.data;u.setAll(F1(r)),u.setAll(l),s.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(e,t,n):function(r,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,t,n)}function xo(e,t,n,i){return e instanceof bl?function(s,a,l,u){if(!Uu(s.precondition,a))return l;const h=s.value.clone(),d=U_(s.fieldTransforms,u,a);return h.setAll(d),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null}(e,t,n,i):e instanceof rs?function(s,a,l,u){if(!Uu(s.precondition,a))return l;const h=U_(s.fieldTransforms,u,a),d=a.data;return d.setAll(F1(s)),d.setAll(h),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(e,t,n,i):function(s,a,l){return Uu(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(e,t,n)}function F4(e,t){let n=null;for(const i of e.fieldTransforms){const r=t.data.field(i.field),s=j1(i.transform,r||null);s!=null&&(n===null&&(n=dn.empty()),n.set(i.field,s))}return n||null}function P_(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&la(i,r,(s,a)=>B4(s,a))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class bl extends hh{constructor(t,n,i,r=[]){super(),this.key=t,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class rs extends hh{constructor(t,n,i,r,s=[]){super(),this.key=t,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function F1(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=e.data.field(n);t.set(n,i)}}),t}function L_(e,t,n){const i=new Map;Et(e.length===n.length,32656,{Ve:n.length,me:e.length});for(let r=0;r<n.length;r++){const s=e[r],a=s.transform,l=t.data.field(s.field);i.set(s.field,z4(a,l,n[r]))}return i}function U_(e,t,n){const i=new Map;for(const r of e){const s=r.transform,a=n.data.field(r.field);i.set(r.field,j4(s,a,t))}return i}class hg extends hh{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class G4 extends hh{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q4{constructor(t,n,i,r){this.batchId=t,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(t.key)&&H4(s,t,i[r])}}applyToLocalView(t,n){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(n=xo(i,t,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(n=xo(i,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const i=L1();return this.mutations.forEach(r=>{const s=t.get(r.key),a=s.overlayedDocument;let l=this.applyToLocalView(a,s.mutatedFields);l=n.has(r.key)?null:l;const u=H1(a,l);u!==null&&i.set(r.key,u),a.isValidDocument()||a.convertToNoDocument(it.min())}),i}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),ft())}isEqual(t){return this.batchId===t.batchId&&la(this.mutations,t.mutations,(n,i)=>P_(n,i))&&la(this.baseMutations,t.baseMutations,(n,i)=>P_(n,i))}}class fg{constructor(t,n,i,r){this.batch=t,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(t,n,i){Et(t.mutations.length===i.length,58842,{fe:t.mutations.length,ge:i.length});let r=function(){return M4}();const s=t.mutations;for(let a=0;a<s.length;a++)r=r.insert(s[a].key,i[a].version);return new fg(t,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y4{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K4{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ne,mt;function X4(e){switch(e){case U.OK:return J(64938);case U.CANCELLED:case U.UNKNOWN:case U.DEADLINE_EXCEEDED:case U.RESOURCE_EXHAUSTED:case U.INTERNAL:case U.UNAVAILABLE:case U.UNAUTHENTICATED:return!1;case U.INVALID_ARGUMENT:case U.NOT_FOUND:case U.ALREADY_EXISTS:case U.PERMISSION_DENIED:case U.FAILED_PRECONDITION:case U.ABORTED:case U.OUT_OF_RANGE:case U.UNIMPLEMENTED:case U.DATA_LOSS:return!0;default:return J(15467,{code:e})}}function G1(e){if(e===void 0)return gi("GRPC error has no .code"),U.UNKNOWN;switch(e){case ne.OK:return U.OK;case ne.CANCELLED:return U.CANCELLED;case ne.UNKNOWN:return U.UNKNOWN;case ne.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case ne.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case ne.INTERNAL:return U.INTERNAL;case ne.UNAVAILABLE:return U.UNAVAILABLE;case ne.UNAUTHENTICATED:return U.UNAUTHENTICATED;case ne.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case ne.NOT_FOUND:return U.NOT_FOUND;case ne.ALREADY_EXISTS:return U.ALREADY_EXISTS;case ne.PERMISSION_DENIED:return U.PERMISSION_DENIED;case ne.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case ne.ABORTED:return U.ABORTED;case ne.OUT_OF_RANGE:return U.OUT_OF_RANGE;case ne.UNIMPLEMENTED:return U.UNIMPLEMENTED;case ne.DATA_LOSS:return U.DATA_LOSS;default:return J(39323,{code:e})}}(mt=ne||(ne={}))[mt.OK=0]="OK",mt[mt.CANCELLED=1]="CANCELLED",mt[mt.UNKNOWN=2]="UNKNOWN",mt[mt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",mt[mt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",mt[mt.NOT_FOUND=5]="NOT_FOUND",mt[mt.ALREADY_EXISTS=6]="ALREADY_EXISTS",mt[mt.PERMISSION_DENIED=7]="PERMISSION_DENIED",mt[mt.UNAUTHENTICATED=16]="UNAUTHENTICATED",mt[mt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",mt[mt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",mt[mt.ABORTED=10]="ABORTED",mt[mt.OUT_OF_RANGE=11]="OUT_OF_RANGE",mt[mt.UNIMPLEMENTED=12]="UNIMPLEMENTED",mt[mt.INTERNAL=13]="INTERNAL",mt[mt.UNAVAILABLE=14]="UNAVAILABLE",mt[mt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $4=new ar([4294967295,4294967295],0);function j_(e){const t=m1().encode(e),n=new a1;return n.update(t),new Uint8Array(n.digest())}function z_(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),i=t.getUint32(4,!0),r=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new ar([n,i],0),new ar([r,s],0)]}class dg{constructor(t,n,i){if(this.bitmap=t,this.padding=n,this.hashCount=i,n<0||n>=8)throw new oo(`Invalid padding: ${n}`);if(i<0)throw new oo(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new oo(`Invalid hash count: ${i}`);if(t.length===0&&n!==0)throw new oo(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*t.length-n,this.ye=ar.fromNumber(this.pe)}we(t,n,i){let r=t.add(n.multiply(ar.fromNumber(i)));return r.compare($4)===1&&(r=new ar([r.getBits(0),r.getBits(1)],0)),r.modulo(this.ye).toNumber()}be(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.pe===0)return!1;const n=j_(t),[i,r]=z_(n);for(let s=0;s<this.hashCount;s++){const a=this.we(i,r,s);if(!this.be(a))return!1}return!0}static create(t,n,i){const r=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),a=new dg(s,r,n);return i.forEach(l=>a.insert(l)),a}insert(t){if(this.pe===0)return;const n=j_(t),[i,r]=z_(n);for(let s=0;s<this.hashCount;s++){const a=this.we(i,r,s);this.Se(a)}}Se(t){const n=Math.floor(t/8),i=t%8;this.bitmap[n]|=1<<i}}class oo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(t,n,i,r,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,n,i){const r=new Map;return r.set(t,Sl.createSynthesizedTargetChangeForCurrentChange(t,n,i)),new fh(it.min(),r,new Ft(at),pi(),ft())}}class Sl{constructor(t,n,i,r,s){this.resumeToken=t,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,n,i){return new Sl(i,n,ft(),ft(),ft())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(t,n,i,r){this.De=t,this.removedTargetIds=n,this.key=i,this.ve=r}}class Q1{constructor(t,n){this.targetId=t,this.Ce=n}}class Y1{constructor(t,n,i=we.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=n,this.resumeToken=i,this.cause=r}}class B_{constructor(){this.Fe=0,this.Me=q_(),this.xe=we.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(t){t.approximateByteSize()>0&&(this.Ne=!0,this.xe=t)}qe(){let t=ft(),n=ft(),i=ft();return this.Me.forEach((r,s)=>{switch(s){case 0:t=t.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:J(38017,{changeType:s})}}),new Sl(this.xe,this.Oe,t,n,i)}Qe(){this.Ne=!1,this.Me=q_()}$e(t,n){this.Ne=!0,this.Me=this.Me.insert(t,n)}Ue(t){this.Ne=!0,this.Me=this.Me.remove(t)}Ke(){this.Fe+=1}We(){this.Fe-=1,Et(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class Z4{constructor(t){this.ze=t,this.je=new Map,this.He=pi(),this.Je=mu(),this.Ye=mu(),this.Ze=new Ft(at)}Xe(t){for(const n of t.De)t.ve&&t.ve.isFoundDocument()?this.et(n,t.ve):this.tt(n,t.key,t.ve);for(const n of t.removedTargetIds)this.tt(n,t.key,t.ve)}nt(t){this.forEachTarget(t,n=>{const i=this.rt(n);switch(t.state){case 0:this.it(n)&&i.ke(t.resumeToken);break;case 1:i.We(),i.Be||i.Qe(),i.ke(t.resumeToken);break;case 2:i.We(),i.Be||this.removeTarget(n);break;case 3:this.it(n)&&(i.Ge(),i.ke(t.resumeToken));break;case 4:this.it(n)&&(this.st(n),i.ke(t.resumeToken));break;default:J(56790,{state:t.state})}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.je.forEach((i,r)=>{this.it(r)&&n(r)})}ot(t){const n=t.targetId,i=t.Ce.count,r=this._t(n);if(r){const s=r.target;if(Od(s))if(i===0){const a=new Z(s.path);this.tt(n,a,xe.newNoDocument(a,it.min()))}else Et(i===1,20013,{expectedCount:i});else{const a=this.ut(n);if(a!==i){const l=this.ct(t),u=l?this.lt(l,t,a):1;if(u!==0){this.st(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,h)}}}}}ct(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=n;let a,l;try{a=mr(i).toUint8Array()}catch(u){if(u instanceof _1)return oa("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new dg(a,r,s)}catch(u){return oa(u instanceof oo?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.pe===0?null:l}lt(t,n,i){return n.Ce.count===i-this.Tt(t,n.targetId)?0:2}Tt(t,n){const i=this.ze.getRemoteKeysForTarget(n);let r=0;return i.forEach(s=>{const a=this.ze.Pt(),l=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;t.mightContain(l)||(this.tt(n,s,null),r++)}),r}It(t){const n=new Map;this.je.forEach((s,a)=>{const l=this._t(a);if(l){if(s.current&&Od(l.target)){const u=new Z(l.target.path);this.Et(u).has(a)||this.dt(a,u)||this.tt(a,u,xe.newNoDocument(u,t))}s.Le&&(n.set(a,s.qe()),s.Qe())}});let i=ft();this.Ye.forEach((s,a)=>{let l=!0;a.forEachWhile(u=>{const h=this._t(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(i=i.add(s))}),this.He.forEach((s,a)=>a.setReadTime(t));const r=new fh(t,n,this.Ze,this.He,i);return this.He=pi(),this.Je=mu(),this.Ye=mu(),this.Ze=new Ft(at),r}et(t,n){if(!this.it(t))return;const i=this.dt(t,n.key)?2:0;this.rt(t).$e(n.key,i),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(t)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(t))}tt(t,n,i){if(!this.it(t))return;const r=this.rt(t);this.dt(t,n)?r.$e(n,1):r.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(t)),this.Ye=this.Ye.insert(n,this.At(n).add(t)),i&&(this.He=this.He.insert(n,i))}removeTarget(t){this.je.delete(t)}ut(t){const n=this.rt(t).qe();return this.ze.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ke(t){this.rt(t).Ke()}rt(t){let n=this.je.get(t);return n||(n=new B_,this.je.set(t,n)),n}At(t){let n=this.Ye.get(t);return n||(n=new ce(at),this.Ye=this.Ye.insert(t,n)),n}Et(t){let n=this.Je.get(t);return n||(n=new ce(at),this.Je=this.Je.insert(t,n)),n}it(t){const n=this._t(t)!==null;return n||G("WatchChangeAggregator","Detected inactive target",t),n}_t(t){const n=this.je.get(t);return n&&n.Be?null:this.ze.Rt(t)}st(t){this.je.set(t,new B_),this.ze.getRemoteKeysForTarget(t).forEach(n=>{this.tt(t,n,null)})}dt(t,n){return this.ze.getRemoteKeysForTarget(t).has(n)}}function mu(){return new Ft(Z.comparator)}function q_(){return new Ft(Z.comparator)}const W4={asc:"ASCENDING",desc:"DESCENDING"},J4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},tD={and:"AND",or:"OR"};class eD{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function Vd(e,t){return e.useProto3Json||sh(t)?t:{value:t}}function Oc(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function K1(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function nD(e,t){return Oc(e,t.toTimestamp())}function Ln(e){return Et(!!e,49232),it.fromTimestamp(function(n){const i=dr(n);return new ue(i.seconds,i.nanos)}(e))}function mg(e,t){return Pd(e,t).canonicalString()}function Pd(e,t){const n=function(r){return new Lt(["projects",r.projectId,"databases",r.database])}(e).child("documents");return t===void 0?n:n.child(t)}function X1(e){const t=Lt.fromString(e);return Et(tA(t),10190,{key:t.toString()}),t}function Ld(e,t){return mg(e.databaseId,t.path)}function vf(e,t){const n=X1(t);if(n.get(1)!==e.databaseId.projectId)throw new K(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new K(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Z(Z1(n))}function $1(e,t){return mg(e.databaseId,t)}function iD(e){const t=X1(e);return t.length===4?Lt.emptyPath():Z1(t)}function Ud(e){return new Lt(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Z1(e){return Et(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function H_(e,t,n){return{name:Ld(e,t),fields:n.value.mapValue.fields}}function rD(e,t){let n;if("targetChange"in t){t.targetChange;const i=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:J(39313,{state:h})}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],s=function(h,d){return h.useProto3Json?(Et(d===void 0||typeof d=="string",58123),we.fromBase64String(d||"")):(Et(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),we.fromUint8Array(d||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,l=a&&function(h){const d=h.code===void 0?U.UNKNOWN:G1(h.code);return new K(d,h.message||"")}(a);n=new Y1(i,r,s,l||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const r=vf(e,i.document.name),s=Ln(i.document.updateTime),a=i.document.createTime?Ln(i.document.createTime):it.min(),l=new dn({mapValue:{fields:i.document.fields}}),u=xe.newFoundDocument(r,s,a,l),h=i.targetIds||[],d=i.removedTargetIds||[];n=new ju(h,d,u.key,u)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const r=vf(e,i.document),s=i.readTime?Ln(i.readTime):it.min(),a=xe.newNoDocument(r,s),l=i.removedTargetIds||[];n=new ju([],l,a.key,a)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const r=vf(e,i.document),s=i.removedTargetIds||[];n=new ju([],s,r,null)}else{if(!("filter"in t))return J(11601,{Vt:t});{t.filter;const i=t.filter;i.targetId;const{count:r=0,unchangedNames:s}=i,a=new K4(r,s),l=i.targetId;n=new Q1(l,a)}}return n}function sD(e,t){let n;if(t instanceof bl)n={update:H_(e,t.key,t.value)};else if(t instanceof hg)n={delete:Ld(e,t.key)};else if(t instanceof rs)n={update:H_(e,t.key,t.data),updateMask:mD(t.fieldMask)};else{if(!(t instanceof G4))return J(16599,{ft:t.type});n={verify:Ld(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(i=>function(s,a){const l=a.transform;if(l instanceof xc)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Zo)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Wo)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Nc)return{fieldPath:a.field.canonicalString(),increment:l.Re};throw J(20930,{transform:a.transform})}(0,i))),t.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:nD(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:J(27497)}(e,t.precondition)),n}function aD(e,t){return e&&e.length>0?(Et(t!==void 0,14353),e.map(n=>function(r,s){let a=r.updateTime?Ln(r.updateTime):Ln(s);return a.isEqual(it.min())&&(a=Ln(s)),new q4(a,r.transformResults||[])}(n,t))):[]}function oD(e,t){return{documents:[$1(e,t.path)]}}function lD(e,t){const n={structuredQuery:{}},i=t.path;let r;t.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=$1(e,r);const s=function(h){if(h.length!==0)return J1(An.create(h,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const a=function(h){if(h.length!==0)return h.map(d=>function(m){return{field:As(m.field),direction:hD(m.dir)}}(d))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const l=Vd(e,t.limit);return l!==null&&(n.structuredQuery.limit=l),t.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(t.endAt)),{gt:n,parent:r}}function uD(e){let t=iD(e.parent);const n=e.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){Et(i===1,65062);const d=n.from[0];d.allDescendants?r=d.collectionId:t=t.child(d.collectionId)}let s=[];n.where&&(s=function(g){const m=W1(g);return m instanceof An&&C1(m)?m.getFilters():[m]}(n.where));let a=[];n.orderBy&&(a=function(g){return g.map(m=>function(N){return new Dc(bs(N.field),function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction))}(m))}(n.orderBy));let l=null;n.limit&&(l=function(g){let m;return m=typeof g=="object"?g.value:g,sh(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(g){const m=!!g.before,_=g.values||[];return new Cc(_,m)}(n.startAt));let h=null;return n.endAt&&(h=function(g){const m=!g.before,_=g.values||[];return new Cc(_,m)}(n.endAt)),D4(t,r,a,s,l,"F",u,h)}function cD(e,t){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return J(28987,{purpose:r})}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function W1(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=bs(n.unaryFilter.field);return re.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=bs(n.unaryFilter.field);return re.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=bs(n.unaryFilter.field);return re.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=bs(n.unaryFilter.field);return re.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return J(61313);default:return J(60726)}}(e):e.fieldFilter!==void 0?function(n){return re.create(bs(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return J(58110);default:return J(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return An.create(n.compositeFilter.filters.map(i=>W1(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return J(1026)}}(n.compositeFilter.op))}(e):J(30097,{filter:e})}function hD(e){return W4[e]}function fD(e){return J4[e]}function dD(e){return tD[e]}function As(e){return{fieldPath:e.canonicalString()}}function bs(e){return be.fromServerFormat(e.fieldPath)}function J1(e){return e instanceof re?function(n){if(n.op==="=="){if(x_(n.value))return{unaryFilter:{field:As(n.field),op:"IS_NAN"}};if(D_(n.value))return{unaryFilter:{field:As(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(x_(n.value))return{unaryFilter:{field:As(n.field),op:"IS_NOT_NAN"}};if(D_(n.value))return{unaryFilter:{field:As(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:As(n.field),op:fD(n.op),value:n.value}}}(e):e instanceof An?function(n){const i=n.getFilters().map(r=>J1(r));return i.length===1?i[0]:{compositeFilter:{op:dD(n.op),filters:i}}}(e):J(54877,{filter:e})}function mD(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function tA(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(t,n,i,r,s=it.min(),a=it.min(),l=we.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(t){return new Ki(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Ki(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Ki(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Ki(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gD{constructor(t){this.wt=t}}function pD(e){const t=uD({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?Md(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yD{constructor(){this.Cn=new _D}addToCollectionParentIndex(t,n){return this.Cn.add(n),P.resolve()}getCollectionParents(t,n){return P.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return P.resolve()}deleteFieldIndex(t,n){return P.resolve()}deleteAllFieldIndexes(t){return P.resolve()}createTargetIndexes(t,n){return P.resolve()}getDocumentsMatchingTarget(t,n){return P.resolve(null)}getIndexType(t,n){return P.resolve(0)}getFieldIndexes(t,n){return P.resolve([])}getNextCollectionGroupToUpdate(t){return P.resolve(null)}getMinOffset(t,n){return P.resolve(fr.min())}getMinOffsetFromCollectionGroup(t,n){return P.resolve(fr.min())}updateCollectionGroup(t,n,i){return P.resolve()}updateIndexEntries(t,n){return P.resolve()}}class _D{constructor(){this.index={}}add(t){const n=t.lastSegment(),i=t.popLast(),r=this.index[n]||new ce(Lt.comparator),s=!r.has(i);return this.index[n]=r.add(i),s}has(t){const n=t.lastSegment(),i=t.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(t){return(this.index[t]||new ce(Lt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},eA=41943040;class Be{static withCacheSize(t){return new Be(t,Be.DEFAULT_COLLECTION_PERCENTILE,Be.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Be.DEFAULT_COLLECTION_PERCENTILE=10,Be.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Be.DEFAULT=new Be(eA,Be.DEFAULT_COLLECTION_PERCENTILE,Be.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Be.DISABLED=new Be(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(t){this.ur=t}next(){return this.ur+=2,this.ur}static cr(){return new ha(0)}static lr(){return new ha(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G_="LruGarbageCollector",vD=1048576;function Q_([e,t],[n,i]){const r=at(e,n);return r===0?at(t,i):r}class TD{constructor(t){this.Er=t,this.buffer=new ce(Q_),this.dr=0}Ar(){return++this.dr}Rr(t){const n=[t,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();Q_(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class ED{constructor(t,n,i){this.garbageCollector=t,this.asyncQueue=n,this.localStore=i,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(t){G(G_,`Garbage collection scheduled in ${t}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ia(n)?G(G_,"Ignoring IndexedDB error during garbage collection: ",n):await Ra(n)}await this.mr(3e5)})}}class AD{constructor(t,n){this.gr=t,this.params=n}calculateTargetCount(t,n){return this.gr.pr(t).next(i=>Math.floor(n/100*i))}nthSequenceNumber(t,n){if(n===0)return P.resolve(rh.le);const i=new TD(n);return this.gr.forEachTarget(t,r=>i.Rr(r.sequenceNumber)).next(()=>this.gr.yr(t,r=>i.Rr(r))).next(()=>i.maxValue)}removeTargets(t,n,i){return this.gr.removeTargets(t,n,i)}removeOrphanedDocuments(t,n){return this.gr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(G("LruGarbageCollector","Garbage collection skipped; disabled"),P.resolve(F_)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(G("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),F_):this.wr(t,n))}getCacheSize(t){return this.gr.getCacheSize(t)}wr(t,n){let i,r,s,a,l,u,h;const d=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(G("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),r=this.params.maximumSequenceNumbersToCollect):r=g,a=Date.now(),this.nthSequenceNumber(t,r))).next(g=>(i=g,l=Date.now(),this.removeTargets(t,i,n))).next(g=>(s=g,u=Date.now(),this.removeOrphanedDocuments(t,i))).next(g=>(h=Date.now(),Ts()<=ht.DEBUG&&G("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-d}ms
	Determined least recently used ${r} in `+(l-a)+`ms
	Removed ${s} targets in `+(u-l)+`ms
	Removed ${g} documents in `+(h-u)+`ms
Total Duration: ${h-d}ms`),P.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:g})))}}function bD(e,t){return new AD(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SD{constructor(){this.changes=new is(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,xe.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?P.resolve(i):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wD{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RD{constructor(t,n,i,r){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(t,n){let i=null;return this.documentOverlayCache.getOverlay(t,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(t,n))).next(r=>(i!==null&&xo(i.mutation,r,Tn.empty(),ue.now()),r))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.getLocalViewOfDocuments(t,i,ft()).next(()=>i))}getLocalViewOfDocuments(t,n,i=ft()){const r=Vr();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,i).next(s=>{let a=ao();return s.forEach((l,u)=>{a=a.insert(l,u.overlayedDocument)}),a}))}getOverlayedDocuments(t,n){const i=Vr();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,ft()))}populateOverlays(t,n,i){const r=[];return i.forEach(s=>{n.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(t,r).next(s=>{s.forEach((a,l)=>{n.set(a,l)})})}computeViews(t,n,i,r){let s=pi();const a=Do(),l=function(){return Do()}();return n.forEach((u,h)=>{const d=i.get(h.key);r.has(h.key)&&(d===void 0||d.mutation instanceof rs)?s=s.insert(h.key,h):d!==void 0?(a.set(h.key,d.mutation.getFieldMask()),xo(d.mutation,h,d.mutation.getFieldMask(),ue.now())):a.set(h.key,Tn.empty())}),this.recalculateAndSaveOverlays(t,s).next(u=>(u.forEach((h,d)=>a.set(h,d)),n.forEach((h,d)=>{var g;return l.set(h,new wD(d,(g=a.get(h))!==null&&g!==void 0?g:null))}),l))}recalculateAndSaveOverlays(t,n){const i=Do();let r=new Ft((a,l)=>a-l),s=ft();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(a=>{for(const l of a)l.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let d=i.get(u)||Tn.empty();d=l.applyToLocalView(h,d),i.set(u,d);const g=(r.get(l.batchId)||ft()).add(u);r=r.insert(l.batchId,g)})}).next(()=>{const a=[],l=r.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),h=u.key,d=u.value,g=L1();d.forEach(m=>{if(!s.has(m)){const _=H1(n.get(m),i.get(m));_!==null&&g.set(m,_),s=s.add(m)}}),a.push(this.documentOverlayCache.saveOverlays(t,h,g))}return P.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,n,i,r){return function(a){return Z.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):O1(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,i,r):this.getDocumentsMatchingCollectionQuery(t,n,i,r)}getNextDocuments(t,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,i,r).next(s=>{const a=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,i.largestBatchId,r-s.size):P.resolve(Vr());let l=Yo,u=s;return a.next(h=>P.forEach(h,(d,g)=>(l<g.largestBatchId&&(l=g.largestBatchId),s.get(d)?P.resolve():this.remoteDocumentCache.getEntry(t,d).next(m=>{u=u.insert(d,m)}))).next(()=>this.populateOverlays(t,h,s)).next(()=>this.computeViews(t,u,h,ft())).next(d=>({batchId:l,changes:P1(d)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new Z(n)).next(i=>{let r=ao();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(t,n,i,r){const s=n.collectionGroup;let a=ao();return this.indexManager.getCollectionParents(t,s).next(l=>P.forEach(l,u=>{const h=function(g,m){return new Al(m,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(t,h,i,r).next(d=>{d.forEach((g,m)=>{a=a.insert(g,m)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(t,n,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,i.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,i,s,r))).next(a=>{s.forEach((u,h)=>{const d=h.getKey();a.get(d)===null&&(a=a.insert(d,xe.newInvalidDocument(d)))});let l=ao();return a.forEach((u,h)=>{const d=s.get(u);d!==void 0&&xo(d.mutation,h,Tn.empty(),ue.now()),uh(n,h)&&(l=l.insert(u,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{constructor(t){this.serializer=t,this.kr=new Map,this.qr=new Map}getBundleMetadata(t,n){return P.resolve(this.kr.get(n))}saveBundleMetadata(t,n){return this.kr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:Ln(r.createTime)}}(n)),P.resolve()}getNamedQuery(t,n){return P.resolve(this.qr.get(n))}saveNamedQuery(t,n){return this.qr.set(n.name,function(r){return{name:r.name,query:pD(r.bundledQuery),readTime:Ln(r.readTime)}}(n)),P.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD{constructor(){this.overlays=new Ft(Z.comparator),this.Qr=new Map}getOverlay(t,n){return P.resolve(this.overlays.get(n))}getOverlays(t,n){const i=Vr();return P.forEach(n,r=>this.getOverlay(t,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(t,n,i){return i.forEach((r,s)=>{this.St(t,n,s)}),P.resolve()}removeOverlaysForBatchId(t,n,i){const r=this.Qr.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.Qr.delete(i)),P.resolve()}getOverlaysForCollection(t,n,i){const r=Vr(),s=n.length+1,a=new Z(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const u=l.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===s&&u.largestBatchId>i&&r.set(u.getKey(),u)}return P.resolve(r)}getOverlaysForCollectionGroup(t,n,i,r){let s=new Ft((h,d)=>h-d);const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>i){let d=s.get(h.largestBatchId);d===null&&(d=Vr(),s=s.insert(h.largestBatchId,d)),d.set(h.getKey(),h)}}const l=Vr(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,d)=>l.set(h,d)),!(l.size()>=r)););return P.resolve(l)}St(t,n,i){const r=this.overlays.get(i.key);if(r!==null){const a=this.Qr.get(r.largestBatchId).delete(i.key);this.Qr.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new Y4(n,i));let s=this.Qr.get(n);s===void 0&&(s=ft(),this.Qr.set(n,s)),this.Qr.set(n,s.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(){this.sessionToken=we.EMPTY_BYTE_STRING}getSessionToken(t){return P.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,P.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg{constructor(){this.$r=new ce(de.Ur),this.Kr=new ce(de.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(t,n){const i=new de(t,n);this.$r=this.$r.add(i),this.Kr=this.Kr.add(i)}Gr(t,n){t.forEach(i=>this.addReference(i,n))}removeReference(t,n){this.zr(new de(t,n))}jr(t,n){t.forEach(i=>this.removeReference(i,n))}Hr(t){const n=new Z(new Lt([])),i=new de(n,t),r=new de(n,t+1),s=[];return this.Kr.forEachInRange([i,r],a=>{this.zr(a),s.push(a.key)}),s}Jr(){this.$r.forEach(t=>this.zr(t))}zr(t){this.$r=this.$r.delete(t),this.Kr=this.Kr.delete(t)}Yr(t){const n=new Z(new Lt([])),i=new de(n,t),r=new de(n,t+1);let s=ft();return this.Kr.forEachInRange([i,r],a=>{s=s.add(a.key)}),s}containsKey(t){const n=new de(t,0),i=this.$r.firstAfterOrEqual(n);return i!==null&&t.isEqual(i.key)}}class de{constructor(t,n){this.key=t,this.Zr=n}static Ur(t,n){return Z.comparator(t.key,n.key)||at(t.Zr,n.Zr)}static Wr(t,n){return at(t.Zr,n.Zr)||Z.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xD{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new ce(de.Ur)}checkEmpty(t){return P.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,i,r){const s=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new Q4(s,n,i,r);this.mutationQueue.push(a);for(const l of r)this.Xr=this.Xr.add(new de(l.key,s)),this.indexManager.addToCollectionParentIndex(t,l.key.path.popLast());return P.resolve(a)}lookupMutationBatch(t,n){return P.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(t,n){const i=n+1,r=this.ti(i),s=r<0?0:r;return P.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return P.resolve(this.mutationQueue.length===0?sg:this.nr-1)}getAllMutationBatches(t){return P.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const i=new de(n,0),r=new de(n,Number.POSITIVE_INFINITY),s=[];return this.Xr.forEachInRange([i,r],a=>{const l=this.ei(a.Zr);s.push(l)}),P.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let i=new ce(at);return n.forEach(r=>{const s=new de(r,0),a=new de(r,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([s,a],l=>{i=i.add(l.Zr)})}),P.resolve(this.ni(i))}getAllMutationBatchesAffectingQuery(t,n){const i=n.path,r=i.length+1;let s=i;Z.isDocumentKey(s)||(s=s.child(""));const a=new de(new Z(s),0);let l=new ce(at);return this.Xr.forEachWhile(u=>{const h=u.key.path;return!!i.isPrefixOf(h)&&(h.length===r&&(l=l.add(u.Zr)),!0)},a),P.resolve(this.ni(l))}ni(t){const n=[];return t.forEach(i=>{const r=this.ei(i);r!==null&&n.push(r)}),n}removeMutationBatch(t,n){Et(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Xr;return P.forEach(n.mutations,r=>{const s=new de(r.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.Xr=i})}sr(t){}containsKey(t,n){const i=new de(n,0),r=this.Xr.firstAfterOrEqual(i);return P.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,P.resolve()}ri(t,n){return this.ti(t)}ti(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}ei(t){const n=this.ti(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(t){this.ii=t,this.docs=function(){return new Ft(Z.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const i=n.key,r=this.docs.get(i),s=r?r.size:0,a=this.ii(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const i=this.docs.get(n);return P.resolve(i?i.document.mutableCopy():xe.newInvalidDocument(n))}getEntries(t,n){let i=pi();return n.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():xe.newInvalidDocument(r))}),P.resolve(i)}getDocumentsMatchingQuery(t,n,i,r){let s=pi();const a=n.path,l=new Z(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:h,value:{document:d}}=u.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||o4(a4(d),i)<=0||(r.has(d.key)||uh(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return P.resolve(s)}getAllFromCollectionGroup(t,n,i,r){J(9500)}si(t,n){return P.forEach(this.docs,i=>n(i))}newChangeBuffer(t){return new OD(this)}getSize(t){return P.resolve(this.size)}}class OD extends SD{constructor(t){super(),this.Br=t}applyChanges(t){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.Br.addEntry(t,r)):this.Br.removeEntry(i)}),P.waitFor(n)}getFromCache(t,n){return this.Br.getEntry(t,n)}getAllFromCache(t,n){return this.Br.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kD{constructor(t){this.persistence=t,this.oi=new is(n=>lg(n),ug),this.lastRemoteSnapshotVersion=it.min(),this.highestTargetId=0,this._i=0,this.ai=new gg,this.targetCount=0,this.ui=ha.cr()}forEachTarget(t,n){return this.oi.forEach((i,r)=>n(r)),P.resolve()}getLastRemoteSnapshotVersion(t){return P.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return P.resolve(this._i)}allocateTargetId(t){return this.highestTargetId=this.ui.next(),P.resolve(this.highestTargetId)}setTargetsMetadata(t,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this._i&&(this._i=n),P.resolve()}Tr(t){this.oi.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ui=new ha(n),this.highestTargetId=n),t.sequenceNumber>this._i&&(this._i=t.sequenceNumber)}addTargetData(t,n){return this.Tr(n),this.targetCount+=1,P.resolve()}updateTargetData(t,n){return this.Tr(n),P.resolve()}removeTargetData(t,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,P.resolve()}removeTargets(t,n,i){let r=0;const s=[];return this.oi.forEach((a,l)=>{l.sequenceNumber<=n&&i.get(l.targetId)===null&&(this.oi.delete(a),s.push(this.removeMatchingKeysForTargetId(t,l.targetId)),r++)}),P.waitFor(s).next(()=>r)}getTargetCount(t){return P.resolve(this.targetCount)}getTargetData(t,n){const i=this.oi.get(n)||null;return P.resolve(i)}addMatchingKeys(t,n,i){return this.ai.Gr(n,i),P.resolve()}removeMatchingKeys(t,n,i){this.ai.jr(n,i);const r=this.persistence.referenceDelegate,s=[];return r&&n.forEach(a=>{s.push(r.markPotentiallyOrphaned(t,a))}),P.waitFor(s)}removeMatchingKeysForTargetId(t,n){return this.ai.Hr(n),P.resolve()}getMatchingKeysForTargetId(t,n){const i=this.ai.Yr(n);return P.resolve(i)}containsKey(t,n){return P.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(t,n){this.ci={},this.overlays={},this.li=new rh(0),this.hi=!1,this.hi=!0,this.Pi=new DD,this.referenceDelegate=t(this),this.Ti=new kD(this),this.indexManager=new yD,this.remoteDocumentCache=function(r){return new ND(r)}(i=>this.referenceDelegate.Ii(i)),this.serializer=new gD(n),this.Ei=new ID(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new CD,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let i=this.ci[t.toKey()];return i||(i=new xD(n,this.referenceDelegate),this.ci[t.toKey()]=i),i}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(t,n,i){G("MemoryPersistence","Starting transaction:",t);const r=new MD(this.li.next());return this.referenceDelegate.di(),i(r).next(s=>this.referenceDelegate.Ai(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Ri(t,n){return P.or(Object.values(this.ci).map(i=>()=>i.containsKey(t,n)))}}class MD extends u4{constructor(t){super(),this.currentSequenceNumber=t}}class pg{constructor(t){this.persistence=t,this.Vi=new gg,this.mi=null}static fi(t){return new pg(t)}get gi(){if(this.mi)return this.mi;throw J(60996)}addReference(t,n,i){return this.Vi.addReference(i,n),this.gi.delete(i.toString()),P.resolve()}removeReference(t,n,i){return this.Vi.removeReference(i,n),this.gi.add(i.toString()),P.resolve()}markPotentiallyOrphaned(t,n){return this.gi.add(n.toString()),P.resolve()}removeTarget(t,n){this.Vi.Hr(n.targetId).forEach(r=>this.gi.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,n.targetId).next(r=>{r.forEach(s=>this.gi.add(s.toString()))}).next(()=>i.removeTargetData(t,n))}di(){this.mi=new Set}Ai(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return P.forEach(this.gi,i=>{const r=Z.fromPath(i);return this.pi(t,r).next(s=>{s||n.removeEntry(r,it.min())})}).next(()=>(this.mi=null,n.apply(t)))}updateLimboDocument(t,n){return this.pi(t,n).next(i=>{i?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(t){return 0}pi(t,n){return P.or([()=>P.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ri(t,n)])}}class kc{constructor(t,n){this.persistence=t,this.yi=new is(i=>f4(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=bD(this,n)}static fi(t,n){return new kc(t,n)}di(){}Ai(t){return P.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}pr(t){const n=this.br(t);return this.persistence.getTargetCache().getTargetCount(t).next(i=>n.next(r=>i+r))}br(t){let n=0;return this.yr(t,i=>{n++}).next(()=>n)}yr(t,n){return P.forEach(this.yi,(i,r)=>this.Dr(t,i,r).next(s=>s?P.resolve():n(r)))}removeTargets(t,n,i){return this.persistence.getTargetCache().removeTargets(t,n,i)}removeOrphanedDocuments(t,n){let i=0;const r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.si(t,a=>this.Dr(t,a,n).next(l=>{l||(i++,s.removeEntry(a,it.min()))})).next(()=>s.apply(t)).next(()=>i)}markPotentiallyOrphaned(t,n){return this.yi.set(n,t.currentSequenceNumber),P.resolve()}removeTarget(t,n){const i=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,n,i){return this.yi.set(i,t.currentSequenceNumber),P.resolve()}removeReference(t,n,i){return this.yi.set(i,t.currentSequenceNumber),P.resolve()}updateLimboDocument(t,n){return this.yi.set(n,t.currentSequenceNumber),P.resolve()}Ii(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=Pu(t.data.value)),n}Dr(t,n,i){return P.or([()=>this.persistence.Ri(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const r=this.yi.get(n);return P.resolve(r!==void 0&&r>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yg{constructor(t,n,i,r){this.targetId=t,this.fromCache=n,this.ds=i,this.As=r}static Rs(t,n){let i=ft(),r=ft();for(const s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new yg(t,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return Cw()?8:c4(ke())>0?6:4}()}initialize(t,n){this.ys=t,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(t,n,i,r){const s={result:null};return this.ws(t,n).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.bs(t,n,r,i).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new VD;return this.Ss(t,n,a).next(l=>{if(s.result=l,this.fs)return this.Ds(t,n,a,l.size)})}).next(()=>s.result)}Ds(t,n,i,r){return i.documentReadCount<this.gs?(Ts()<=ht.DEBUG&&G("QueryEngine","SDK will not create cache indexes for query:",Es(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),P.resolve()):(Ts()<=ht.DEBUG&&G("QueryEngine","Query:",Es(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.ps*r?(Ts()<=ht.DEBUG&&G("QueryEngine","The SDK decides to create cache indexes for query:",Es(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Vn(n))):P.resolve())}ws(t,n){if(M_(n))return P.resolve(null);let i=Vn(n);return this.indexManager.getIndexType(t,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=Md(n,null,"F"),i=Vn(n)),this.indexManager.getDocumentsMatchingTarget(t,i).next(s=>{const a=ft(...s);return this.ys.getDocuments(t,a).next(l=>this.indexManager.getMinOffset(t,i).next(u=>{const h=this.vs(n,l);return this.Cs(n,h,a,u.readTime)?this.ws(t,Md(n,null,"F")):this.Fs(t,h,n,u)}))})))}bs(t,n,i,r){return M_(n)||r.isEqual(it.min())?P.resolve(null):this.ys.getDocuments(t,i).next(s=>{const a=this.vs(n,s);return this.Cs(n,a,i,r)?P.resolve(null):(Ts()<=ht.DEBUG&&G("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Es(n)),this.Fs(t,a,n,s4(r,Yo)).next(l=>l))})}vs(t,n){let i=new ce(M1(t));return n.forEach((r,s)=>{uh(t,s)&&(i=i.add(s))}),i}Cs(t,n,i,r){if(t.limit===null)return!1;if(i.size!==n.size)return!0;const s=t.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Ss(t,n,i){return Ts()<=ht.DEBUG&&G("QueryEngine","Using full collection scan to execute query:",Es(n)),this.ys.getDocumentsMatchingQuery(t,n,fr.min(),i)}Fs(t,n,i,r){return this.ys.getDocumentsMatchingQuery(t,i,r).next(s=>(n.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _g="LocalStore",LD=3e8;class UD{constructor(t,n,i,r){this.persistence=t,this.Ms=n,this.serializer=r,this.xs=new Ft(at),this.Os=new is(s=>lg(s),ug),this.Ns=new Map,this.Bs=t.getRemoteDocumentCache(),this.Ti=t.getTargetCache(),this.Ei=t.getBundleCache(),this.Ls(i)}Ls(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new RD(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.xs))}}function jD(e,t,n,i){return new UD(e,t,n,i)}async function iA(e,t){const n=rt(e);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,n.Ls(t),n.mutationQueue.getAllMutationBatches(i))).next(s=>{const a=[],l=[];let u=ft();for(const h of r){a.push(h.batchId);for(const d of h.mutations)u=u.add(d.key)}for(const h of s){l.push(h.batchId);for(const d of h.mutations)u=u.add(d.key)}return n.localDocuments.getDocuments(i,u).next(h=>({ks:h,removedBatchIds:a,addedBatchIds:l}))})})}function zD(e,t){const n=rt(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=t.batch.keys(),s=n.Bs.newChangeBuffer({trackRemovals:!0});return function(l,u,h,d){const g=h.batch,m=g.keys();let _=P.resolve();return m.forEach(N=>{_=_.next(()=>d.getEntry(u,N)).next(k=>{const V=h.docVersions.get(N);Et(V!==null,48541),k.version.compareTo(V)<0&&(g.applyToRemoteDocument(k,h),k.isValidDocument()&&(k.setReadTime(h.commitVersion),d.addEntry(k)))})}),_.next(()=>l.mutationQueue.removeMutationBatch(u,g))}(n,i,t,s).next(()=>s.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(l){let u=ft();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(u=u.add(l.batch.mutations[h].key));return u}(t))).next(()=>n.localDocuments.getDocuments(i,r))})}function rA(e){const t=rt(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Ti.getLastRemoteSnapshotVersion(n))}function BD(e,t){const n=rt(e),i=t.snapshotVersion;let r=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=n.Bs.newChangeBuffer({trackRemovals:!0});r=n.xs;const l=[];t.targetChanges.forEach((d,g)=>{const m=r.get(g);if(!m)return;l.push(n.Ti.removeMatchingKeys(s,d.removedDocuments,g).next(()=>n.Ti.addMatchingKeys(s,d.addedDocuments,g)));let _=m.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(g)!==null?_=_.withResumeToken(we.EMPTY_BYTE_STRING,it.min()).withLastLimboFreeSnapshotVersion(it.min()):d.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(d.resumeToken,i)),r=r.insert(g,_),function(k,V,w){return k.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=LD?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(m,_,d)&&l.push(n.Ti.updateTargetData(s,_))});let u=pi(),h=ft();if(t.documentUpdates.forEach(d=>{t.resolvedLimboDocuments.has(d)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),l.push(qD(s,a,t.documentUpdates).next(d=>{u=d.qs,h=d.Qs})),!i.isEqual(it.min())){const d=n.Ti.getLastRemoteSnapshotVersion(s).next(g=>n.Ti.setTargetsMetadata(s,s.currentSequenceNumber,i));l.push(d)}return P.waitFor(l).next(()=>a.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,h)).next(()=>u)}).then(s=>(n.xs=r,s))}function qD(e,t,n){let i=ft(),r=ft();return n.forEach(s=>i=i.add(s)),t.getEntries(e,i).next(s=>{let a=pi();return n.forEach((l,u)=>{const h=s.get(l);u.isFoundDocument()!==h.isFoundDocument()&&(r=r.add(l)),u.isNoDocument()&&u.version.isEqual(it.min())?(t.removeEntry(l,u.readTime),a=a.insert(l,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(t.addEntry(u),a=a.insert(l,u)):G(_g,"Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",u.version)}),{qs:a,Qs:r}})}function HD(e,t){const n=rt(e);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(t===void 0&&(t=sg),n.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function FD(e,t){const n=rt(e);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Ti.getTargetData(i,t).next(s=>s?(r=s,P.resolve(r)):n.Ti.allocateTargetId(i).next(a=>(r=new Ki(t,a,"TargetPurposeListen",i.currentSequenceNumber),n.Ti.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.xs.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.xs=n.xs.insert(i.targetId,i),n.Os.set(t,i.targetId)),i})}async function jd(e,t,n){const i=rt(e),r=i.xs.get(t),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,a=>i.persistence.referenceDelegate.removeTarget(a,r))}catch(a){if(!Ia(a))throw a;G(_g,`Failed to update sequence numbers for target ${t}: ${a}`)}i.xs=i.xs.remove(t),i.Os.delete(r.target)}function Y_(e,t,n){const i=rt(e);let r=it.min(),s=ft();return i.persistence.runTransaction("Execute query","readwrite",a=>function(u,h,d){const g=rt(u),m=g.Os.get(d);return m!==void 0?P.resolve(g.xs.get(m)):g.Ti.getTargetData(h,d)}(i,a,Vn(t)).next(l=>{if(l)return r=l.lastLimboFreeSnapshotVersion,i.Ti.getMatchingKeysForTargetId(a,l.targetId).next(u=>{s=u})}).next(()=>i.Ms.getDocumentsMatchingQuery(a,t,n?r:it.min(),n?s:ft())).next(l=>(GD(i,N4(t),l),{documents:l,$s:s})))}function GD(e,t,n){let i=e.Ns.get(t)||it.min();n.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),e.Ns.set(t,i)}class K_{constructor(){this.activeTargetIds=L4()}js(t){this.activeTargetIds=this.activeTargetIds.add(t)}Hs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}zs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class QD{constructor(){this.xo=new K_,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,i){}addLocalQueryTarget(t,n=!0){return n&&this.xo.js(t),this.Oo[t]||"not-current"}updateQueryState(t,n,i){this.Oo[t]=n}removeLocalQueryTarget(t){this.xo.Hs(t)}isLocalQueryTarget(t){return this.xo.activeTargetIds.has(t)}clearQueryState(t){delete this.Oo[t]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(t){return this.xo.activeTargetIds.has(t)}start(){return this.xo=new K_,Promise.resolve()}handleUserChange(t,n,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YD{No(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X_="ConnectivityMonitor";class $_{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(t){this.Qo.push(t)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){G(X_,"Network connectivity changed: AVAILABLE");for(const t of this.Qo)t(0)}qo(){G(X_,"Network connectivity changed: UNAVAILABLE");for(const t of this.Qo)t(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gu=null;function zd(){return gu===null?gu=function(){return 268435456+Math.round(2147483648*Math.random())}():gu++,"0x"+gu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tf="RestConnection",KD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class XD{get Uo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+t.host,this.Wo=`projects/${i}/databases/${r}`,this.Go=this.databaseId.database===Rc?`project_id=${i}`:`project_id=${i}&database_id=${r}`}zo(t,n,i,r,s){const a=zd(),l=this.jo(t,n.toUriEncodedString());G(Tf,`Sending RPC '${t}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(u,r,s);const{host:h}=new URL(l),d=Aa(h);return this.Jo(t,l,u,i,d).then(g=>(G(Tf,`Received RPC '${t}' ${a}: `,g),g),g=>{throw oa(Tf,`RPC '${t}' ${a} failed with error: `,g,"url: ",l,"request:",i),g})}Yo(t,n,i,r,s,a){return this.zo(t,n,i,r,s)}Ho(t,n,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+wa}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,s)=>t[s]=r),i&&i.headers.forEach((r,s)=>t[s]=r)}jo(t,n){const i=KD[t];return`${this.Ko}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $D{constructor(t){this.Zo=t.Zo,this.Xo=t.Xo}e_(t){this.t_=t}n_(t){this.r_=t}i_(t){this.s_=t}onMessage(t){this.o_=t}close(){this.Xo()}send(t){this.Zo(t)}__(){this.t_()}a_(){this.r_()}u_(t){this.s_(t)}c_(t){this.o_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ce="WebChannelConnection";class ZD extends XD{constructor(t){super(t),this.l_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,i,r,s){const a=zd();return new Promise((l,u)=>{const h=new o1;h.setWithCredentials(!0),h.listenOnce(l1.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case Vu.NO_ERROR:const g=h.getResponseJson();G(Ce,`XHR for RPC '${t}' ${a} received:`,JSON.stringify(g)),l(g);break;case Vu.TIMEOUT:G(Ce,`RPC '${t}' ${a} timed out`),u(new K(U.DEADLINE_EXCEEDED,"Request time out"));break;case Vu.HTTP_ERROR:const m=h.getStatus();if(G(Ce,`RPC '${t}' ${a} failed with status:`,m,"response text:",h.getResponseText()),m>0){let _=h.getResponseJson();Array.isArray(_)&&(_=_[0]);const N=_==null?void 0:_.error;if(N&&N.status&&N.message){const k=function(w){const v=w.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(v)>=0?v:U.UNKNOWN}(N.status);u(new K(k,N.message))}else u(new K(U.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new K(U.UNAVAILABLE,"Connection failed."));break;default:J(9055,{h_:t,streamId:a,P_:h.getLastErrorCode(),T_:h.getLastError()})}}finally{G(Ce,`RPC '${t}' ${a} completed.`)}});const d=JSON.stringify(r);G(Ce,`RPC '${t}' ${a} sending request:`,r),h.send(n,"POST",d,i,15)})}I_(t,n,i){const r=zd(),s=[this.Ko,"/","google.firestore.v1.Firestore","/",t,"/channel"],a=h1(),l=c1(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Ho(u.initMessageHeaders,n,i),u.encodeInitMessageHeaders=!0;const d=s.join("");G(Ce,`Creating RPC '${t}' stream ${r}: ${d}`,u);const g=a.createWebChannel(d,u);this.E_(g);let m=!1,_=!1;const N=new $D({Zo:V=>{_?G(Ce,`Not sending because RPC '${t}' stream ${r} is closed:`,V):(m||(G(Ce,`Opening RPC '${t}' stream ${r} transport.`),g.open(),m=!0),G(Ce,`RPC '${t}' stream ${r} sending:`,V),g.send(V))},Xo:()=>g.close()}),k=(V,w,v)=>{V.listen(w,R=>{try{v(R)}catch(x){setTimeout(()=>{throw x},0)}})};return k(g,so.EventType.OPEN,()=>{_||(G(Ce,`RPC '${t}' stream ${r} transport opened.`),N.__())}),k(g,so.EventType.CLOSE,()=>{_||(_=!0,G(Ce,`RPC '${t}' stream ${r} transport closed`),N.u_(),this.d_(g))}),k(g,so.EventType.ERROR,V=>{_||(_=!0,oa(Ce,`RPC '${t}' stream ${r} transport errored. Name:`,V.name,"Message:",V.message),N.u_(new K(U.UNAVAILABLE,"The operation could not be completed")))}),k(g,so.EventType.MESSAGE,V=>{var w;if(!_){const v=V.data[0];Et(!!v,16349);const R=v,x=(R==null?void 0:R.error)||((w=R[0])===null||w===void 0?void 0:w.error);if(x){G(Ce,`RPC '${t}' stream ${r} received error:`,x);const j=x.status;let H=function(A){const b=ne[A];if(b!==void 0)return G1(b)}(j),E=x.message;H===void 0&&(H=U.INTERNAL,E="Unknown error status: "+j+" with message "+x.message),_=!0,N.u_(new K(H,E)),g.close()}else G(Ce,`RPC '${t}' stream ${r} received:`,v),N.c_(v)}}),k(l,u1.STAT_EVENT,V=>{V.stat===Id.PROXY?G(Ce,`RPC '${t}' stream ${r} detected buffering proxy`):V.stat===Id.NOPROXY&&G(Ce,`RPC '${t}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{N.a_()},0),N}terminate(){this.l_.forEach(t=>t.close()),this.l_=[]}E_(t){this.l_.push(t)}d_(t){this.l_=this.l_.filter(n=>n===t)}}function Ef(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dh(e){return new eD(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(t,n,i=1e3,r=1.5,s=6e4){this.xi=t,this.timerId=n,this.A_=i,this.R_=r,this.V_=s,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(t){this.cancel();const n=Math.floor(this.m_+this.w_()),i=Math.max(0,Date.now()-this.g_),r=Math.max(0,n-i);r>0&&G("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.m_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,r,()=>(this.g_=Date.now(),t())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z_="PersistentStream";class aA{constructor(t,n,i,r,s,a,l,u){this.xi=t,this.S_=i,this.D_=r,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new sA(t,n)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(t){this.U_(),this.stream.send(t)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(t,n){this.U_(),this.K_(),this.x_.cancel(),this.v_++,t!==4?this.x_.reset():n&&n.code===U.RESOURCE_EXHAUSTED?(gi(n.toString()),gi("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):n&&n.code===U.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.i_(n)}W_(){}auth(){this.state=1;const t=this.G_(this.v_),n=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.v_===n&&this.z_(i,r)},i=>{t(()=>{const r=new K(U.UNKNOWN,"Fetching auth token failed: "+i.message);return this.j_(r)})})}z_(t,n){const i=this.G_(this.v_);this.stream=this.H_(t,n),this.stream.e_(()=>{i(()=>this.listener.e_())}),this.stream.n_(()=>{i(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(r=>{i(()=>this.j_(r))}),this.stream.onMessage(r=>{i(()=>++this.M_==1?this.J_(r):this.onNext(r))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(t){return G(Z_,`close with error: ${t}`),this.stream=null,this.close(4,t)}G_(t){return n=>{this.xi.enqueueAndForget(()=>this.v_===t?n():(G(Z_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class WD extends aA{constructor(t,n,i,r,s,a){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,a),this.serializer=s}H_(t,n){return this.connection.I_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.x_.reset();const n=rD(this.serializer,t),i=function(s){if(!("targetChange"in s))return it.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?it.min():a.readTime?Ln(a.readTime):it.min()}(t);return this.listener.Y_(n,i)}Z_(t){const n={};n.database=Ud(this.serializer),n.addTarget=function(s,a){let l;const u=a.target;if(l=Od(u)?{documents:oD(s,u)}:{query:lD(s,u).gt},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=K1(s,a.resumeToken);const h=Vd(s,a.expectedCount);h!==null&&(l.expectedCount=h)}else if(a.snapshotVersion.compareTo(it.min())>0){l.readTime=Oc(s,a.snapshotVersion.toTimestamp());const h=Vd(s,a.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,t);const i=cD(this.serializer,t);i&&(n.labels=i),this.Q_(n)}X_(t){const n={};n.database=Ud(this.serializer),n.removeTarget=t,this.Q_(n)}}class JD extends aA{constructor(t,n,i,r,s,a){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,a),this.serializer=s}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(t,n){return this.connection.I_("Write",t,n)}J_(t){return Et(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Et(!t.writeResults||t.writeResults.length===0,55816),this.listener.na()}onNext(t){Et(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.x_.reset();const n=aD(t.writeResults,t.commitTime),i=Ln(t.commitTime);return this.listener.ra(i,n)}ia(){const t={};t.database=Ud(this.serializer),this.Q_(t)}ta(t){const n={streamToken:this.lastStreamToken,writes:t.map(i=>sD(this.serializer,i))};this.Q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx{}class ex extends tx{constructor(t,n,i,r){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.sa=!1}oa(){if(this.sa)throw new K(U.FAILED_PRECONDITION,"The client has already been terminated.")}zo(t,n,i,r){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.zo(t,Pd(n,i),r,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new K(U.UNKNOWN,s.toString())})}Yo(t,n,i,r,s){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Yo(t,Pd(n,i),r,a,l,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new K(U.UNKNOWN,a.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class nx{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(t){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.la("Offline")))}set(t){this.Ta(),this._a=0,t==="Online"&&(this.ua=!1),this.la(t)}la(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}ha(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(gi(n),this.ua=!1):G("OnlineStateTracker",n)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zr="RemoteStore";class ix{constructor(t,n,i,r,s){this.localStore=t,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=s,this.Ra.No(a=>{i.enqueueAndForget(async()=>{ss(this)&&(G(Zr,"Restarting streams for network reachability change."),await async function(u){const h=rt(u);h.da.add(4),await wl(h),h.Va.set("Unknown"),h.da.delete(4),await mh(h)}(this))})}),this.Va=new nx(i,r)}}async function mh(e){if(ss(e))for(const t of e.Aa)await t(!0)}async function wl(e){for(const t of e.Aa)await t(!1)}function oA(e,t){const n=rt(e);n.Ea.has(t.targetId)||(n.Ea.set(t.targetId,t),Ag(n)?Eg(n):Ca(n).N_()&&Tg(n,t))}function vg(e,t){const n=rt(e),i=Ca(n);n.Ea.delete(t),i.N_()&&lA(n,t),n.Ea.size===0&&(i.N_()?i.k_():ss(n)&&n.Va.set("Unknown"))}function Tg(e,t){if(e.ma.Ke(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(it.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Ca(e).Z_(t)}function lA(e,t){e.ma.Ke(t),Ca(e).X_(t)}function Eg(e){e.ma=new Z4({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Rt:t=>e.Ea.get(t)||null,Pt:()=>e.datastore.serializer.databaseId}),Ca(e).start(),e.Va.ca()}function Ag(e){return ss(e)&&!Ca(e).O_()&&e.Ea.size>0}function ss(e){return rt(e).da.size===0}function uA(e){e.ma=void 0}async function rx(e){e.Va.set("Online")}async function sx(e){e.Ea.forEach((t,n)=>{Tg(e,t)})}async function ax(e,t){uA(e),Ag(e)?(e.Va.Pa(t),Eg(e)):e.Va.set("Unknown")}async function ox(e,t,n){if(e.Va.set("Online"),t instanceof Y1&&t.state===2&&t.cause)try{await async function(r,s){const a=s.cause;for(const l of s.targetIds)r.Ea.has(l)&&(await r.remoteSyncer.rejectListen(l,a),r.Ea.delete(l),r.ma.removeTarget(l))}(e,t)}catch(i){G(Zr,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),await Mc(e,i)}else if(t instanceof ju?e.ma.Xe(t):t instanceof Q1?e.ma.ot(t):e.ma.nt(t),!n.isEqual(it.min()))try{const i=await rA(e.localStore);n.compareTo(i)>=0&&await function(s,a){const l=s.ma.It(a);return l.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const d=s.Ea.get(h);d&&s.Ea.set(h,d.withResumeToken(u.resumeToken,a))}}),l.targetMismatches.forEach((u,h)=>{const d=s.Ea.get(u);if(!d)return;s.Ea.set(u,d.withResumeToken(we.EMPTY_BYTE_STRING,d.snapshotVersion)),lA(s,u);const g=new Ki(d.target,u,h,d.sequenceNumber);Tg(s,g)}),s.remoteSyncer.applyRemoteEvent(l)}(e,n)}catch(i){G(Zr,"Failed to raise snapshot:",i),await Mc(e,i)}}async function Mc(e,t,n){if(!Ia(t))throw t;e.da.add(1),await wl(e),e.Va.set("Offline"),n||(n=()=>rA(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{G(Zr,"Retrying IndexedDB access"),await n(),e.da.delete(1),await mh(e)})}function cA(e,t){return t().catch(n=>Mc(e,n,t))}async function gh(e){const t=rt(e),n=pr(t);let i=t.Ia.length>0?t.Ia[t.Ia.length-1].batchId:sg;for(;lx(t);)try{const r=await HD(t.localStore,i);if(r===null){t.Ia.length===0&&n.k_();break}i=r.batchId,ux(t,r)}catch(r){await Mc(t,r)}hA(t)&&fA(t)}function lx(e){return ss(e)&&e.Ia.length<10}function ux(e,t){e.Ia.push(t);const n=pr(e);n.N_()&&n.ea&&n.ta(t.mutations)}function hA(e){return ss(e)&&!pr(e).O_()&&e.Ia.length>0}function fA(e){pr(e).start()}async function cx(e){pr(e).ia()}async function hx(e){const t=pr(e);for(const n of e.Ia)t.ta(n.mutations)}async function fx(e,t,n){const i=e.Ia.shift(),r=fg.from(i,t,n);await cA(e,()=>e.remoteSyncer.applySuccessfulWrite(r)),await gh(e)}async function dx(e,t){t&&pr(e).ea&&await async function(i,r){if(function(a){return X4(a)&&a!==U.ABORTED}(r.code)){const s=i.Ia.shift();pr(i).L_(),await cA(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),await gh(i)}}(e,t),hA(e)&&fA(e)}async function W_(e,t){const n=rt(e);n.asyncQueue.verifyOperationInProgress(),G(Zr,"RemoteStore received new credentials");const i=ss(n);n.da.add(3),await wl(n),i&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.da.delete(3),await mh(n)}async function mx(e,t){const n=rt(e);t?(n.da.delete(2),await mh(n)):t||(n.da.add(2),await wl(n),n.Va.set("Unknown"))}function Ca(e){return e.fa||(e.fa=function(n,i,r){const s=rt(n);return s.oa(),new WD(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(e.datastore,e.asyncQueue,{e_:rx.bind(null,e),n_:sx.bind(null,e),i_:ax.bind(null,e),Y_:ox.bind(null,e)}),e.Aa.push(async t=>{t?(e.fa.L_(),Ag(e)?Eg(e):e.Va.set("Unknown")):(await e.fa.stop(),uA(e))})),e.fa}function pr(e){return e.ga||(e.ga=function(n,i,r){const s=rt(n);return s.oa(),new JD(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(e.datastore,e.asyncQueue,{e_:()=>Promise.resolve(),n_:cx.bind(null,e),i_:dx.bind(null,e),na:hx.bind(null,e),ra:fx.bind(null,e)}),e.Aa.push(async t=>{t?(e.ga.L_(),await gh(e)):(await e.ga.stop(),e.Ia.length>0&&(G(Zr,`Stopping write stream with ${e.Ia.length} pending writes`),e.Ia=[]))})),e.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bg{constructor(t,n,i,r,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new or,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,i,r,s){const a=Date.now()+i,l=new bg(t,n,a,r,s);return l.start(i),l}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new K(U.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Sg(e,t){if(gi("AsyncQueue",`${t}: ${e}`),Ia(e))return new K(U.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{static emptySet(t){return new Ks(t.comparator)}constructor(t){this.comparator=t?(n,i)=>t(n,i)||Z.comparator(n.key,i.key):(n,i)=>Z.comparator(n.key,i.key),this.keyedMap=ao(),this.sortedSet=new Ft(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,i)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Ks)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const i=new Ks;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J_{constructor(){this.pa=new Ft(Z.comparator)}track(t){const n=t.doc.key,i=this.pa.get(n);i?t.type!==0&&i.type===3?this.pa=this.pa.insert(n,t):t.type===3&&i.type!==1?this.pa=this.pa.insert(n,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.pa=this.pa.insert(n,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.pa=this.pa.insert(n,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.pa=this.pa.remove(n):t.type===1&&i.type===2?this.pa=this.pa.insert(n,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.pa=this.pa.insert(n,{type:2,doc:t.doc}):J(63341,{Vt:t,ya:i}):this.pa=this.pa.insert(n,t)}wa(){const t=[];return this.pa.inorderTraversal((n,i)=>{t.push(i)}),t}}class fa{constructor(t,n,i,r,s,a,l,u,h){this.query=t,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(t,n,i,r,s){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new fa(t,n,Ks.emptySet(n),a,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&lh(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,i=t.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(t=>t.va())}}class px{constructor(){this.queries=tv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const r=rt(n),s=r.queries;r.queries=tv(),s.forEach((a,l)=>{for(const u of l.Sa)u.onError(i)})})(this,new K(U.ABORTED,"Firestore shutting down"))}}function tv(){return new is(e=>k1(e),lh)}async function dA(e,t){const n=rt(e);let i=3;const r=t.query;let s=n.queries.get(r);s?!s.Da()&&t.va()&&(i=2):(s=new gx,i=t.va()?0:1);try{switch(i){case 0:s.ba=await n.onListen(r,!0);break;case 1:s.ba=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(a){const l=Sg(a,`Initialization of query '${Es(t.query)}' failed`);return void t.onError(l)}n.queries.set(r,s),s.Sa.push(t),t.Fa(n.onlineState),s.ba&&t.Ma(s.ba)&&wg(n)}async function mA(e,t){const n=rt(e),i=t.query;let r=3;const s=n.queries.get(i);if(s){const a=s.Sa.indexOf(t);a>=0&&(s.Sa.splice(a,1),s.Sa.length===0?r=t.va()?0:1:!s.Da()&&t.va()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function yx(e,t){const n=rt(e);let i=!1;for(const r of t){const s=r.query,a=n.queries.get(s);if(a){for(const l of a.Sa)l.Ma(r)&&(i=!0);a.ba=r}}i&&wg(n)}function _x(e,t,n){const i=rt(e),r=i.queries.get(t);if(r)for(const s of r.Sa)s.onError(n);i.queries.delete(t)}function wg(e){e.Ca.forEach(t=>{t.next()})}var Bd,ev;(ev=Bd||(Bd={})).xa="default",ev.Cache="cache";class gA{constructor(t,n,i){this.query=t,this.Oa=n,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=i||{}}Ma(t){if(!this.options.includeMetadataChanges){const i=[];for(const r of t.docChanges)r.type!==3&&i.push(r);t=new fa(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Na?this.La(t)&&(this.Oa.next(t),n=!0):this.ka(t,this.onlineState)&&(this.qa(t),n=!0),this.Ba=t,n}onError(t){this.Oa.error(t)}Fa(t){this.onlineState=t;let n=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,t)&&(this.qa(this.Ba),n=!0),n}ka(t,n){if(!t.fromCache||!this.va())return!0;const i=n!=="Offline";return(!this.options.Qa||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}La(t){if(t.docChanges.length>0)return!0;const n=this.Ba&&this.Ba.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qa(t){t=fa.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Na=!0,this.Oa.next(t)}va(){return this.options.source!==Bd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(t){this.key=t}}class yA{constructor(t){this.key=t}}class vx{constructor(t,n){this.query=t,this.Ha=n,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=ft(),this.mutatedKeys=ft(),this.Za=M1(t),this.Xa=new Ks(this.Za)}get eu(){return this.Ha}tu(t,n){const i=n?n.nu:new J_,r=n?n.Xa:this.Xa;let s=n?n.mutatedKeys:this.mutatedKeys,a=r,l=!1;const u=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,h=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((d,g)=>{const m=r.get(d),_=uh(this.query,g)?g:null,N=!!m&&this.mutatedKeys.has(m.key),k=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let V=!1;m&&_?m.data.isEqual(_.data)?N!==k&&(i.track({type:3,doc:_}),V=!0):this.ru(m,_)||(i.track({type:2,doc:_}),V=!0,(u&&this.Za(_,u)>0||h&&this.Za(_,h)<0)&&(l=!0)):!m&&_?(i.track({type:0,doc:_}),V=!0):m&&!_&&(i.track({type:1,doc:m}),V=!0,(u||h)&&(l=!0)),V&&(_?(a=a.add(_),s=k?s.add(d):s.delete(d)):(a=a.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),s=s.delete(d.key),i.track({type:1,doc:d})}return{Xa:a,nu:i,Cs:l,mutatedKeys:s}}ru(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,i,r){const s=this.Xa;this.Xa=t.Xa,this.mutatedKeys=t.mutatedKeys;const a=t.nu.wa();a.sort((d,g)=>function(_,N){const k=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return J(20277,{Vt:V})}};return k(_)-k(N)}(d.type,g.type)||this.Za(d.doc,g.doc)),this.iu(i),r=r!=null&&r;const l=n&&!r?this.su():[],u=this.Ya.size===0&&this.current&&!r?1:0,h=u!==this.Ja;return this.Ja=u,a.length!==0||h?{snapshot:new fa(this.query,t.Xa,s,a,t.mutatedKeys,u===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),ou:l}:{ou:l}}Fa(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new J_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(t){return!this.Ha.has(t)&&!!this.Xa.has(t)&&!this.Xa.get(t).hasLocalMutations}iu(t){t&&(t.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=t.current)}su(){if(!this.current)return[];const t=this.Ya;this.Ya=ft(),this.Xa.forEach(i=>{this._u(i.key)&&(this.Ya=this.Ya.add(i.key))});const n=[];return t.forEach(i=>{this.Ya.has(i)||n.push(new yA(i))}),this.Ya.forEach(i=>{t.has(i)||n.push(new pA(i))}),n}au(t){this.Ha=t.$s,this.Ya=ft();const n=this.tu(t.documents);return this.applyChanges(n,!0)}uu(){return fa.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const Rg="SyncEngine";class Tx{constructor(t,n,i){this.query=t,this.targetId=n,this.view=i}}class Ex{constructor(t){this.key=t,this.cu=!1}}class Ax{constructor(t,n,i,r,s,a){this.localStore=t,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.lu={},this.hu=new is(l=>k1(l),lh),this.Pu=new Map,this.Tu=new Set,this.Iu=new Ft(Z.comparator),this.Eu=new Map,this.du=new gg,this.Au={},this.Ru=new Map,this.Vu=ha.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function bx(e,t,n=!0){const i=bA(e);let r;const s=i.hu.get(t);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.uu()):r=await _A(i,t,n,!0),r}async function Sx(e,t){const n=bA(e);await _A(n,t,!0,!1)}async function _A(e,t,n,i){const r=await FD(e.localStore,Vn(t)),s=r.targetId,a=e.sharedClientState.addLocalQueryTarget(s,n);let l;return i&&(l=await wx(e,t,s,a==="current",r.resumeToken)),e.isPrimaryClient&&n&&oA(e.remoteStore,r),l}async function wx(e,t,n,i,r){e.fu=(g,m,_)=>async function(k,V,w,v){let R=V.view.tu(w);R.Cs&&(R=await Y_(k.localStore,V.query,!1).then(({documents:E})=>V.view.tu(E,R)));const x=v&&v.targetChanges.get(V.targetId),j=v&&v.targetMismatches.get(V.targetId)!=null,H=V.view.applyChanges(R,k.isPrimaryClient,x,j);return iv(k,V.targetId,H.ou),H.snapshot}(e,g,m,_);const s=await Y_(e.localStore,t,!0),a=new vx(t,s.$s),l=a.tu(s.documents),u=Sl.createSynthesizedTargetChangeForCurrentChange(n,i&&e.onlineState!=="Offline",r),h=a.applyChanges(l,e.isPrimaryClient,u);iv(e,n,h.ou);const d=new Tx(t,n,a);return e.hu.set(t,d),e.Pu.has(n)?e.Pu.get(n).push(t):e.Pu.set(n,[t]),h.snapshot}async function Rx(e,t,n){const i=rt(e),r=i.hu.get(t),s=i.Pu.get(r.targetId);if(s.length>1)return i.Pu.set(r.targetId,s.filter(a=>!lh(a,t))),void i.hu.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await jd(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&vg(i.remoteStore,r.targetId),qd(i,r.targetId)}).catch(Ra)):(qd(i,r.targetId),await jd(i.localStore,r.targetId,!0))}async function Ix(e,t){const n=rt(e),i=n.hu.get(t),r=n.Pu.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),vg(n.remoteStore,i.targetId))}async function Cx(e,t,n){const i=Vx(e);try{const r=await function(a,l){const u=rt(a),h=ue.now(),d=l.reduce((_,N)=>_.add(N.key),ft());let g,m;return u.persistence.runTransaction("Locally write mutations","readwrite",_=>{let N=pi(),k=ft();return u.Bs.getEntries(_,d).next(V=>{N=V,N.forEach((w,v)=>{v.isValidDocument()||(k=k.add(w))})}).next(()=>u.localDocuments.getOverlayedDocuments(_,N)).next(V=>{g=V;const w=[];for(const v of l){const R=F4(v,g.get(v.key).overlayedDocument);R!=null&&w.push(new rs(v.key,R,w1(R.value.mapValue),Pn.exists(!0)))}return u.mutationQueue.addMutationBatch(_,h,w,l)}).next(V=>{m=V;const w=V.applyToLocalDocumentSet(g,k);return u.documentOverlayCache.saveOverlays(_,V.batchId,w)})}).then(()=>({batchId:m.batchId,changes:P1(g)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(r.batchId),function(a,l,u){let h=a.Au[a.currentUser.toKey()];h||(h=new Ft(at)),h=h.insert(l,u),a.Au[a.currentUser.toKey()]=h}(i,r.batchId,n),await Rl(i,r.changes),await gh(i.remoteStore)}catch(r){const s=Sg(r,"Failed to persist write");n.reject(s)}}async function vA(e,t){const n=rt(e);try{const i=await BD(n.localStore,t);t.targetChanges.forEach((r,s)=>{const a=n.Eu.get(s);a&&(Et(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?a.cu=!0:r.modifiedDocuments.size>0?Et(a.cu,14607):r.removedDocuments.size>0&&(Et(a.cu,42227),a.cu=!1))}),await Rl(n,i,t)}catch(i){await Ra(i)}}function nv(e,t,n){const i=rt(e);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.hu.forEach((s,a)=>{const l=a.view.Fa(t);l.snapshot&&r.push(l.snapshot)}),function(a,l){const u=rt(a);u.onlineState=l;let h=!1;u.queries.forEach((d,g)=>{for(const m of g.Sa)m.Fa(l)&&(h=!0)}),h&&wg(u)}(i.eventManager,t),r.length&&i.lu.Y_(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function Dx(e,t,n){const i=rt(e);i.sharedClientState.updateQueryState(t,"rejected",n);const r=i.Eu.get(t),s=r&&r.key;if(s){let a=new Ft(Z.comparator);a=a.insert(s,xe.newNoDocument(s,it.min()));const l=ft().add(s),u=new fh(it.min(),new Map,new Ft(at),a,l);await vA(i,u),i.Iu=i.Iu.remove(s),i.Eu.delete(t),Ig(i)}else await jd(i.localStore,t,!1).then(()=>qd(i,t,n)).catch(Ra)}async function xx(e,t){const n=rt(e),i=t.batch.batchId;try{const r=await zD(n.localStore,t);EA(n,i,null),TA(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Rl(n,r)}catch(r){await Ra(r)}}async function Nx(e,t,n){const i=rt(e);try{const r=await function(a,l){const u=rt(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let d;return u.mutationQueue.lookupMutationBatch(h,l).next(g=>(Et(g!==null,37113),d=g.keys(),u.mutationQueue.removeMutationBatch(h,g))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,d,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,d)).next(()=>u.localDocuments.getDocuments(h,d))})}(i.localStore,t);EA(i,t,n),TA(i,t),i.sharedClientState.updateMutationState(t,"rejected",n),await Rl(i,r)}catch(r){await Ra(r)}}function TA(e,t){(e.Ru.get(t)||[]).forEach(n=>{n.resolve()}),e.Ru.delete(t)}function EA(e,t,n){const i=rt(e);let r=i.Au[i.currentUser.toKey()];if(r){const s=r.get(t);s&&(n?s.reject(n):s.resolve(),r=r.remove(t)),i.Au[i.currentUser.toKey()]=r}}function qd(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const i of e.Pu.get(t))e.hu.delete(i),n&&e.lu.gu(i,n);e.Pu.delete(t),e.isPrimaryClient&&e.du.Hr(t).forEach(i=>{e.du.containsKey(i)||AA(e,i)})}function AA(e,t){e.Tu.delete(t.path.canonicalString());const n=e.Iu.get(t);n!==null&&(vg(e.remoteStore,n),e.Iu=e.Iu.remove(t),e.Eu.delete(n),Ig(e))}function iv(e,t,n){for(const i of n)i instanceof pA?(e.du.addReference(i.key,t),Ox(e,i)):i instanceof yA?(G(Rg,"Document no longer in limbo: "+i.key),e.du.removeReference(i.key,t),e.du.containsKey(i.key)||AA(e,i.key)):J(19791,{pu:i})}function Ox(e,t){const n=t.key,i=n.path.canonicalString();e.Iu.get(n)||e.Tu.has(i)||(G(Rg,"New document in limbo: "+n),e.Tu.add(i),Ig(e))}function Ig(e){for(;e.Tu.size>0&&e.Iu.size<e.maxConcurrentLimboResolutions;){const t=e.Tu.values().next().value;e.Tu.delete(t);const n=new Z(Lt.fromString(t)),i=e.Vu.next();e.Eu.set(i,new Ex(n)),e.Iu=e.Iu.insert(n,i),oA(e.remoteStore,new Ki(Vn(oh(n.path)),i,"TargetPurposeLimboResolution",rh.le))}}async function Rl(e,t,n){const i=rt(e),r=[],s=[],a=[];i.hu.isEmpty()||(i.hu.forEach((l,u)=>{a.push(i.fu(u,t,n).then(h=>{var d;if((h||n)&&i.isPrimaryClient){const g=h?!h.fromCache:(d=n==null?void 0:n.targetChanges.get(u.targetId))===null||d===void 0?void 0:d.current;i.sharedClientState.updateQueryState(u.targetId,g?"current":"not-current")}if(h){r.push(h);const g=yg.Rs(u.targetId,h);s.push(g)}}))}),await Promise.all(a),i.lu.Y_(r),await async function(u,h){const d=rt(u);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>P.forEach(h,m=>P.forEach(m.ds,_=>d.persistence.referenceDelegate.addReference(g,m.targetId,_)).next(()=>P.forEach(m.As,_=>d.persistence.referenceDelegate.removeReference(g,m.targetId,_)))))}catch(g){if(!Ia(g))throw g;G(_g,"Failed to update sequence numbers: "+g)}for(const g of h){const m=g.targetId;if(!g.fromCache){const _=d.xs.get(m),N=_.snapshotVersion,k=_.withLastLimboFreeSnapshotVersion(N);d.xs=d.xs.insert(m,k)}}}(i.localStore,s))}async function kx(e,t){const n=rt(e);if(!n.currentUser.isEqual(t)){G(Rg,"User change. New user:",t.toKey());const i=await iA(n.localStore,t);n.currentUser=t,function(s,a){s.Ru.forEach(l=>{l.forEach(u=>{u.reject(new K(U.CANCELLED,a))})}),s.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await Rl(n,i.ks)}}function Mx(e,t){const n=rt(e),i=n.Eu.get(t);if(i&&i.cu)return ft().add(i.key);{let r=ft();const s=n.Pu.get(t);if(!s)return r;for(const a of s){const l=n.hu.get(a);r=r.unionWith(l.view.eu)}return r}}function bA(e){const t=rt(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=vA.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Mx.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Dx.bind(null,t),t.lu.Y_=yx.bind(null,t.eventManager),t.lu.gu=_x.bind(null,t.eventManager),t}function Vx(e){const t=rt(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=xx.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Nx.bind(null,t),t}class Vc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=dh(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Su(t),await this.persistence.start(),this.localStore=this.Du(t),this.gcScheduler=this.vu(t,this.localStore),this.indexBackfillerScheduler=this.Cu(t,this.localStore)}vu(t,n){return null}Cu(t,n){return null}Du(t){return jD(this.persistence,new PD,t.initialUser,this.serializer)}Su(t){return new nA(pg.fi,this.serializer)}bu(t){return new QD}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Vc.provider={build:()=>new Vc};class Px extends Vc{constructor(t){super(),this.cacheSizeBytes=t}vu(t,n){Et(this.persistence.referenceDelegate instanceof kc,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new ED(i,t.asyncQueue,n)}Su(t){const n=this.cacheSizeBytes!==void 0?Be.withCacheSize(this.cacheSizeBytes):Be.DEFAULT;return new nA(i=>kc.fi(i,n),this.serializer)}}class Hd{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>nv(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=kx.bind(null,this.syncEngine),await mx(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new px}()}createDatastore(t){const n=dh(t.databaseInfo.databaseId),i=function(s){return new ZD(s)}(t.databaseInfo);return function(s,a,l,u){return new ex(s,a,l,u)}(t.authCredentials,t.appCheckCredentials,i,n)}createRemoteStore(t){return function(i,r,s,a,l){return new ix(i,r,s,a,l)}(this.localStore,this.datastore,t.asyncQueue,n=>nv(this.syncEngine,n,0),function(){return $_.C()?new $_:new YD}())}createSyncEngine(t,n){return function(r,s,a,l,u,h,d){const g=new Ax(r,s,a,l,u,h);return d&&(g.mu=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(r){const s=rt(r);G(Zr,"RemoteStore shutting down."),s.da.add(5),await wl(s),s.Ra.shutdown(),s.Va.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Hd.provider={build:()=>new Hd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Mu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Mu(this.observer.error,t):gi("Uncaught Error in snapshot listener:",t.toString()))}xu(){this.muted=!0}Mu(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yr="FirestoreClient";class Lx{constructor(t,n,i,r,s){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=De.UNAUTHENTICATED,this.clientId=g1.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,async a=>{G(yr,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>(G(yr,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new or;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const i=Sg(n,"Failed to shutdown persistence");t.reject(i)}}),t.promise}}async function Af(e,t){e.asyncQueue.verifyOperationInProgress(),G(yr,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let i=n.initialUser;e.setCredentialChangeListener(async r=>{i.isEqual(r)||(await iA(t.localStore,r),i=r)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function rv(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Ux(e);G(yr,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(i=>W_(t.remoteStore,i)),e.setAppCheckTokenChangeListener((i,r)=>W_(t.remoteStore,r)),e._onlineComponents=t}async function Ux(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){G(yr,"Using user provided OfflineComponentProvider");try{await Af(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(r){return r.name==="FirebaseError"?r.code===U.FAILED_PRECONDITION||r.code===U.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;oa("Error using user provided cache. Falling back to memory cache: "+n),await Af(e,new Vc)}}else G(yr,"Using default OfflineComponentProvider"),await Af(e,new Px(void 0));return e._offlineComponents}async function wA(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(G(yr,"Using user provided OnlineComponentProvider"),await rv(e,e._uninitializedComponentsProvider._online)):(G(yr,"Using default OnlineComponentProvider"),await rv(e,new Hd))),e._onlineComponents}function jx(e){return wA(e).then(t=>t.syncEngine)}async function Fd(e){const t=await wA(e),n=t.eventManager;return n.onListen=bx.bind(null,t.syncEngine),n.onUnlisten=Rx.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Sx.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Ix.bind(null,t.syncEngine),n}function zx(e,t,n={}){const i=new or;return e.asyncQueue.enqueueAndForget(async()=>function(s,a,l,u,h){const d=new SA({next:m=>{d.xu(),a.enqueueAndForget(()=>mA(s,g));const _=m.docs.has(l);!_&&m.fromCache?h.reject(new K(U.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&m.fromCache&&u&&u.source==="server"?h.reject(new K(U.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(m)},error:m=>h.reject(m)}),g=new gA(oh(l.path),d,{includeMetadataChanges:!0,Qa:!0});return dA(s,g)}(await Fd(e),e.asyncQueue,t,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RA(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sv=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IA(e,t,n){if(!n)throw new K(U.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Bx(e,t,n,i){if(t===!0&&i===!0)throw new K(U.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function av(e){if(!Z.isDocumentKey(e))throw new K(U.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function ov(e){if(Z.isDocumentKey(e))throw new K(U.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function ph(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(i){return i.constructor?i.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":J(12329,{type:typeof e})}function ai(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new K(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ph(e);throw new K(U.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CA="firestore.googleapis.com",lv=!0;class uv{constructor(t){var n,i;if(t.host===void 0){if(t.ssl!==void 0)throw new K(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=CA,this.ssl=lv}else this.host=t.host,this.ssl=(n=t.ssl)!==null&&n!==void 0?n:lv;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=eA;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<vD)throw new K(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}Bx("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=RA((i=t.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new K(U.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new K(U.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new K(U.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class yh{constructor(t,n,i,r){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new uv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new K(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new K(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new uv(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new $C;switch(i.type){case"firstParty":return new t4(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new K(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=sv.get(n);i&&(G("ComponentProvider","Removing Datastore"),sv.delete(n),i.terminate())}(this),Promise.resolve()}}function qx(e,t,n,i={}){var r;e=ai(e,yh);const s=Aa(t),a=e._getSettings(),l=Object.assign(Object.assign({},a),{emulatorOptions:e._getEmulatorOptions()}),u=`${t}:${n}`;s&&(EE(`https://${u}`),AE("Firestore",!0)),a.host!==CA&&a.host!==u&&oa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h=Object.assign(Object.assign({},a),{host:u,ssl:s,emulatorOptions:i});if(!Yr(h,l)&&(e._setSettings(h),i.mockUserToken)){let d,g;if(typeof i.mockUserToken=="string")d=i.mockUserToken,g=De.MOCK_USER;else{d=vw(i.mockUserToken,(r=e._app)===null||r===void 0?void 0:r.options.projectId);const m=i.mockUserToken.sub||i.mockUserToken.user_id;if(!m)throw new K(U.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new De(m)}e._authCredentials=new ZC(new d1(d,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(t,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new Da(this.firestore,t,this._query)}}class Pe{constructor(t,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new lr(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Pe(this.firestore,t,this._key)}}class lr extends Da{constructor(t,n,i){super(t,n,oh(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Pe(this.firestore,null,new Z(t))}withConverter(t){return new lr(this.firestore,t,this._path)}}function bf(e,t,...n){if(e=He(e),IA("collection","path",t),e instanceof yh){const i=Lt.fromString(t,...n);return ov(i),new lr(e,null,i)}{if(!(e instanceof Pe||e instanceof lr))throw new K(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(Lt.fromString(t,...n));return ov(i),new lr(e.firestore,null,i)}}function Yn(e,t,...n){if(e=He(e),arguments.length===1&&(t=g1.newId()),IA("doc","path",t),e instanceof yh){const i=Lt.fromString(t,...n);return av(i),new Pe(e,null,new Z(i))}{if(!(e instanceof Pe||e instanceof lr))throw new K(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(Lt.fromString(t,...n));return av(i),new Pe(e.firestore,e instanceof lr?e.converter:null,new Z(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cv="AsyncQueue";class hv{constructor(t=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new sA(this,"async_queue_retry"),this.rc=()=>{const i=Ef();i&&G(cv,"Visibility state changed to "+i.visibilityState),this.x_.b_()},this.sc=t;const n=Ef();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.oc(),this._c(t)}enterRestrictedMode(t){if(!this.Yu){this.Yu=!0,this.tc=t||!1;const n=Ef();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.rc)}}enqueue(t){if(this.oc(),this.Yu)return new Promise(()=>{});const n=new or;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Ju.push(t),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(t){if(!Ia(t))throw t;G(cv,"Operation failed with retryable error: "+t)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(t){const n=this.sc.then(()=>(this.ec=!0,t().catch(i=>{throw this.Xu=i,this.ec=!1,gi("INTERNAL UNHANDLED ERROR: ",fv(i)),i}).then(i=>(this.ec=!1,i))));return this.sc=n,n}enqueueAfterDelay(t,n,i){this.oc(),this.nc.indexOf(t)>-1&&(n=0);const r=bg.createAndSchedule(this,t,n,i,s=>this.uc(s));return this.Zu.push(r),r}oc(){this.Xu&&J(47125,{cc:fv(this.Xu)})}verifyOperationInProgress(){}async lc(){let t;do t=this.sc,await t;while(t!==this.sc)}hc(t){for(const n of this.Zu)if(n.timerId===t)return!0;return!1}Pc(t){return this.lc().then(()=>{this.Zu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.Zu)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.lc()})}Tc(t){this.nc.push(t)}uc(t){const n=this.Zu.indexOf(t);this.Zu.splice(n,1)}}function fv(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dv(e){return function(n,i){if(typeof n!="object"||n===null)return!1;const r=n;for(const s of i)if(s in r&&typeof r[s]=="function")return!0;return!1}(e,["next","error","complete"])}class da extends yh{constructor(t,n,i,r){super(t,n,i,r),this.type="firestore",this._queue=new hv,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new hv(t),this._firestoreClient=void 0,await t}}}function Hx(e,t){const n=typeof e=="object"?e:RE(),i=typeof e=="string"?e:Rc,r=Km(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const s=yw("firestore");s&&qx(r,...s)}return r}function Cg(e){if(e._terminated)throw new K(U.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||Fx(e),e._firestoreClient}function Fx(e){var t,n,i;const r=e._freezeSettings(),s=function(l,u,h,d){return new g4(l,u,h,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,RA(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,r);e._componentsProvider||!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(e._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),e._firestoreClient=new Lx(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{constructor(t){this._byteString=t}static fromBase64String(t){try{return new ma(we.fromBase64String(t))}catch(n){throw new K(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new ma(we.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dg{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new K(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new be(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new K(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new K(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return at(this._lat,t._lat)||at(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gx=/^__.*__$/;class Qx{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return this.fieldMask!==null?new rs(t,this.data,this.fieldMask,n,this.fieldTransforms):new bl(t,this.data,n,this.fieldTransforms)}}function xA(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw J(40011,{Ic:e})}}class Og{constructor(t,n,i,r,s,a){this.settings=t,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.Ec(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(t){return new Og(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(t){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(t),r=this.dc({path:i,Rc:!1});return r.Vc(t),r}mc(t){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(t),r=this.dc({path:i,Rc:!1});return r.Ec(),r}fc(t){return this.dc({path:void 0,Rc:!0})}gc(t){return Pc(t,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Ec(){if(this.path)for(let t=0;t<this.path.length;t++)this.Vc(this.path.get(t))}Vc(t){if(t.length===0)throw this.gc("Document fields must not be empty");if(xA(this.Ic)&&Gx.test(t))throw this.gc('Document fields cannot begin and end with "__"')}}class Yx{constructor(t,n,i){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=i||dh(t)}bc(t,n,i,r=!1){return new Og({Ic:t,methodName:n,wc:i,path:be.emptyPath(),Rc:!1,yc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function NA(e){const t=e._freezeSettings(),n=dh(e._databaseId);return new Yx(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Kx(e,t,n,i,r,s={}){const a=e.bc(s.merge||s.mergeFields?2:0,t,n,r);MA("Data must be an object, but it was:",a,i);const l=OA(i,a);let u,h;if(s.merge)u=new Tn(a.fieldMask),h=a.fieldTransforms;else if(s.mergeFields){const d=[];for(const g of s.mergeFields){const m=$x(t,g,n);if(!a.contains(m))throw new K(U.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);Wx(d,m)||d.push(m)}u=new Tn(d),h=a.fieldTransforms.filter(g=>u.covers(g.field))}else u=null,h=a.fieldTransforms;return new Qx(new dn(l),u,h)}function Xx(e,t,n,i=!1){return kg(n,e.bc(i?4:3,t))}function kg(e,t){if(kA(e=He(e)))return MA("Unsupported field value:",t,e),OA(e,t);if(e instanceof DA)return function(i,r){if(!xA(r.Ic))throw r.gc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.gc(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Rc&&t.Ic!==4)throw t.gc("Nested arrays are not supported");return function(i,r){const s=[];let a=0;for(const l of i){let u=kg(l,r.fc(a));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),a++}return{arrayValue:{values:s}}}(e,t)}return function(i,r){if((i=He(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return U4(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const s=ue.fromDate(i);return{timestampValue:Oc(r.serializer,s)}}if(i instanceof ue){const s=new ue(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Oc(r.serializer,s)}}if(i instanceof xg)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof ma)return{bytesValue:K1(r.serializer,i._byteString)};if(i instanceof Pe){const s=r.databaseId,a=i.firestore._databaseId;if(!a.isEqual(s))throw r.gc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:mg(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Ng)return function(a,l){return{mapValue:{fields:{[b1]:{stringValue:S1},[Ic]:{arrayValue:{values:a.toArray().map(h=>{if(typeof h!="number")throw l.gc("VectorValues must only contain numeric values.");return cg(l.serializer,h)})}}}}}}(i,r);throw r.gc(`Unsupported field value: ${ph(i)}`)}(e,t)}function OA(e,t){const n={};return y1(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ns(e,(i,r)=>{const s=kg(r,t.Ac(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function kA(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof ue||e instanceof xg||e instanceof ma||e instanceof Pe||e instanceof DA||e instanceof Ng)}function MA(e,t,n){if(!kA(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const i=ph(n);throw i==="an object"?t.gc(e+" a custom object"):t.gc(e+" "+i)}}function $x(e,t,n){if((t=He(t))instanceof Dg)return t._internalPath;if(typeof t=="string")return VA(e,t);throw Pc("Field path arguments must be of type string or ",e,!1,void 0,n)}const Zx=new RegExp("[~\\*/\\[\\]]");function VA(e,t,n){if(t.search(Zx)>=0)throw Pc(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Dg(...t.split("."))._internalPath}catch{throw Pc(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Pc(e,t,n,i,r){const s=i&&!i.isEmpty(),a=r!==void 0;let l=`Function ${t}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(s||a)&&(u+=" (found",s&&(u+=` in field ${i}`),a&&(u+=` in document ${r}`),u+=")"),new K(U.INVALID_ARGUMENT,l+e+u)}function Wx(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{constructor(t,n,i,r,s){this._firestore=t,this._userDataWriter=n,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Pe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new Jx(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(LA("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Jx extends PA{data(){return super.data()}}function LA(e,t){return typeof t=="string"?VA(e,t):t instanceof Dg?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tN(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new K(U.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Mg{}class eN extends Mg{}function nN(e,t,...n){let i=[];t instanceof Mg&&i.push(t),i=i.concat(n),function(s){const a=s.filter(u=>u instanceof Pg).length,l=s.filter(u=>u instanceof Vg).length;if(a>1||a>0&&l>0)throw new K(U.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)e=r._apply(e);return e}class Vg extends eN{constructor(t,n,i){super(),this._field=t,this._op=n,this._value=i,this.type="where"}static _create(t,n,i){return new Vg(t,n,i)}_apply(t){const n=this._parse(t);return UA(t._query,n),new Da(t.firestore,t.converter,kd(t._query,n))}_parse(t){const n=NA(t.firestore);return function(s,a,l,u,h,d,g){let m;if(h.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new K(U.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){gv(g,d);const N=[];for(const k of g)N.push(mv(u,s,k));m={arrayValue:{values:N}}}else m=mv(u,s,g)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||gv(g,d),m=Xx(l,a,g,d==="in"||d==="not-in");return re.create(h,d,m)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}class Pg extends Mg{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new Pg(t,n)}_parse(t){const n=this._queryConstraints.map(i=>i._parse(t)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:An.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(r,s){let a=r;const l=s.getFlattenedFilters();for(const u of l)UA(a,u),a=kd(a,u)}(t._query,n),new Da(t.firestore,t.converter,kd(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function mv(e,t,n){if(typeof(n=He(n))=="string"){if(n==="")throw new K(U.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!O1(t)&&n.indexOf("/")!==-1)throw new K(U.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=t.path.child(Lt.fromString(n));if(!Z.isDocumentKey(i))throw new K(U.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return C_(e,new Z(i))}if(n instanceof Pe)return C_(e,n._key);throw new K(U.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ph(n)}.`)}function gv(e,t){if(!Array.isArray(e)||e.length===0)throw new K(U.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function UA(e,t){const n=function(r,s){for(const a of r)for(const l of a.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(e.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new K(U.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new K(U.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class iN{convertValue(t,n="none"){switch(gr(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ee(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(mr(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw J(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const i={};return ns(t,(r,s)=>{i[r]=this.convertValue(s,n)}),i}convertVectorValue(t){var n,i,r;const s=(r=(i=(n=t.fields)===null||n===void 0?void 0:n[Ic].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(a=>ee(a.doubleValue));return new Ng(s)}convertGeoPoint(t){return new xg(ee(t.latitude),ee(t.longitude))}convertArray(t,n){return(t.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(t,n){switch(n){case"previous":const i=ah(t);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Ko(t));default:return null}}convertTimestamp(t){const n=dr(t);return new ue(n.seconds,n.nanos)}convertDocumentKey(t,n){const i=Lt.fromString(t);Et(tA(i),9688,{name:t});const r=new Xo(i.get(1),i.get(3)),s=new Z(i.popFirst(5));return r.isEqual(n)||gi(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rN(e,t,n){let i;return i=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class jA extends PA{constructor(t,n,i,r,s,a){super(t,n,i,r,a),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new zu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const i=this._document.data.field(LA("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class zu extends jA{data(t={}){return super.data(t)}}class sN{constructor(t,n,i,r){this._firestore=t,this._userDataWriter=n,this._snapshot=r,this.metadata=new lo(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(i=>{t.call(n,new zu(this._firestore,this._userDataWriter,i.key,i,new lo(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new K(U.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>{const u=new zu(r._firestore,r._userDataWriter,l.doc.key,l.doc,new lo(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const u=new zu(r._firestore,r._userDataWriter,l.doc.key,l.doc,new lo(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let h=-1,d=-1;return l.type!==0&&(h=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),d=a.indexOf(l.doc.key)),{type:aN(l.type),doc:u,oldIndex:h,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function aN(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return J(61501,{type:e})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oN(e){e=ai(e,Pe);const t=ai(e.firestore,da);return zx(Cg(t),e._key).then(n=>qA(t,e,n))}class zA extends iN{constructor(t){super(),this.firestore=t}convertBytes(t){return new ma(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Pe(this.firestore,null,n)}}function pu(e,t,n){e=ai(e,Pe);const i=ai(e.firestore,da),r=rN(e.converter,t,n);return BA(i,[Kx(NA(i),"setDoc",e._key,r,e.converter!==null,n).toMutation(e._key,Pn.none())])}function lN(e){return BA(ai(e.firestore,da),[new hg(e._key,Pn.none())])}function pv(e,...t){var n,i,r;e=He(e);let s={includeMetadataChanges:!1,source:"default"},a=0;typeof t[a]!="object"||dv(t[a])||(s=t[a],a++);const l={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(dv(t[a])){const g=t[a];t[a]=(n=g.next)===null||n===void 0?void 0:n.bind(g),t[a+1]=(i=g.error)===null||i===void 0?void 0:i.bind(g),t[a+2]=(r=g.complete)===null||r===void 0?void 0:r.bind(g)}let u,h,d;if(e instanceof Pe)h=ai(e.firestore,da),d=oh(e._key.path),u={next:g=>{t[a]&&t[a](qA(h,e,g))},error:t[a+1],complete:t[a+2]};else{const g=ai(e,Da);h=ai(g.firestore,da),d=g._query;const m=new zA(h);u={next:_=>{t[a]&&t[a](new sN(h,m,g,_))},error:t[a+1],complete:t[a+2]},tN(e._query)}return function(m,_,N,k){const V=new SA(k),w=new gA(_,V,N);return m.asyncQueue.enqueueAndForget(async()=>dA(await Fd(m),w)),()=>{V.xu(),m.asyncQueue.enqueueAndForget(async()=>mA(await Fd(m),w))}}(Cg(h),d,l,u)}function BA(e,t){return function(i,r){const s=new or;return i.asyncQueue.enqueueAndForget(async()=>Cx(await jx(i),r,s)),s.promise}(Cg(e),t)}function qA(e,t,n){const i=n.docs.get(t._key),r=new zA(e);return new jA(e,r,t._key,i,new lo(n.hasPendingWrites,n.fromCache),t.converter)}(function(t,n=!0){(function(r){wa=r})(ba),aa(new Kr("firestore",(i,{instanceIdentifier:r,options:s})=>{const a=i.getProvider("app").getImmediate(),l=new da(new WC(i.getProvider("auth-internal")),new e4(a,i.getProvider("app-check-internal")),function(h,d){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new K(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xo(h.options.projectId,d)}(a,r),a);return s=Object.assign({useFetchStreams:n},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),sr(p_,y_,t),sr(p_,y_,"esm2017")})();const uN="/pokemonTeamBuilder/assets/Normal_icon_LA-BGryHHJt.png",cN="/pokemonTeamBuilder/assets/Fire_icon_LA-gNUdPIF8.png",hN="/pokemonTeamBuilder/assets/Water_icon_LA-CLtETpPC.png",fN="/pokemonTeamBuilder/assets/Electric_icon_LA-Cn0cgNK4.png",dN="/pokemonTeamBuilder/assets/Grass_icon_LA-LMWJ0iHE.png",mN="/pokemonTeamBuilder/assets/Ice_icon_LA-f6cK0r3g.png",gN="/pokemonTeamBuilder/assets/Fighting_icon_LA-DHouTAMI.png",pN="/pokemonTeamBuilder/assets/Poison_icon_LA-DiKpEp3q.png",yN="/pokemonTeamBuilder/assets/Ground_icon_LA-Dx9ZtHU7.png",_N="/pokemonTeamBuilder/assets/Flying_icon_LA-BRe4cDmN.png",vN="/pokemonTeamBuilder/assets/Psychic_icon_LA-4mhvBiGh.png",TN="/pokemonTeamBuilder/assets/Bug_icon_LA-BuBZ1E4V.png",EN="/pokemonTeamBuilder/assets/Rock_icon_LA-_NZ0uszu.png",AN="/pokemonTeamBuilder/assets/Ghost_icon_LA-BUwsRPAF.png",bN="/pokemonTeamBuilder/assets/Dragon_icon_LA-ChtV_ew5.png",SN="/pokemonTeamBuilder/assets/Dark_icon_LA-B_1cMoFb.png",wN="/pokemonTeamBuilder/assets/Steel_icon_LA-DW5Y2PLB.png",RN="/pokemonTeamBuilder/assets/Fairy_icon_LA-DRiwHR6t.png",Xn="https://art.pixilart.com/sr2a947c8f967b8.png",IN={dark:{primary:"#7d65e1",background:"#111827",card:"#1F2937",cardLight:"#374151",text:"#FFFFFF",textMuted:"#9CA3AF"},light:{primary:"#6353b3",background:"#F3F4F6",card:"#FFFFFF",cardLight:"#E5E7EB",text:"#1F2937",textMuted:"#6B7280"}},HA={normal:"#A8A77A",fire:"#EE8130",water:"#6390F0",electric:"#F7D02C",grass:"#7AC74C",ice:"#96D9D6",fighting:"#C22E28",poison:"#A33EA1",ground:"#E2BF65",flying:"#A98FF3",psychic:"#F95587",bug:"#A6B91A",rock:"#B6A136",ghost:"#735797",dragon:"#6F35FC",dark:"#705746",steel:"#B7B7CE",fairy:"#D685AD"},FA={normal:uN,fire:cN,water:hN,electric:fN,grass:dN,ice:mN,fighting:gN,poison:pN,ground:yN,flying:_N,psychic:vN,bug:TN,rock:EN,ghost:AN,dragon:bN,dark:SN,steel:wN,fairy:RN},yu={normal:{damageTaken:{Fighting:2,Ghost:0},damageDealt:{Rock:.5,Steel:.5}},fire:{damageTaken:{Water:2,Ground:2,Rock:2,Fire:.5,Grass:.5,Ice:.5,Bug:.5,Steel:.5,Fairy:.5},damageDealt:{Fire:.5,Water:.5,Rock:.5,Dragon:.5,Grass:2,Ice:2,Bug:2,Steel:2}},water:{damageTaken:{Grass:2,Electric:2,Fire:.5,Water:.5,Ice:.5,Steel:.5},damageDealt:{Water:.5,Grass:.5,Dragon:.5,Fire:2,Ground:2,Rock:2}},grass:{damageTaken:{Fire:2,Ice:2,Poison:2,Flying:2,Bug:2,Water:.5,Grass:.5,Electric:.5,Ground:.5},damageDealt:{Fire:.5,Grass:.5,Poison:.5,Flying:.5,Bug:.5,Steel:.5,Dragon:.5,Water:2,Ground:2,Rock:2}},electric:{damageTaken:{Ground:2,Electric:.5,Flying:.5,Steel:.5},damageDealt:{Grass:.5,Electric:.5,Dragon:.5,Ground:0,Water:2,Flying:2}},ice:{damageTaken:{Fire:2,Fighting:2,Rock:2,Steel:2,Ice:.5},damageDealt:{Fire:.5,Water:.5,Ice:.5,Steel:.5,Grass:2,Ground:2,Flying:2,Dragon:2}},fighting:{damageTaken:{Flying:2,Psychic:2,Fairy:2,Bug:.5,Rock:.5,Dark:.5},damageDealt:{Flying:.5,Psychic:.5,Bug:.5,Fairy:.5,Poison:.5,Ghost:0,Normal:2,Ice:2,Rock:2,Dark:2,Steel:2}},poison:{damageTaken:{Ground:2,Psychic:2,Grass:.5,Fighting:.5,Poison:.5,Bug:.5,Fairy:.5},damageDealt:{Ground:.5,Rock:.5,Poison:.5,Ghost:.5,Steel:0,Grass:2,Fairy:2}},ground:{damageTaken:{Water:2,Grass:2,Ice:2,Poison:.5,Rock:.5,Electric:0},damageDealt:{Grass:.5,Bug:.5,Flying:0,Fire:2,Electric:2,Poison:2,Rock:2,Steel:2}},flying:{damageTaken:{Electric:2,Ice:2,Rock:2,Grass:.5,Fighting:.5,Bug:.5,Ground:0},damageDealt:{Electric:.5,Rock:.5,Steel:.5,Grass:2,Fighting:2,Bug:2}},psychic:{damageTaken:{Bug:2,Ghost:2,Dark:2,Fighting:.5,Psychic:.5},damageDealt:{Steel:.5,Psychic:.5,Dark:0,Fighting:2,Poison:2}},bug:{damageTaken:{Fire:2,Flying:2,Rock:2,Grass:.5,Fighting:.5,Ground:.5},damageDealt:{Fire:.5,Fighting:.5,Poison:.5,Flying:.5,Ghost:.5,Steel:.5,Fairy:.5,Grass:2,Psychic:2,Dark:2}},rock:{damageTaken:{Water:2,Grass:2,Fighting:2,Ground:2,Steel:2,Normal:.5,Fire:.5,Poison:.5,Flying:.5},damageDealt:{Fighting:.5,Ground:.5,Steel:.5,Fire:2,Ice:2,Flying:2,Bug:2}},ghost:{damageTaken:{Ghost:2,Dark:2,Poison:.5,Bug:.5,Normal:0,Fighting:0},damageDealt:{Steel:.5,Dark:.5,Normal:0,Ghost:2,Psychic:2}},dragon:{damageTaken:{Ice:2,Dragon:2,Fairy:2,Fire:.5,Water:.5,Grass:.5,Electric:.5},damageDealt:{Steel:.5,Fairy:0,Dragon:2}},dark:{damageTaken:{Fighting:2,Bug:2,Fairy:2,Ghost:.5,Dark:.5,Psychic:0},damageDealt:{Fighting:.5,Dark:.5,Fairy:.5,Ghost:2,Psychic:2}},steel:{damageTaken:{Fire:2,Fighting:2,Ground:2,Normal:.5,Grass:.5,Ice:.5,Flying:.5,Psychic:.5,Bug:.5,Rock:.5,Dragon:.5,Steel:.5,Fairy:.5,Poison:0},damageDealt:{Fire:.5,Water:.5,Electric:.5,Steel:.5,Ice:2,Rock:2,Fairy:2}},fairy:{damageTaken:{Poison:2,Steel:2,Fighting:.5,Bug:.5,Dark:.5,Dragon:0},damageDealt:{Fire:.5,Poison:.5,Steel:.5,Fighting:2,Dragon:2,Dark:2}}},CN=({color:e})=>T.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",style:{color:e},children:T.jsx("path",{fillRule:"evenodd",d:"M12 2C6.477 2 2 6.477 2 12c0 4.418 2.865 8.168 6.839 9.492.5.092.682-.217.682-.482 0-.237-.009-.868-.014-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.031-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.378.203 2.398.1 2.651.64.7 1.03 1.595 1.03 2.688 0 3.848-2.338 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.001 10.001 0 0022 12c0-5.523-4.477-10-10-10z",clipRule:"evenodd"})}),DN=({color:e})=>T.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",style:{color:e},children:T.jsx("path",{d:"M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"})}),GA=({className:e="w-6 h-6",isFavorite:t,color:n})=>T.jsxs("svg",{className:e,fill:t?"currentColor":"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,style:{color:t?"#FBBF24":n},children:[" ",T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.196-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.783-.57-.38-1.81.588-1.81h4.914a1 1 0 00.95-.69l1.519-4.674z"})," "]}),Gd=()=>T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[" ",T.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm4 0a1 1 0 012 0v6a1 1 0 11-2 0V8z",clipRule:"evenodd"})," "]}),xN=()=>T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[" ",T.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10 8.586l3.95-3.95a1 1 0 111.414 1.414L11.414 10l3.95 3.95a1 1 0 01-1.414 1.414L10 11.414l-3.95 3.95a1 1 0 01-1.414-1.414L8.586 10l-3.95-3.95a1 1 0 011.414-1.414L10 8.586z"})]}),NN=()=>T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[" ",T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})," "]}),ON=()=>T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[" ",T.jsx("path",{fillRule:"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z",clipRule:"evenodd"})," "]}),kN=()=>T.jsx("svg",{className:"w-6 h-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})}),QA=()=>T.jsx("svg",{className:"w-6 h-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),YA=()=>T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:T.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),MN=()=>T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-pokeball shrink-0",children:[T.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),T.jsx("path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0"}),T.jsx("path",{d:"M12 12m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"}),T.jsx("path",{d:"M3 12h6"}),T.jsx("path",{d:"M15 12h6"})]}),VN=()=>T.jsx("svg",{className:"w-6 h-6 shrink-0",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 10h16M4 14h16M4 18h16"})}),PN=()=>T.jsx("svg",{className:"w-6 h-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"})}),LN=()=>T.jsx("svg",{className:"w-6 h-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 5l7 7-7 7M5 5l7 7-7 7"})}),UN=()=>T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.684 13.342C8.886 12.938 9 12.482 9 12s-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.35a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"})}),jN=()=>T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[T.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),T.jsx("path",{d:"M5 7.2a2.2 2.2 0 0 1 2.2 -2.2h1a2.2 2.2 0 0 0 1.55 -.64l.7 -.7a2.2 2.2 0 0 1 3.12 0l.7 .7c.412 .41 .97 .64 1.55 .64h1a2.2 2.2 0 0 1 2.2 2.2v1c0 .58 .23 1.138 .64 1.55l.7 .7a2.2 2.2 0 0 1 0 3.12l-.7 .7a2.2 2.2 0 0 0 -.64 1.55v1a2.2 2.2 0 0 1 -2.2 2.2h-1a2.2 2.2 0 0 0 -1.55 .64l-.7 .7a2.2 2.2 0 0 1 -3.12 0l-.7 -.7a2.2 2.2 0 0 0 -1.55 -.64h-1a2.2 2.2 0 0 1 -2.2 -2.2v-1a2.2 2.2 0 0 0 -.64 -1.55l-.7 -.7a2.2 2.2 0 0 1 0 -3.12l.7 -.7a2.2 2.2 0 0 0 .64 -1.55v-1"}),T.jsx("path",{d:"M9 12l2 2l4 -4"})]}),zN=()=>T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[T.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),T.jsx("path",{d:"M19.5 12.572l-7.5 7.428l-7.5 -7.428a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572"}),T.jsx("path",{d:"M12 6l-2 4l4 3l-2 4v3"})]}),BN=()=>T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[T.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),T.jsx("path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0"}),T.jsx("path",{d:"M12 8v4"}),T.jsx("path",{d:"M12 16h.01"})]}),qN=({color:e})=>T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-sun",style:{color:e},children:[T.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),T.jsx("path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0"}),T.jsx("path",{d:"M3 12h1m8 -9v1m8 8h1m-9 8v1m-6.4 -15.4l.7 .7m12.1 -.7l-.7 .7m0 11.4l.7 .7m-12.1 -.7l-.7 .7"})]}),HN=({color:e})=>T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-moon",style:{color:e},children:[T.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),T.jsx("path",{d:"M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z"})]}),Qd=({type:e,colors:t})=>T.jsxs("span",{className:"text-xs text-white font-semibold mr-1 mb-1 px-2.5 py-1 rounded-full shadow-sm",style:{backgroundColor:HA[e]||"#777"},children:[" ",e.toUpperCase()," "]}),FN={apiKey:"AIzaSyARU0ZFaHQhC3Iz2v48MMugAx5LwhDAFaM",authDomain:"pokemonbuilder-8f80d.firebaseapp.com",projectId:"pokemonbuilder-8f80d",storageBucket:"pokemonbuilder-8f80d.appspot.com",messagingSenderId:"514902448758",appId:"1:514902448758:web:818f024a8ce15bffa65d57",measurementId:"G-MLY0EFTHDK"},Rn="pokemonTeamBuilder",GN=(e,t)=>{const[n,i]=F.useState(e);return F.useEffect(()=>{const r=setTimeout(()=>{i(e)},t);return()=>{clearTimeout(r)}},[e,t]),n},QN=Iv.memo(({onAdd:e,onShowDetails:t,details:n,lastRef:i,isSuggested:r,colors:s})=>{const a=u=>{u.stopPropagation(),e(n)},l=u=>{u.stopPropagation(),t(n)};return n?T.jsxs("div",{ref:i,onClick:a,className:`rounded-lg p-3 text-center group relative cursor-pointer transition-all duration-300 ${r?"ring-2 ring-green-400 shadow-lg":""}`,style:{backgroundColor:s.cardLight},children:[r&&T.jsx("div",{className:"absolute -top-2 -right-2 text-xs bg-green-500 text-white font-bold py-1 px-2 rounded-full z-10",children:"Suggested"}),T.jsx("img",{src:n.sprite||Xn,onError:u=>{u.currentTarget.src=Xn},alt:n.name,className:"mx-auto w-full h-auto max-w-[120px] group-hover:scale-110 transition-transform"}),T.jsx("p",{className:"mt-2 text-sm font-semibold capitalize",style:{color:s.text},children:n.name}),T.jsx("div",{className:"flex justify-center items-center mt-1 gap-1",children:n.types.map(u=>T.jsx("img",{src:FA[u],alt:u,className:"w-5 h-5"},u))}),T.jsx("button",{onClick:l,className:`
            absolute top-2 left-2 text-gray-400 hover:text-white transition-colors
            opacity-100
            lg:opacity-0
            lg:group-hover:opacity-100
            lg:transition-opacity
            `,children:T.jsx(YA,{})})]}):T.jsxs("div",{ref:i,className:"rounded-lg p-3 text-center h-[172px]",style:{backgroundColor:s.cardLight},children:[T.jsx("div",{className:"mx-auto h-24 w-24 bg-gray-700 rounded-md animate-pulse"}),T.jsx("div",{className:"mt-2 h-5 w-24 mx-auto bg-gray-700 rounded animate-pulse"}),T.jsx("div",{className:"flex justify-center items-center mt-2 gap-2",children:T.jsx("div",{className:"h-5 w-5 bg-gray-700 rounded-full animate-pulse"})})]})}),YN=({stat:e,value:t,colors:n})=>{const i={hp:"bg-red-500",attack:"bg-orange-500",defense:"bg-yellow-500","special-attack":"bg-blue-500","special-defense":"bg-green-500",speed:"bg-pink-500"},r=t/255*100;return T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx("p",{className:"w-1/3 text-sm font-semibold capitalize text-right",style:{color:n.text},children:e.replace("-"," ")}),T.jsx("div",{className:"w-2/3 rounded-full h-4",style:{backgroundColor:n.cardLight},children:T.jsx("div",{className:`${i[e]} h-4 rounded-full text-xs text-white flex items-center justify-end pr-2`,style:{width:`${r}%`},children:t})})]})},KN=({ability:e})=>{const[t,n]=F.useState(""),[i,r]=F.useState(!1),[s,a]=F.useState(!1),l=F.useRef(null),u=F.useCallback(async()=>{if(!(t||s)){a(!0);try{const k=(await(await fetch(e.ability.url)).json()).effect_entries.find(V=>V.language.name==="en");n((k==null?void 0:k.short_effect)||"No description available.")}catch{n("Could not load description.")}finally{a(!1)}}},[e.ability.url,t,s]),h=()=>{u(),r(!0)},d=()=>{r(!1)},g=()=>{u(),l.current=setTimeout(()=>{r(!0)},300)},m=()=>{clearTimeout(l.current),setTimeout(()=>{r(!1)},2e3)};return T.jsxs("span",{className:"relative capitalize text-white inline-block bg-gray-700 px-3 py-1 rounded-full text-sm cursor-pointer",onMouseEnter:h,onMouseLeave:d,onTouchStart:g,onTouchEnd:m,children:[e.ability.name.replace("-"," "),i&&T.jsx("span",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 w-48 p-2 bg-gray-700 text-white text-xs rounded-md shadow-lg z-20",children:s?"Loading...":t})]})},XN=({pokemon:e,onClose:t,onAdd:n,currentTeam:i,colors:r})=>{var a,l;if(!e)return null;const s=i.some(u=>u.id===e.id);return T.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",onClick:t,children:T.jsxs("div",{className:"rounded-2xl shadow-xl w-full max-w-lg p-6 relative animate-fade-in",style:{backgroundColor:r.card},onClick:u=>u.stopPropagation(),children:[T.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors",children:T.jsx(QA,{})}),T.jsxs("div",{className:"text-center",children:[T.jsx("img",{src:e.animatedSprite||e.sprite,alt:e.name,className:"mx-auto h-32 w-36 image-pixelated"}),T.jsxs("h2",{className:"text-3xl font-bold capitalize mt-2",style:{color:r.text},children:[e.name," ",T.jsxs("span",{style:{color:r.textMuted},children:["#",e.id]})]}),T.jsx("div",{className:"flex justify-center gap-2 mt-2",children:e.types.map(u=>T.jsx(Qd,{type:u,colors:r},u))})]}),T.jsxs("div",{className:"mt-6",children:[T.jsx("h3",{className:"text-xl font-bold mb-3 text-center",style:{color:r.text},children:"Base Stats"}),T.jsx("div",{className:"space-y-2",children:(a=e.stats)==null?void 0:a.map(u=>T.jsx(YN,{stat:u.stat.name,value:u.base_stat,colors:r},u.stat.name))})]}),T.jsxs("div",{className:"mt-6",children:[T.jsx("h3",{className:"text-xl font-bold mb-3 text-center",children:"Abilities"}),T.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:(l=e.abilities)==null?void 0:l.map((u,h)=>T.jsx(KN,{ability:u},h))})]}),T.jsx("div",{className:"mt-8 flex justify-center",children:!s&&T.jsxs("button",{onClick:()=>{n(e),t()},className:"bg-primary hover:bg-purple-500/30 text-white font-bold py-2 px-6 rounded-lg flex items-center gap-2 transition-colors",children:[T.jsx(ON,{})," Add to Team"]})})]})})},$N=({currentTeam:e,teamName:t,setTeamName:n,handleRemoveFromTeam:i,handleSaveTeam:r,editingTeamId:s,handleClearTeam:a,recentTeams:l,setCurrentPage:u,handleToggleFavorite:h,handleEditTeam:d,handleShareTeam:g,handleDeleteTeam:m,teamAnalysis:_,searchInput:N,setSearchInput:k,selectedGeneration:V,setSelectedGeneration:w,generations:v,isInitialLoading:R,isFiltering:x,availablePokemons:j,pokemonDetailsCache:H,handleAddPokemonToTeam:E,lastPokemonElementRef:y,isFetchingMore:A,visibleCount:b,selectedTypes:I,handleTypeSelection:C,showDetails:S,suggestedPokemonIds:Gt,colors:Q})=>T.jsxs("main",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[T.jsxs("div",{className:"lg:col-span-3 space-y-8",children:[T.jsxs("section",{className:"p-6 rounded-xl shadow-lg",style:{backgroundColor:Q.card},children:[T.jsx("h2",{className:"text-base md:text-lg font-bold mb-4 border-b-2 pb-2",style:{fontFamily:"'Press Start 2P'",borderColor:Q.primary,color:Q.text},children:"Current Team"}),T.jsx("input",{type:"text",value:t,onChange:M=>n(M.target.value),placeholder:"Team Name",className:"w-full p-3 rounded-lg border-2 focus:outline-none",style:{backgroundColor:Q.cardLight,borderColor:"transparent",color:Q.text}}),T.jsxs("div",{className:"grid grid-cols-3 gap-4 min-h-[120px] p-4 rounded-lg mt-4 ",style:{backgroundColor:Q.background},children:[e.map(M=>T.jsxs("div",{className:"text-center relative group cursor-pointer",onClick:Y=>{Y.stopPropagation(),S(M)},children:[T.jsx("img",{src:M.animatedSprite||M.sprite||Xn,onError:Y=>{Y.currentTarget.src=M.sprite||Xn},alt:M.name,className:"mx-auto h-20 w-20"}),T.jsx("p",{className:"text-xs capitalize truncate",style:{color:Q.text},children:M.name}),T.jsx("button",{onClick:Y=>{Y.stopPropagation(),S(M)},className:"absolute top-1 left-1 bg-gray-700 bg-opacity-50 text-white rounded-full h-5 w-5 flex items-center justify-center transition-opacity text-sm",children:T.jsx(YA,{})}),T.jsx("button",{onClick:Y=>{Y.stopPropagation(),i(M.id)},className:`
                                absolute top-1 right-1 bg-red-600 text-white rounded-full h-6 w-6 flex items-center justify-center text-sm
                                opacity-100 visible
                                lg:opacity-0 lg:invisible
                                lg:group-hover:opacity-100 lg:group-hover:visible
                                transition-opacity duration-200 
                            `,children:T.jsx(Gd,{})})]},M.id)),Array.from({length:6-e.length}).map((M,Y)=>T.jsx("div",{className:"flex items-center justify-center",children:T.jsx("img",{src:Xn,alt:"Empty team slot",className:"w-12 h-12 opacity-40"})},Y))]}),T.jsxs("div",{className:"flex items-center gap-2 mt-4",children:[T.jsxs("button",{onClick:r,className:"w-full flex items-center justify-center font-bold py-2 px-4 rounded-lg hover:opacity-90",style:{backgroundColor:Q.primary,color:Q.background},children:[" ",T.jsx(NN,{})," ",s?"Update":"Save"," "]}),T.jsx("button",{onClick:g,className:"p-2 rounded-lg hover:opacity-80",style:{backgroundColor:Q.cardLight,color:Q.text},title:"Share Team",children:T.jsx(UN,{})}),T.jsx("button",{onClick:a,className:"p-2 rounded-lg hover:opacity-80",style:{backgroundColor:Q.cardLight,color:Q.text},title:"Clear Team",children:T.jsx(xN,{})})]})]}),T.jsxs("section",{className:"p-6 rounded-xl shadow-lg",style:{backgroundColor:Q.card},children:[T.jsxs("div",{className:"flex justify-between items-center mb-4",children:[T.jsx("h2",{className:"text-base md:text-lg font-bold",style:{fontFamily:"'Press Start 2P'",color:Q.text},children:"Recent Teams"}),T.jsx("button",{onClick:()=>u("allTeams"),className:"text-sm hover:underline",style:{color:Q.primary},children:"View All"})]}),T.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto pr-2 custom-scrollbar",style:{"--scrollbar-track-color":Q.card,"--scrollbar-thumb-color":Q.primary,"--scrollbar-thumb-border-color":Q.card},children:l.length>0?l.map(M=>T.jsxs("div",{className:"p-4 rounded-lg flex items-center justify-between transition-colors",style:{backgroundColor:Q.cardLight},children:[T.jsxs("div",{className:"flex-1 min-w-0",children:[T.jsx("p",{className:"font-bold text-lg truncate",style:{color:Q.text},children:M.name}),T.jsx("div",{className:"flex mt-1",children:M.pokemons.map(Y=>T.jsx("img",{src:Y.sprite||Xn,onError:tt=>{tt.currentTarget.src=Xn},alt:Y.name,className:"h-8 w-8 -ml-2 border-2 rounded-full",style:{borderColor:Q.cardLight,backgroundColor:Q.card}},Y.id))})]}),T.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0 ml-2",children:[T.jsx("button",{onClick:()=>h(M),title:"Favorite",children:T.jsx(GA,{isFavorite:M.isFavorite,color:Q.textMuted})}),T.jsx("button",{onClick:()=>d(M),className:"text-xs font-bold py-1 px-3 rounded-full",style:{backgroundColor:Q.primary,color:Q.background},children:"Edit"}),T.jsx("button",{onClick:()=>m(M.id),className:"bg-red-600 p-1 hover:bg-red-700 text-white rounded-lg",children:T.jsx(Gd,{})})]})]},M.id)):T.jsx("p",{className:"text-center py-4",style:{color:Q.textMuted},children:"No recent teams yet."})})]})]}),T.jsx("div",{className:"lg:col-span-6",children:T.jsxs("section",{className:"p-6 rounded-xl shadow-lg h-full flex flex-col",style:{backgroundColor:Q.card},children:[T.jsxs("div",{className:"mb-4",children:[T.jsx("h2",{className:"text-lg md:text-xl font-bold mb-4",style:{fontFamily:"'Press Start 2P'",color:Q.text},children:"Choose your Pokémon!"}),T.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[T.jsx("input",{type:"text",placeholder:"Search Pokémon...",value:N,onChange:M=>k(M.target.value),className:"w-full p-3 rounded-lg border-2 focus:outline-none",style:{backgroundColor:Q.cardLight,borderColor:"transparent",color:Q.text}}),T.jsxs("select",{value:V,onChange:M=>w(M.target.value),className:"w-full p-3 rounded-lg border-2 focus:outline-none appearance-none capitalize",style:{backgroundColor:Q.cardLight,borderColor:"transparent",color:Q.text},children:[T.jsx("option",{value:"all",style:{color:Q.text},children:"All Generations"}),v.map(M=>T.jsx("option",{value:M.name,className:"capitalize",style:{color:Q.text},children:M.name.replace("-"," ")},M.name))]})]})]}),T.jsx("div",{className:"relative flex-grow h-[60vh]",children:R?T.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:T.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2",style:{borderColor:Q.primary}})}):T.jsxs(T.Fragment,{children:[x&&T.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center z-10 rounded-lg",children:T.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2",style:{borderColor:Q.primary}})}),T.jsxs("div",{className:"h-full overflow-y-auto custom-scrollbar",style:{"--scrollbar-track-color":Q.card,"--scrollbar-thumb-color":Q.primary,"--scrollbar-thumb-border-color":Q.card},children:[T.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-3 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4 p-2",children:j.slice(0,b).map((M,Y)=>T.jsx(QN,{details:H[M.id],onAdd:E,onShowDetails:S,lastRef:Y===b-1?y:null,isSuggested:Gt.has(M.id),colors:Q},M.id))}),A&&T.jsx("div",{className:"flex justify-center py-4",children:T.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2",style:{borderColor:Q.primary}})}),j.length===0&&!x&&T.jsx("p",{className:"text-center py-8",style:{color:Q.textMuted},children:"No Pokémon found with these filters. :("})]})]})})]})}),T.jsxs("div",{className:"lg:col-span-3 space-y-8",children:[T.jsxs("section",{className:"p-6 rounded-xl shadow-lg",style:{backgroundColor:Q.card},children:[T.jsx("h3",{className:"text-base md:text-lg font-bold mb-3 text-center",style:{fontFamily:"'Press Start 2P'",color:Q.text},children:"Filter by Type"}),T.jsx("div",{className:"grid grid-cols-5 lg:grid-cols-5 gap-1.5",children:Object.keys(HA).map(M=>T.jsx("button",{onClick:()=>C(M),className:`p-1.5 rounded-lg bg-transparent transition-colors hover:opacity-75 ${I.has(M)?"ring-2 ring-purple":""}`,style:{backgroundColor:Q.cardLight},title:M,children:T.jsx("img",{src:FA[M],alt:M,className:"w-full h-full object-contain"})},M))})]}),e.length>0&&T.jsxs("section",{className:"p-6 rounded-xl shadow-lg",style:{backgroundColor:Q.card},children:[T.jsx("h3",{className:"text-lg md:text-xl font-bold mb-4",style:{color:Q.text},children:"Team Analysis"}),T.jsxs("div",{children:[T.jsx("h4",{className:"font-semibold mb-2 text-green-400",children:"Offensive Coverage:"}),T.jsx("div",{className:"flex flex-wrap gap-1",children:_.strengths.size>0?Array.from(_.strengths).sort().map(M=>T.jsx(Qd,{type:M,colors:Q},M)):T.jsx("p",{className:"text-sm",style:{color:Q.textMuted},children:"No type advantages found."})})]}),T.jsxs("div",{className:"mt-4",children:[T.jsx("h4",{className:"font-semibold mb-2 text-red-400",children:"Defensive Weaknesses:"}),T.jsx("div",{className:"flex flex-wrap gap-1",children:Object.keys(_.weaknesses).length>0?Object.entries(_.weaknesses).sort(([,M],[,Y])=>Y-M).map(([M,Y])=>T.jsxs("div",{className:"flex items-center",children:[T.jsx(Qd,{type:M,colors:Q}),T.jsxs("span",{className:"text-xs text-red-300",children:["(",Y,"x)"]})]},M)):T.jsx("p",{className:"text-sm",style:{color:Q.textMuted},children:"Your team is rock solid!"})})]})]})]})]}),ZN=({teams:e,onEdit:t,onDelete:n,onToggleFavorite:i,searchTerm:r,setSearchTerm:s,colors:a})=>T.jsxs("div",{className:"p-6 rounded-xl shadow-lg",style:{backgroundColor:a.card},children:[T.jsx("h2",{className:"text-2xl md:text-3xl font-bold mb-6",style:{color:a.text},children:"All Saved Teams"}),T.jsx("input",{type:"text",placeholder:"Search teams by name...",value:r,onChange:l=>s(l.target.value),className:"w-full p-3 mb-6 rounded-lg border-2 focus:outline-none",style:{backgroundColor:a.cardLight,borderColor:"transparent",color:a.text}}),T.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:e.length>0?e.map(l=>T.jsxs("div",{className:"p-4 rounded-lg flex flex-col justify-between",style:{backgroundColor:a.cardLight},children:[T.jsxs("div",{className:"flex justify-between items-start",children:[T.jsx("p",{className:"font-bold text-xl truncate mb-2",style:{color:a.text},children:l.name}),T.jsx("button",{onClick:()=>i(l),title:"Favorite",children:T.jsx(GA,{isFavorite:l.isFavorite,color:a.textMuted})})]}),T.jsx("div",{className:"flex my-2",children:l.pokemons.map(u=>T.jsx("img",{src:u.sprite||Xn,onError:h=>{h.currentTarget.src=Xn},alt:u.name,className:"h-12 w-12 -ml-3 border-2 rounded-full",style:{borderColor:a.cardLight,backgroundColor:a.card}},u.id))}),T.jsxs("div",{className:"flex items-center gap-2 mt-auto pt-2",children:[T.jsx("button",{onClick:()=>t(l),className:"w-full bg-primary hover:bg-purple-500/30 text-white font-bold py-2 px-4 rounded-lg",children:"Edit"}),T.jsx("button",{onClick:()=>n(l.id),className:"p-2 bg-red-600 hover:bg-red-700 text-white rounded-lg",children:T.jsx(Gd,{})})]})]},l.id)):T.jsx("p",{className:"col-span-full text-center py-8",style:{color:a.textMuted},children:"No teams found."})})]});function WN(){const[e,t]=F.useState("dark"),n=IN[e],[i,r]=F.useState(null),[s,a]=F.useState(null),[l,u]=F.useState(!1),[h,d]=F.useState([]),[g,m]=F.useState([]),[_,N]=F.useState({}),[k,V]=F.useState({}),[w,v]=F.useState([]),[R,x]=F.useState("all"),[j,H]=F.useState(new Set),[E,y]=F.useState(""),A=GN(E,300),[b,I]=F.useState([]),[C,S]=F.useState([]),[Gt,Q]=F.useState(""),[M,Y]=F.useState(null),[tt,wt]=F.useState({strengths:new Set,weaknesses:{}}),[Dt,vi]=F.useState(!0),[_e,qt]=F.useState(!1),[Ge,Qe]=F.useState(!1),[_h,Tr]=F.useState([]),[xa,as]=F.useState("builder"),[Ti,Bn]=F.useState(!1),[Ye,Na]=F.useState(!1),[Ei,Oa]=F.useState(""),[Ai,Il]=F.useState(50),[vh,ka]=F.useState(null),[Ma,Va]=F.useState(3),[os,Er]=F.useState(new Set),[Cl,Dl]=F.useState(0),[ae,fe]=F.useState(!1),[Ar,xl]=F.useState(!1);F.useEffect(()=>{const z=()=>{window.innerWidth<768?Va(2):Va(3)};return z(),window.addEventListener("resize",z),()=>window.removeEventListener("resize",z)},[]);const lt=F.useCallback((z,q="info")=>{const X=Date.now();Tr(W=>[...W,{id:X,message:z,type:q}]),setTimeout(()=>Tr(W=>W.filter($=>$.id!==X)),3e3)},[]),bi=F.useMemo(()=>{const z=new Set(b.map(X=>X.id));return g.filter(X=>!z.has(X.id)).sort((X,W)=>{const $=os.has(X.id),dt=os.has(W.id);return $&&!dt?-1:!$&&dt?1:X.id-W.id})},[g,b,os]),br=F.useMemo(()=>C.sort((z,q)=>new Date(q.updatedAt||q.createdAt)-new Date(z.updatedAt||z.createdAt)).slice(0,3),[C]),Nl=F.useMemo(()=>{let z=[...C].sort((q,X)=>X.isFavorite-q.isFavorite||new Date(X.updatedAt||q.createdAt)-new Date(q.updatedAt||q.createdAt));return Ei&&(z=z.filter(q=>q.name.toLowerCase().includes(Ei.toLowerCase()))),z},[C,Ei]),Pa=F.useCallback(async z=>{if(!s||Ar)return;xl(!0),lt("Loading shared team...","info");const q=Yn(s,`artifacts/${Rn}/public/data/teams`,z);try{const X=await oN(q);if(X.exists()){const W=X.data(),$=W.pokemons.map(async xt=>{var Nt,Rt,Zt,At,Ot,Qt;if(_[xt.id])return _[xt.id];const pt=await(await fetch(`https://pokeapi.co/api/v2/pokemon/${xt.id}`)).json();return{id:pt.id,name:pt.name,sprite:(Nt=pt.sprites)==null?void 0:Nt.front_default,types:pt.types.map(Yt=>Yt.type.name),animatedSprite:(Qt=(Ot=(At=(Zt=(Rt=pt.sprites)==null?void 0:Rt.versions)==null?void 0:Zt["generation-v"])==null?void 0:At["black-white"])==null?void 0:Ot.animated)==null?void 0:Qt.front_default,stats:pt.stats,abilities:pt.abilities}}),dt=await Promise.all($);N(xt=>({...xt,...dt.reduce((Tt,pt)=>({...Tt,[pt.id]:pt}),{})})),I(dt.filter(Boolean)),Q(W.name),Y(null),lt(`Loaded team: ${W.name}`,"success")}else lt("Shared team not found.","error")}catch{lt("Failed to load shared team.","error")}},[s,_,lt,Ar]);F.useEffect(()=>{try{const z=wE(FN),q=KC(z);a(Hx(z));const X=LI(q,async W=>{if(W)r(W.uid),u(!0);else try{const $=typeof __initial_auth_token<"u"?__initial_auth_token:null;$?await MI(q,$):await DI(q),r(q.currentUser.uid)}catch{lt("Authentication failed. Please refresh.","error")}finally{u(!0)}});return()=>X()}catch{lt("Failed to connect to services.","error")}},[]),F.useEffect(()=>{(async()=>{try{const W=(await(await fetch("https://pokeapi.co/api/v2/pokemon-species?limit=1025")).json()).results.map(Rt=>fetch(Rt.url).then(Zt=>Zt.json())),dt=(await Promise.all(W)).flatMap(Rt=>Rt.varieties.map(Zt=>({name:Zt.pokemon.name,url:Zt.pokemon.url}))),Tt=Array.from(new Map(dt.map(Rt=>[Rt.url,Rt])).values()).map(Rt=>({id:parseInt(Rt.url.split("/")[6]),name:Rt.name,url:Rt.url}));d(Tt),m(Tt);const Nt=await(await fetch("https://pokeapi.co/api/v2/generation")).json();v(Nt.results)}catch{lt("Failed to load Pokémon data.","error")}finally{vi(!1)}})()},[]),F.useEffect(()=>{if(!s||Dt||!l)return;const q=new URLSearchParams(window.location.search).get("team");q&&Pa(q)},[s,Dt,l,Pa]),F.useEffect(()=>{(async()=>{if(Dt)return;qt(!0);let q=[...h];const X={"generation-i":[1,151],"generation-ii":[152,251],"generation-iii":[252,386],"generation-iv":[387,493],"generation-v":[494,649],"generation-vi":[650,721],"generation-vii":[722,809],"generation-viii":[810,905],"generation-ix":[906,1025]};if(R!=="all"&&X[R]){const[W,$]=X[R];q=q.filter(dt=>dt.id>=W&&dt.id<=$)}if(A&&(q=q.filter(W=>W.name.toLowerCase().includes(A.toLowerCase()))),j.size>0)try{const W=Array.from(j).map(xt=>fetch(`https://pokeapi.co/api/v2/type/${xt.toLowerCase()}`).then(Tt=>Tt.json()).then(Tt=>new Set(Tt.pokemon.map(pt=>pt.pokemon.name)))),dt=(await Promise.all(W)).reduce((xt,Tt)=>new Set([...xt].filter(pt=>Tt.has(pt))));q=q.filter(xt=>dt.has(xt.name))}catch{lt("Failed to apply type filter.","error")}m(q),Il(50),qt(!1)})()},[R,j,A,h,Dt]),F.useEffect(()=>{let z=!0;const q=async()=>{const W=bi.slice(0,Ai).filter($=>!_[$.id]||!_[$.id].evolution_chain_url);if(W.length!==0){Qe(!0);try{const $=await Promise.all(W.map(pt=>fetch(pt.url).then(Nt=>Nt.json()))),dt=$.map(pt=>fetch(pt.species.url).then(Nt=>Nt.json())),xt=await Promise.all(dt);if(!z)return;const Tt=$.reduce((pt,Nt,Rt)=>{var Zt,At,Ot,Qt,Yt,Wt;return pt[Nt.id]={id:Nt.id,name:Nt.name,sprite:(Zt=Nt.sprites)==null?void 0:Zt.front_default,animatedSprite:(Wt=(Yt=(Qt=(Ot=(At=Nt.sprites)==null?void 0:At.versions)==null?void 0:Ot["generation-v"])==null?void 0:Qt["black-white"])==null?void 0:Yt.animated)==null?void 0:Wt.front_default,types:Nt.types.map(sn=>sn.type.name),stats:Nt.stats,abilities:Nt.abilities,evolution_chain_url:xt[Rt].evolution_chain.url},pt},{});N(pt=>({...pt,...Tt}))}catch{}finally{z&&Qe(!1)}}};return bi.length>0&&q(),()=>{z=!1}},[bi,Ai,_]),F.useEffect(()=>{if(!i||!s)return;const z=nN(bf(s,`artifacts/${Rn}/users/${i}/teams`));return pv(z,X=>{S(X.docs.map(W=>({id:W.id,...W.data()})))},()=>lt("Could not load saved teams.","error"))},[i,s]),F.useEffect(()=>{const z=b.map($=>_[$.id]).filter(Boolean);if(z.length<b.length||z.length===0){wt({strengths:new Set,weaknesses:{}}),Er(new Set);return}const q={},X=new Set;z.flatMap($=>$.types).forEach($=>{var dt;Object.entries(((dt=yu[$])==null?void 0:dt.damageDealt)||{}).forEach(([xt,Tt])=>{Tt>1&&X.add(xt.toLowerCase())})}),Object.keys(yu).forEach($=>{const dt=$.charAt(0).toUpperCase()+$.slice(1);let xt=0,Tt=0;z.forEach(pt=>{const Nt=pt.types.reduce((Rt,Zt)=>{var At;return Rt*(((At=yu[Zt])==null?void 0:At.damageTaken[dt])??1)},1);Nt>1?xt++:Nt<1&&Tt++}),xt>0&&xt>Tt&&(q[$]=xt)}),wt({strengths:X,weaknesses:q}),(async()=>{const $=Object.keys(q);if($.length===0||h.length===0){Er(new Set);return}const dt=async At=>{if(k[At])return k[At];try{let Yt=(await(await fetch(At)).json()).chain;for(;Yt&&Yt.evolves_to.length>0;)Yt=Yt.evolves_to[0];const Wt=Yt.species.name;return V(sn=>({...sn,[At]:Wt})),Wt}catch{return null}},Tt=h.filter(At=>{const Ot=_[At.id];return Ot?$.some(Qt=>{const Yt=Qt.charAt(0).toUpperCase()+Qt.slice(1);return Ot.types.reduce((sn,Ri)=>{var Ii;return sn*(((Ii=yu[Ri])==null?void 0:Ii.damageTaken[Yt])??1)},1)<1}):!1}).map(async At=>{const Ot=_[At.id];return Ot!=null&&Ot.evolution_chain_url?await dt(Ot.evolution_chain_url):null}),pt=await Promise.all(Tt),Nt=[...new Set(pt.filter(Boolean))],Rt=new Set(Nt.map(At=>{var Ot;return(Ot=h.find(Qt=>Qt.name===At))==null?void 0:Ot.id}).filter(Boolean)),Zt=Array.from(Rt).filter(At=>!_[At]);if(Zt.length>0){const At=Zt.map(Ot=>`https://pokeapi.co/api/v2/pokemon/${Ot}/`);try{const Qt=(await Promise.all(At.map(Yt=>fetch(Yt).then(Wt=>Wt.json())))).reduce((Yt,Wt)=>{var sn,Ri,Ii,Ua,Pl,Rr;return Yt[Wt.id]={id:Wt.id,name:Wt.name,sprite:(sn=Wt.sprites)==null?void 0:sn.front_default,animatedSprite:(Rr=(Pl=(Ua=(Ii=(Ri=Wt.sprites)==null?void 0:Ri.versions)==null?void 0:Ii["generation-v"])==null?void 0:Ua["black-white"])==null?void 0:Pl.animated)==null?void 0:Rr.front_default,types:Wt.types.map(Ll=>Ll.type.name),stats:Wt.stats,abilities:Wt.abilities,evolution_chain_url:Wt.species.url},Yt},{});N(Yt=>({...Yt,...Qt}))}catch(Ot){console.error("Failed to fetch suggestion details:",Ot)}}Er(Rt)})()},[b,_,h,k]),F.useEffect(()=>{if(!s||!l)return;const z=Yn(s,"artifacts",Rn,"public","data","app-metadata","likes"),q=pv(z,X=>{X.exists()?Dl(X.data().count):pu(z,{count:0})},X=>{console.error("Like listener error:",X)});return sessionStorage.getItem("hasLikedPokemonBuilder")&&fe(!0),()=>q()},[s,l]);const Si=F.useRef(),Th=F.useCallback(z=>{Ge||_e||(Si.current&&Si.current.disconnect(),Si.current=new IntersectionObserver(q=>{q[0].isIntersecting&&bi.length>Ai&&Il(X=>X+50)}),z&&Si.current.observe(z))},[Ge,_e,bi,Ai]),Ol=F.useCallback(z=>{if(b.length>=6)return lt("Your team is full (6 Pokémon)!","warning");if(b.find(q=>q.id===z.id))return lt("This Pokémon is already on your team.","warning");I(q=>[...q,z])},[b,lt]),La=F.useCallback(z=>{I(q=>q.filter(X=>X.id!==z))},[]),wi=F.useCallback(()=>{I([]),Q(""),Y(null)},[]),kl=F.useCallback(async()=>{var X,W;if(!s||!i)return lt("Database connection not ready.","error");if(b.length===0)return lt("Your team is empty!","warning");if(!Gt.trim())return lt("Please name your team.","warning");if(C.some($=>$.name===Gt&&$.id!==M))return lt("A team with this name already exists.","warning");const z=M||Yn(bf(s,`artifacts/${Rn}/users/${i}/teams`)).id,q={name:Gt,pokemons:b.map($=>({id:$.id,name:$.name,sprite:$.sprite})),isFavorite:((X=C.find($=>$.id===M))==null?void 0:X.isFavorite)||!1,createdAt:((W=C.find($=>$.id===M))==null?void 0:W.createdAt)||new Date().toISOString(),updatedAt:new Date().toISOString()};try{await pu(Yn(s,`artifacts/${Rn}/users/${i}/teams`,z),q),lt(`Team "${Gt}" saved!`,"success"),wi()}catch{lt("Error saving team.","error")}},[s,i,b,Gt,M,C,lt,wi]);F.useCallback(async()=>{if(!(!s||ae||!l)){Yn(s,"artifacts",Rn,"public","data","app-metadata","likes");try{lt("Likes feature is under construction!","info"),sessionStorage.setItem("hasLikedPokemonBuilder","true"),fe(!0)}catch{lt("Could not register like.","error")}}},[s,ae,lt,l]);const Sr=F.useCallback(async()=>{if(!s||!l)return lt("Database not ready.","error");if(b.length===0)return lt("Cannot share an empty team!","warning");const z=Yn(bf(s,`artifacts/${Rn}/public/data/teams`)).id,q={name:Gt||"Unnamed Team",pokemons:b.map(X=>({id:X.id,name:X.name,sprite:X.sprite||""}))};try{await pu(Yn(s,`artifacts/${Rn}/public/data/teams`,z),q);const X=`${window.location.origin}${window.location.pathname}?team=${z}`,W=document.createElement("textarea");W.value=X,document.body.appendChild(W),W.focus(),W.select();try{document.execCommand("copy")?lt("Share link copied to clipboard!","success"):lt("Failed to copy link.","error")}catch{lt("Failed to copy link.","error")}document.body.removeChild(W)}catch{lt("Could not generate share link.","error")}},[s,b,Gt,lt,l]),ls=F.useCallback(async z=>{const q=z.pokemons.map(async W=>{var xt,Tt,pt,Nt,Rt,Zt;if(_[W.id])return _[W.id];const dt=await(await fetch(`https://pokeapi.co/api/v2/pokemon/${W.id}`)).json();return{id:dt.id,name:dt.name,sprite:(xt=dt.sprites)==null?void 0:xt.front_default,types:dt.types.map(At=>At.type.name),animatedSprite:(Zt=(Rt=(Nt=(pt=(Tt=dt.sprites)==null?void 0:Tt.versions)==null?void 0:pt["generation-v"])==null?void 0:Nt["black-white"])==null?void 0:Rt.animated)==null?void 0:Zt.front_default,stats:dt.stats,abilities:dt.abilities}}),X=await Promise.all(q);N(W=>({...W,...X.reduce(($,dt)=>({...$,[dt.id]:dt}),{})})),I(X.filter(Boolean)),Q(z.name),Y(z.id),as("builder"),Bn(!1),window.scrollTo({top:0,behavior:"smooth"})},[_]),us=F.useCallback(async z=>{if(!(!s||!i))try{await lN(Yn(s,`artifacts/${Rn}/users/${i}/teams`,z)),M===z&&wi(),lt("Team deleted.","info")}catch{lt("Error deleting team.","error")}},[s,i,M,wi,lt]),Sn=F.useCallback(async z=>{if(!(!s||!i))try{await pu(Yn(s,`artifacts/${Rn}/users/${i}/teams`,z.id),{...z,isFavorite:!z.isFavorite},{merge:!0})}catch{lt("Could not update favorite status.","error")}},[s,i,lt]),Ml=F.useCallback(z=>{H(q=>{const X=new Set(q);return X.has(z)?X.delete(z):X.add(z),X})},[]),cs=F.useCallback(z=>{ka(z)},[]),Vl=F.useCallback(()=>{t(z=>z==="dark"?"light":"dark")},[]),wr=()=>{switch(xa){case"allTeams":return T.jsx(ZN,{teams:Nl,onEdit:ls,onDelete:us,onToggleFavorite:Sn,searchTerm:Ei,setSearchTerm:Oa,colors:n});default:return T.jsx($N,{currentTeam:b,teamName:Gt,setTeamName:Q,handleRemoveFromTeam:La,handleSaveTeam:kl,editingTeamId:M,handleClearTeam:wi,recentTeams:br,setCurrentPage:as,handleToggleFavorite:Sn,handleEditTeam:ls,handleDeleteTeam:us,handleShareTeam:Sr,teamAnalysis:tt,searchInput:E,setSearchInput:y,selectedGeneration:R,setSelectedGeneration:x,generations:w,isInitialLoading:Dt,isFiltering:_e,availablePokemons:bi,pokemonDetailsCache:_,handleAddPokemonToTeam:Ol,lastPokemonElementRef:Th,isFetchingMore:Ge,visibleCount:Ai,selectedTypes:j,handleTypeSelection:Ml,showDetails:cs,suggestedPokemonIds:os,colors:n})}};return T.jsxs("div",{className:"min-h-screen font-sans",style:{backgroundColor:n.background,color:n.text},children:[T.jsx(XN,{pokemon:vh,onClose:()=>ka(null),onAdd:Ol,currentTeam:b,colors:n}),T.jsx("div",{className:"fixed top-5 right-5 z-50 space-y-2",children:_h.slice(0,Ma).map(z=>T.jsxs("div",{className:`flex items-center gap-2 px-4 py-2 rounded-lg shadow-lg text-white animate-fade-in-out ${z.type==="success"?"bg-green-600":z.type==="warning"?"bg-yellow-600":"bg-red-600"}`,children:[z.type==="success"&&T.jsx(jN,{}),z.type==="error"&&T.jsx(zN,{}),z.type==="warning"&&T.jsx(BN,{}),z.message]},z.id))}),T.jsxs("div",{className:"flex min-h-screen",children:[T.jsx("aside",{className:`fixed lg:relative lg:translate-x-0 inset-y-0 left-0 z-40 transition-all duration-300 ease-in-out ${Ye?"lg:w-20":"w-64"} ${Ti?"translate-x-0":"-translate-x-full"}`,style:{backgroundColor:n.card},children:T.jsxs("div",{className:"flex flex-col h-full",children:[T.jsxs("div",{className:`flex items-center h-16 p-4 ${Ye?"justify-center":"justify-between"}`,children:[T.jsx("h2",{className:`text-xl font-bold transition-opacity duration-200 whitespace-nowrap ${Ye?"lg:opacity-0 lg:hidden":"opacity-100"}`,style:{fontFamily:"'Press Start 2P'",color:n.primary},children:"Menu"}),T.jsx("button",{onClick:()=>Na(!Ye),className:"p-1 rounded-lg hidden lg:block transition-colors hover:opacity-80",style:{color:n.textMuted},children:Ye?T.jsx(LN,{}):T.jsx(PN,{})})]}),T.jsx("nav",{className:"px-4 flex-grow",children:T.jsxs("ul",{children:[T.jsx("li",{children:T.jsxs("button",{onClick:()=>{as("builder"),Bn(!1)},className:`w-full p-3 rounded-lg font-bold flex items-center transition-colors hover:bg-purple-500/30 ${xa==="builder"?"bg-primary":""} ${Ye?"justify-center":""}`,style:{color:n.text},children:[T.jsx(MN,{}),T.jsx("span",{className:`whitespace-nowrap overflow-hidden transition-all duration-300 ${Ye?"lg:w-0 lg:ml-0 opacity-0":"w-auto ml-3 opacity-100"}`,children:"Team Builder"})]})}),T.jsx("li",{children:T.jsxs("button",{onClick:()=>{as("allTeams"),Bn(!1)},className:`w-full p-3 mt-2 rounded-lg font-bold flex items-center transition-colors hover:bg-purple-500/30 ${xa==="allTeams"?"bg-primary":""} ${Ye?"justify-center":""}`,style:{color:n.text},children:[T.jsx(VN,{}),T.jsx("span",{className:`whitespace-nowrap overflow-hidden transition-all duration-300 ${Ye?"lg:w-0 lg:ml-0 opacity-0":"w-auto ml-3 opacity-100"}`,children:"All Teams"})]})})]})})]})}),T.jsxs("div",{className:"flex-1 min-w-0",children:[T.jsxs("header",{className:"relative flex items-center justify-between pt-4 px-4 h-24",children:[T.jsx("button",{onClick:()=>Bn(!Ti),className:"lg:hidden p-2 rounded-md",style:{backgroundColor:n.cardLight,color:n.text},children:Ti?T.jsx(QA,{}):T.jsx(kN,{})}),T.jsxs("div",{className:"flex-1 text-center px-2 marginLeft",children:[T.jsx("h1",{className:"text-xs sm:text-base lg:text-3xl font-bold tracking-wider truncate",style:{fontFamily:"'Press Start 2P'",color:n.primary},children:"Pokémon Team Builder"}),T.jsx("p",{className:"text-xs sm:text-sm md:text-base mt-1 truncate",style:{fontFamily:"'Press Start 2P'",color:n.primary},children:"By: Enzo Esmeraldo"})]}),T.jsx("div",{className:"flex items-center gap-2 lg:mr-4 sm:mr-0",children:T.jsx("button",{onClick:Vl,className:"p-2 rounded-md",style:{backgroundColor:n.cardLight,color:n.text},children:e==="dark"?T.jsx(qN,{color:n.text}):T.jsx(HN,{color:n.text})})})]}),T.jsx("div",{className:"p-4 sm:p-6 lg:p-8",children:wr()}),T.jsxs("footer",{className:"text-center mt-12 py-6 border-t",style:{borderColor:n.cardLight},children:[T.jsxs("p",{className:"text-sm",style:{color:n.textMuted},children:["Developed and built by ",T.jsx("a",{href:"https://github.com/ensinho",target:"_blank",rel:"noopener noreferrer",className:"underline hover:opacity-80",style:{color:n.text},children:"Enzo Esmeraldo"})]}),T.jsxs("div",{className:"flex justify-center gap-4 mt-4",children:[T.jsx("a",{href:"https://github.com/ensinho",target:"_blank",rel:"noopener noreferrer",className:"hover:opacity-80",style:{color:n.textMuted},children:T.jsx(CN,{color:n.textMuted})}),T.jsx("a",{href:"https://www.linkedin.com/in/enzoesmeraldo/",target:"_blank",rel:"noopener noreferrer",className:"hover:opacity-80",style:{color:n.textMuted},children:T.jsx(DN,{color:n.textMuted})})]}),T.jsxs("p",{className:"text-xs mt-2",style:{color:n.textMuted},children:["Using the ",T.jsx("a",{href:"https://pokeapi.co/",target:"_blank",rel:"noopener noreferrer",className:"underline hover:opacity-80",style:{color:n.text},children:"PokéAPI"}),". Pokémon and their names are trademarks of Nintendo."]})]})]})]}),T.jsx("style",{children:" @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap'); .custom-scrollbar::-webkit-scrollbar { width: 12px; } .custom-scrollbar::-webkit-scrollbar-track { background: var(--scrollbar-track-color); } .custom-scrollbar::-webkit-scrollbar-thumb { background-color: var(--scrollbar-thumb-color); border-radius: 20px; border: 3px solid var(--scrollbar-thumb-border-color); } @keyframes fade-in { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } } .animate-fade-in { animation: fade-in 0.2s ease-out forwards; } .image-pixelated { image-rendering: pixelated; } .bg-primary { background-color: #7d65e1; } "})]})}lw.createRoot(document.getElementById("root")).render(T.jsx(Iv.StrictMode,{children:T.jsx(WN,{})}));
